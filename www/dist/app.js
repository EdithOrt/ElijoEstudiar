window.VERSION = "0.0.1";var pmb_im={controllers:angular.module("pmb_im.controllers",[]),services:angular.module("pmb_im.services",[])};pmb_im.app=angular.module("pmb_im",["ionic","ionic.wizard","ion-autocomplete","leaflet-directive","pmb_im.controllers","pmb_im.services","ngCordova"]).constant("ApiImEndpoint",{url:"http://www.montevideo.gub.uy"}).constant("ApiDataEndpoint",{url:"http://backend.educacion.thor.datauy.org"}).run(["$ionicPlatform","$rootScope","$cordovaKeyboard",function(e,t,n){t.VERSION=window.VERSION,e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1),cordova.plugins.Keyboard.disableScroll(!1)),ionic.Platform.isFullScreen=!0,window.StatusBar&&StatusBar.styleDefault()})}]).config(["$stateProvider","$urlRouterProvider","$compileProvider","$ionicConfigProvider",function(e,t,n,o){n.debugInfoEnabled(!1),e.state("app",{cache:!1,url:"/app","abstract":!0,templateUrl:"templates/menu.html",controller:"AbsController"}).state("app.form",{cache:!1,url:"/form",views:{menuContent:{templateUrl:"templates/form.html",controller:"FormCtrl"},mapView:{templateUrl:"templates/map.html",controller:"MapController"}}}).state("app.intro",{cache:!1,url:"/intro",views:{menuContent:{templateUrl:"templates/intro.html",controller:"IntroCtrl"}}}),t.otherwise("/app/intro")}]),pmb_im.controllers.controller("AbsController",["$scope",function(e){}]),pmb_im.controllers.controller("FormCtrl",["$scope","$state","$cordovaGeolocation","$stateParams","$ionicPlatform","$ionicPopup","LocationsService","ApiService","DBService","$ionicSlideBoxDelegate","$ionicScrollDelegate",function(e,t,n,o,r,a,i,s,l,u,c){e.form={},e.form.edad=16,e.form.ultimo_nivel_aprobado="primaria",e.form.ultimo_anio_aprobado="",e.form.plan="",e.form.lugar="",e.form.que="",e.form.donde="",e.form.turno="matutino",e.form.SearchQueResults={},e.form.SearchDondeResults={},e.form.searchQue="",e.form.searchDonde="",e.form.option="list",e.establecimientos=null,e.restarEdad=function(){e.form.edad>4&&(e.form.edad=e.form.edad-1)},e.sumarEdad=function(){e.form.edad=e.form.edad+1},e.selectUltimoNivel=function(t){var n,o=document.getElementsByClassName("nivel");for(n=0;n<o.length;n++)o[n].className="nivel_"+o[n].id+" nivel hidden";var r=document.getElementById(t);r.className="nivel_"+r.id+" nivel",e.form.ultimo_nivel_aprobado=t},e.select_turno=function(t){var n,o=document.getElementsByClassName("turnos");for(n=0;n<o.length;n++)o[n].className="turnos turno_"+o[n].id+"_off";var r=document.getElementById(t);r.className="turnos turno_"+t,e.form.turno=t},e.select_option=function(t){var n,o=document.getElementsByClassName("options");for(n=0;n<o.length;n++)o[n].className="options option_"+o[n].id+"_off";var r=document.getElementById(t);r.className="options option_"+t,e.form.option=t,"map"==t&&(document.getElementById("map_container").style.visibility="visible",document.getElementById("list_container").style.display="none"),"list"==t&&(document.getElementById("list_container").style.display="block",document.getElementById("map_container").style.visibility="hidden")},e.onSearchChangeQue=function(){var t=document.getElementById("que_estudiar"),n=t.value.trim();n.length>=3?s.searchQueEstudiar(n).then(function(t){e.form.SearchQueResults=t.data,document.getElementById("SearchQueResults").style.display="block"}):e.hideSearchQueResults()},e.hideSearchQueResults=function(){document.getElementById("SearchQueResults").style.display="none"},e.selectQueEstudiarItem=function(t){e.form.que=t,e.hideSearchQueResults(),e.form.searchQue=t.nombre},e.listAllQueEstudiar=function(){var t="api-get-all";s.searchQueEstudiar(t).then(function(t){e.form.SearchQueResults=t.data,document.getElementById("SearchQueResults").style.display="block"})},e.onSearchChangeDonde=function(){var t=document.getElementById("donde_estudiar"),n=t.value.trim();n.length>=3?s.searchDondeEstudiar(n).then(function(t){e.form.SearchDondeResults=t.data,document.getElementById("SearchDondeResults").style.display="block"}):e.hideSearchDondeResults()},e.hideSearchDondeResults=function(){document.getElementById("SearchDondeResults").style.display="none"},e.selectDondeEstudiarItem=function(t){e.form.donde=t,e.hideSearchDondeResults(),e.form.searchDonde=t.loc_dep},e.editSearch=function(){u.previous(),u.previous()},e.next=function(){u.next()},e.previous=function(){u.previous()},e.slideHasChanged=function(t){e.select_option("list"),2==t&&(s.updateFilters(e.form),null!=s.filters&&(s.getEstablecimientosByFilters().then(function(t){console.log(t),s.lastSearchResponseEstablecimientos=t,e.establecimientos=t,s.updateMapPins(e.establecimientos)}),null==e.establecimientos&&(e.establecimientos=[{nombre:"Liceo Nº 1",id:1214,lat:-34.906346,lon:-56.172065},{nombre:"Liceo Nº 2",id:2434,lat:-34.902754,lon:-56.164127},{nombre:"Liceo Nº 7",id:4324},{nombre:"Liceo Juan Zorrilla",id:5345}],s.updateMapPins(e.establecimientos))))}}]),pmb_im.controllers.controller("IntroCtrl",["$scope","$state","$cordovaGeolocation","$stateParams","$ionicPlatform","$ionicPopup","LocationsService",function(e,t,n,o,r,a,i){e.geolocate=function(){var e={timeout:3500,enableHighAccuracy:!0};n.getCurrentPosition(e).then(function(e){i.save_initial_position(e),t.go("app.form")},function(e){t.go("app.form")})},e.go_to_form=function(){t.go("app.form")}}]),pmb_im.controllers.controller("MapController",["$scope","_","$cordovaGeolocation","leafletData","ConfigService","PinService","$interval","$location","MapService","ModalService","ApiService",function(e,t,n,o,r,a,i,s,l,u,c){e.baseURL=r.baseURL,e.AppName=r.AppName,e.one_value_popup=null,e.myIntervals=new Array,e.$on("$ionicView.beforeEnter",function(){u.checkNoModalIsOpen(),c.mapScope=e,e.create_online_map()}),e.$on("$ionicView.afterEnter",function(){document.getElementById("spinner").style.display="none",document.getElementById("pinspinner").style.display="none"}),e.filtersUpdated=function(){console.log(c.filters),e.loadPinsLayer()},e.create_online_map=function(){e.map={defaults:{tileLayer:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",minZoom:1,maxZoom:18,zoomControlPosition:"topleft"},markers:{},events:{map:{enable:["context"],logic:"emit"}},center:{lat:-34.901113,lng:-56.164531,zoom:16}}},e.locate=function(){n.getCurrentPosition().then(function(t){e.map.center.lat=t.coords.latitude,e.map.center.lng=t.coords.longitude,e.map.center.zoom=15,e.map.markers.now={lat:t.coords.latitude,lng:t.coords.longitude,message:"Estás aquí",focus:!0,draggable:!1}},function(e){})},e.hideOffScreenPins=function(){},e.loadPinsLayer=function(e){null!=e&&o.getMap().then(function(t){e.forEach(function(e){if(e.lat&&e.lon){var n=L.marker([e.lat,e.lon]);n.bindPopup("<b>"+e.nombre+"</b>").openPopup(),n.addTo(t)}})})}}]),pmb_im.services.factory("ApiService",["$http","ConfigService",function(e,t){function n(e){angular.extend(this,e)}var o=t.baseURL+"/api/";return n.searchQueEstudiar=function(t){return e.get(o+"search/"+t,{cache:!1,params:{hash_id:Math.random()}})},n.searchDondeEstudiar=function(t){return e.get(o+"searchByLocalidadDepartamento/"+t,{cache:!1,params:{hash_id:Math.random()}})},n.filters=null,n.mapScope=null,n.formScope={},n.lastSearchResponseEstablecimientos=null,n.updateFilters=function(e){n.filters=e,null!=n.mapScope&&n.mapScope.filtersUpdated()},n.createFilterParamsForGetRequest=function(){var e={hash_id:Math.random(),edad:n.filters.edad,ultimo_nivel_aprobado:n.filters.ultimo_nivel_aprobado,ultimo_anio_aprobado:n.filters.ultimo_anio_aprobado,turno:n.filters.turno};return""!=n.filters.que&&(e.queEstudiarId=n.filters.que.id,e.queEstudiarNombre=n.filters.que.nombre,e.queEstudiarTagUno=n.filters.que.tag[0],e.queEstudiarTagDos=n.filters.que.tag[1]),""!=n.filters.donde&&(e.dondeEstudiarDepartamento=n.filters.donde.departamento,e.dondeEstudiarLocalidad=n.filters.donde.localidad,e.dondeEstudiarLat=n.filters.donde.coordenadas.lat,e.dondeEstudiarLon=n.filters.donde.coordenadas.lon),e},n.getEstablecimientosByFilters=function(){if(null!=n.filters){var t=n.createFilterParamsForGetRequest();return e.get(o+"getEstablecimientos/",{cache:!1,params:t})}},n.updateMapPins=function(e){n.mapScope.loadPinsLayer(e)},n}]),pmb_im.services.factory("AuthService",["$http","$cordovaFileTransfer","ConfigService","ValidationService",function(e,t,n,o){var r=n.baseURL+"/api/";return{log_in:function(t,n){var o="user="+t+"&password="+n;return e.post(r+"login",o,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},sign_out:function(t,n){return e.get(r+"sign_out",{withCredentials:!0,params:{password_sign_in:t,email:n}})},create_user:function(n){if(n.picture_url&&o.isMobileDevice()){var a={fileKey:"photo",withCredentials:!0,params:{user:n.username,password:n.password,email:n.email,gender:n.gender,interested:n.interested,status:n.status,show_location:n.show_location}},i=!0;return t.upload(r+"create_user",n.picture_url,a,i)}if(n.picture_url){var s=new FormData;return s.append("photo",n.picture_url),s.append("user",n.username),s.append("password",n.password),s.append("email",n.email),s.append("gender",n.gender),s.append("interested",n.interested),s.append("status",n.status),s.append("show_location",n.show_location),e.post(r+"create_user",s,{headers:{"Content-Type":void 0},transformRequest:angular.identity})}var l="user="+n.username+"&password="+n.password+"&email="+n.email+"&gender="+n.gender;return l=l+"&interested="+n.interested+"&status="+n.status+"&show_location="+n.show_location,e.post(r+"create_user",l,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},password_recovery:function(t){return e.get(r+"forgot_password",{params:{login_email:t}})},password_change:function(t,n,o,a){var i="email="+t+"&password_sign_in="+n+"&new_password="+o+"&confirm="+a;return e.post(r+"change_password",i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},edit_user:function(n){if(n.picture_url&&o.isMobileDevice()){var a={fileKey:"photo",withCredentials:!0,params:{user:n.username,password:n.password,email:n.email,gender:n.gender,interested:n.interested,status:n.status,show_location:n.show_location}},i=!0;return t.upload(r+"edit_profile",n.picture_url,a,i)}var s="user="+n.username+"&password="+n.password+"&email="+n.email+"&gender="+n.gender;if(s=s+"&interested="+n.interested+"&status="+n.status+"&show_location="+n.show_location,n.picture_url){var l=new FormData;return l.append("photo",n.picture_url),l.append("user",n.username),l.append("password",n.password),l.append("email",n.email),l.append("gender",n.gender),l.append("interested",n.interested),l.append("status",n.status),l.append("show_location",n.show_location),e.post(r+"edit_profile",l,{headers:{"Content-Type":void 0},transformRequest:angular.identity})}return e.post(r+"edit_profile",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}]),pmb_im.services.factory("ConfigService",["$http",function(e){var t={};return t.baseURL="http://ee_backend.development.datauy.org",ionic.Platform.isWebView()?t.baseURL="http://ee_backend.development.datauy.org":t.baseURL="/backend",t.AppName="Elijo Estudiar",t}]),pmb_im.services.factory("ConnectivityService",["$cordovaNetwork",function(e){return{isOnline:function(){return!0},isOffline:function(){return!1}}}]),pmb_im.services.factory("DBService",["$q",function(e){function t(e,t,o,r,a,i,s,l){var u={_id:"user-logged",name:e,password:t,picture_url:o,show_location:r,uid:a,status:i,gender:s,interested:l};n().then(function(e){return u._rev=e._rev,m.put(u)})["catch"](function(e){return m.put(u)})}function n(){return m.get("user-logged")}function o(){m.get("user-logged").then(function(e){return m.remove(e)})}function r(){return m=new PouchDB("tomamosuna_local_db")}function a(e){var t=new Date,n="report_"+t.getFullYear()+(t.getMonth()+1)+t.getDate()+t.getMilliseconds();return e._id=n,m.put(e)}function i(e){return m.put(e)}function s(){return m.get("categories-list")}function l(e){s().then(function(t){return e._rev=t._rev,m.put(e)})["catch"](function(t){return e._id="categories-list",m.put(e)})}function u(e){return m.get(e)}function c(){return m.allDocs({include_docs:!0,attachments:!1,startkey:"report_",endkey:"report_￿"})}function d(e){m.get(e).then(function(e){return m.remove(e)})}function p(e){return m.remove(e)}var m;return{initDB:r,saveUser:t,getUser:n,eraseUser:o,saveReport:a,getReport:u,getAllReports:c,updateReport:i,deleteReport:d,deleteGivenReport:p,getCategories:s,saveCategories:l}}]),pmb_im.services.factory("DrinkService",["$http","ConfigService",function(e,t){var n=t.baseURL+"/api/";return{getAllDrinksAvailable:function(t,o){var r="user="+t+"&password="+o+"&hash_id="+Math.random();return e.post(n+"get_possible_drinks",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},getAllInvitationsWithUser:function(t,o,r,a){var i="user="+t+"&password="+o+"&hash_id="+Math.random();return i=i+"&uid="+r+"&author_uid="+a,e.post(n+"get_invitations_between_users",i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},sendDrinkInvitationToUser:function(t,o,r,a,i){var s="user="+a+"&password="+i+"&drink_nid="+t+"&destination_uid="+o+"&author_uid="+r+"&hash_id="+Math.random();return e.post(n+"send_drink_invitation",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},sendDrinkInvitationResponse:function(t,o,r,a,i){var s="response="+t+"&user="+o+"&password="+r+"&invitation_nid="+a+"&destination_uid="+i+"&hash_id="+Math.random();return e.post(n+"invitation_response",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}]),pmb_im.services.factory("ErrorService",["$http","$ionicPopup","ValidationService",function(e,t,n){return{http_response_is_successful:function(e,t){var n=document.getElementById(t);return e.data&&"success"==e.data.Status||"success"==e.Status?(n.style.display="none",!0):(e.data?n.innerHTML="<h3>"+e.data.Message+"</h3>":n.innerHTML="<h3>"+e.Message+"</h3>",n.style.display="block",!1)},http_response_is_successful_ajax:function(e){return 0!=e.data.result},http_response_is_successful_popup:function(e){if(0==e.data.result){var n=t.alert({title:"Error",template:e.data.message});return n.then(function(e){return!1}),!1}return!0},http_data_response_is_successful:function(e,t){var n=document.getElementById(t);return"success"!=e.Status?(n.innerHTML="<h3>"+e.Message+"</h3>",n.style.display="block",!1):(n.style.display="none",!0)},http_data_response_is_successful_ajax:function(e){return 0!=e.result},show_error_message:function(e,t){var n=document.getElementById(e);return n.innerHTML="<h3>"+t+"</h3>",n.style.display="block",!1},show_error_message_popup:function(e){var n=t.alert({title:"Error",template:e});return n.then(function(e){return!1}),!1},check_fields:function(e,t){var o="";if(e.forEach(function(e){"notNull"==e.type&&(n.validate_not_empty(e.value)||(o=o+'<h3>- El campo "'+e.name+'" no puede estar vacío.</h3>')),"email"==e.type&&(n.validate_email(e.value)||(o=o+'<h3>- El campo "'+e.name+'" no es una dirección de correo válida.</h3>')),"iddoc_uy"==e.type&&(n.validate_iddoc_uy(e.value)||(o=o+'<h3>- El campo "'+e.name+'" no es una cédula uruguaya válida.</h3>')),"two_words"==e.type&&(n.validate_two_words(e.value)||(o=o+'<h3>- El campo "'+e.name+'" debe contener al menos dos palabras.</h3>')),"equalsTo"==e.type&&(n.validate_equalsTo(e.value,e.secondValue)||(o=o+'<h3>- Los campos "'+e.name+'" no coinciden.</h3>'))}),""==o)return!0;var r=document.getElementById(t);return r.innerHTML=o,r.style.display="block",!1}}}]),pmb_im.services.factory("Loader",["$ionicLoading","$timeout","$ionicPopup",function(e,t,n){var o={showLoading:function(t){t=t||"Loading...",e.show({template:t})},hideLoading:function(){e.hide()},toggleLoadingWithMessage:function(e,n){var o=this;o.showLoading(e),t(function(){o.hideLoading()},n||3e3)},confirmPopup:function(e,t){var o=n.confirm({title:e,template:t});return o},showAlert:function(e,t){var o=n.alert({title:e,template:t});return o}};return o}]),pmb_im.services.factory("LocationsService",[function(){var e={};return e.initial_lat="",e.initial_lng="",e.last_user_lat="",e.last_user_lng="",e.council_modal=null,e.selected_council=null,e.selectCouncil=function(t){e.selected_council=t},e.save_initial_position=function(t){e.initial_lat=t.coords.latitude,e.initial_lng=t.coords.longitude},e.save_last_user_position=function(t,n){e.last_user_lat=t,e.last_user_lng=n},e.savedLocations=[],e}]),pmb_im.services.factory("MapService",["leafletData","$compile",function(e,t){proj4.defs("EPSG:32721","+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs");var n={};return n.goToPlace=function(n,o,r,a){var i={type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::32721"}},features:[{type:"Feature",geometry:{type:"Point",coordinates:[o,r]},properties:{nombre:n}}]};e.getMap().then(function(e){var n,o=L.Proj.geoJson(i,{pointToLayer:function(e,o){n=o;var r="<p align='center'>"+e.properties.nombre+" <br/> <a ng-click='new_report_from_latlon("+n.lat+","+n.lng+");'>Iniciar reporte aquí</a></p>",i=t(r)(a);return L.marker(o).bindPopup(i[0])}});o.addTo(e),e.setView(n,18),o.openPopup()})},n.centerMapOnCoords=function(t,n,o){e.getMap().then(function(e){e.setView(new L.LatLng(t,n),o)})},n}]),pmb_im.services.factory("MessageService",["$http","leafletData","ConfigService",function(e,t,n){function o(e){angular.extend(this,e)}var r=(n.baseURL+"/sites/tomamos_una/files/json/online_users_geo.json",n.baseURL+"/api/");return o.getAllMessagesToUser=function(t,n,o,a){var i="user="+t+"&password="+n+"&author_uid="+a+"&uid="+o+"&hash_id="+Math.random();return e.post(r+"get_all_messages_to_user",i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o.getUserInfo=function(t){return e.get(r+"get_user_info",{cache:!1,params:{uid:t,hash_id:Math.random()}})},o.sendTextMessageToUser=function(t,n,o,a,i){var s="user="+a+"&password="+i+"&text="+t+"&destination_uid="+n+"&author_uid="+o;return e.post(r+"send_text_message",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o.checkWhoCanTalk=function(t,n){var o="user="+t+"&password="+n;return e.post(r+"check_user_talk",o,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o.canTalkToUsers=new Array,o.current={},o.build=function(e){return new o(e)},o}]),pmb_im.services.factory("ModalService",[function(){var e={};return e.activeModal=null,e.checkNoModalIsOpen=function(){e.activeModal&&(e.activeModal.hide(),e.activeModal.remove())},e}]),pmb_im.services.factory("NotificationService",["$http","ConfigService",function(e,t){var n=t.baseURL+"/api/";return{getUnrecivedNotifications:function(t,o){var r="user="+t+"&password="+o+"&hash_id="+Math.random();return e.post(n+"get_unrecived_notifications",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},dontShowNotificationAgain:function(t,o,r){var a="user="+t+"&password="+o+"&nid="+r+"&hash_id="+Math.random();return e.post(n+"dont_show_notification_again",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}]),pmb_im.services.factory("PinService",["$http","leafletData","ConfigService",function(e,t,n){function o(e){angular.extend(this,e)}var r=n.baseURL+"/oferta.geojson/-34.828518,-55.951376/MATUTINO",a=n.baseURL+"/api/";return o.getAll=function(){return e.get(r,{cache:!1,params:{hash_id:Math.random()}})},o.sendUserLocation=function(t,n,o,r,i){var s="user="+o+"&password="+r+"&lat="+t+"&lon="+n+"&uid="+i;return e.post(a+"send_user_position",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o._all=[],o.current={},o.lastPinsResponse=null,o.build=function(e){return new o(e)},o.prototype.setLatLng=function(e){this.lat=e.lat,this.lon=e.lng},o}]),pmb_im.services.factory("PopUpService",["$ionicPopup","ValidationService",function(e,t){return{show_alert:function(t,n){var o=e.alert({title:t,template:n});return o.then(function(e){return!0}),!0},confirmPopup:function(t,n){var o=e.confirm({title:t,template:n});return o},askForOneValuePopUp:function(n,o,r,a,i){$scope=n;var s=e.show({template:a+': <input type="text" id="one_value_popup"><div id="error_container_inside"></div>',title:o,subTitle:r,scope:$scope,buttons:[{text:"Cancelar"},{text:"<b>Enviar</b>",type:"button-positive",onTap:function(e){var n="",o=document.getElementById("one_value_popup").value;if("notNull"==i&&(t.validate_not_empty(o)||(n=n+'<h3>- El campo "'+a+'" no puede estar vacío.</h3>')),"email"==i&&(t.validate_email(o)||(n=n+'<h3>- El campo "'+a+'" no es una dirección de correo válida.</h3>')),"iddoc_uy"==i&&(t.validate_iddoc_uy(o)||(n=n+'<h3>- El campo "'+a+'" no es una cédula uruguaya válida.</h3>')),"two_words"==i&&(t.validate_two_words(o)||(n=n+'<h3>- El campo "'+a+'" debe contener al menos dos palabras.</h3>')),""==n)return o;var r=document.getElementById("error_container_inside");r.innerHTML=n,r.style.display="block",e.preventDefault()}}]});return s}}}]),pmb_im.services.factory("SemaphoreService",[function(){var e={};return e.semaphores=new Array,e.semaphores["open-modal"]="available",e.semaphores["submit-form"]="available",e.semaphores["submit-location"]="available",e.semaphores.can_talk="available",e.takeIfAvailable=function(t){return"available"==e.semaphores[t]&&(e.semaphores[t]="occupied",!0)},e.makeAvailableAgain=function(t){return"occupied"==e.semaphores[t]&&(e.semaphores[t]="available",!0)},e}]),pmb_im.services.factory("locationAPI",["$http","$q","ApiImEndpoint","ApiDataEndpoint","ConfigService","LocationsService",function(e,t,n,o,r,a){var i="ubicacionesRestProd",s={};return s.searchLocationByStr=function(t){var n=r.baseURL+"/ajax/geocode?term="+a.selected_council+","+t;return e.get(n,{method:"GET",params:{}})},s.searchEsquinaByStr=function(t){var n=r.baseURL+"/ajax/geocode?term="+a.selected_council+","+t.calle+","+t.esquina;return e.get(n,{method:"GET",params:{}})},s.getLocationGeom=function(t){for(var o=n.url+"/"+i+s.getParamPathByTipo(t.tipo),r=0;r<t.pathParams.length;r++)o+="/"+t.pathParams[r];return e.get(baseURL).then(function(e){return e.data})},s.getLocationGeomPMB=function(t,n,o){var i=r.baseURL+"/ajax/geocode?term="+a.selected_council+","+t+","+n+","+o;return e.get(i)},s.getParamPathByTipo=function(e){var t={ESQUINA:"/esquina",DIRECCION:"/direccion"};return t[e]},s}]),pmb_im.services.factory("_",[function(){return window._}]),pmb_im.services.factory("UserService",["$http",function(e){var t={};return t.uid=null,t.name=null,t.email=null,t.password=null,t.picture_url="url(./img/icon-user-anonymous.png)",t.show_location=null,t.save_user_data=function(e,n,o,r,a,i,s,l){t.uid=a,t.name=e,t.password=n,t.picture_url=o,t.show_location=r,t.status=i,t.gender=s,t.interested=l},t.erase_user_data=function(){t.name=null,t.email=null,t.password=null,t.identity_document=null,t.phone=null,t.picture_url=null},t.get_user_data=function(){},t.add_photo=function(e){t.picture_url=e},t.isLogged=function(){return null!=t.name&&""!=t.name},t}]),pmb_im.services.factory("ValidationService",["$http","$ionicPopup",function(e,t){return{isMobileDevice:function(){return!!window.cordova},validate_not_empty:function(e){return null!=e&&"undefined"!=e&&""!=e},validate_two_words:function(e){if(null!=e&&"undefined"!=e&&""!=e){var t=e.split(" ").filter(function(e){return""!==e});return t.length>1}return!1},validate_equalsTo:function(e,t){return e==t},validate_email:function(e){if(null!=e&&"undefined"!=e&&""!=e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}return!1},validate_iddoc_uy:function(e){if(null!=e&&"undefined"!=e&&""!=e){e=e.replace(/\D/g,"");var t=e[e.length-1],n=0,o=0;if(e.length<=6)for(o=e.length;o<7;o++)e="0"+e;for(o=0;o<7;o++)n+=parseInt("2987634"[o])*parseInt(e[o])%10;var r;return r=n%10===0?0:10-n%10,t==r}return!1}}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXJzL2Ficy5jdHJsLmpzIiwiY29udHJvbGxlcnMvZm9ybS5jcnRsLmpzIiwiY29udHJvbGxlcnMvaW50cm8uY3RybC5qcyIsImNvbnRyb2xsZXJzL21hcC5jdHJsLmpzIiwic2VydmljZXMvYXBpLnNlcnZpY2UuanMiLCJzZXJ2aWNlcy9hdXRoLnNlcnZpY2VzLmpzIiwic2VydmljZXMvY29uZmlnLnNlcnZpY2VzLmpzIiwic2VydmljZXMvY29ubmVjdGl2aXR5LnNlcnZpY2VzLmpzIiwic2VydmljZXMvZGIuc2VydmljZXMuanMiLCJzZXJ2aWNlcy9kcmluay5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2Vycm9yLnNlcnZpY2VzLmpzIiwic2VydmljZXMvbG9hZGVyLnNlcnZpY2VzLmpzIiwic2VydmljZXMvbG9jYXRpb25zU2VydmljZS5qcyIsInNlcnZpY2VzL21hcC5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL21lc3NhZ2Uuc2VydmljZS5qcyIsInNlcnZpY2VzL21vZGFsU2VydmljZS5qcyIsInNlcnZpY2VzL25vdGlmaWNhdGlvbi5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL3Bpbi5zZXJ2aWNlLmpzIiwic2VydmljZXMvcG9wdXAuc2VydmljZXMuanMiLCJzZXJ2aWNlcy9zZW1hcGhvcmUuc2VydmljZS5qcyIsInNlcnZpY2VzL3ViaWNhY2lvbmVzLnNlcnZpY2VzLmpzIiwic2VydmljZXMvdW5kZXJzY29yZS5zZXJ2aWNlLmpzIiwic2VydmljZXMvdXNlci5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL3ZhbGlkYXRpb24uc2VydmljZXMuanMiXSwibmFtZXMiOlsicG1iX2ltIiwiY29udHJvbGxlcnMiLCJhbmd1bGFyIiwibW9kdWxlIiwic2VydmljZXMiLCJhcHAiLCJjb25zdGFudCIsInVybCIsInJ1biIsIiRpb25pY1BsYXRmb3JtIiwiJHJvb3RTY29wZSIsIiRjb3Jkb3ZhS2V5Ym9hcmQiLCJWRVJTSU9OIiwid2luZG93IiwicmVhZHkiLCJjb3Jkb3ZhIiwicGx1Z2lucyIsIktleWJvYXJkIiwiaGlkZUtleWJvYXJkQWNjZXNzb3J5QmFyIiwiZGlzYWJsZVNjcm9sbCIsImlvbmljIiwiUGxhdGZvcm0iLCJpc0Z1bGxTY3JlZW4iLCJTdGF0dXNCYXIiLCJzdHlsZURlZmF1bHQiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRjb21waWxlUHJvdmlkZXIiLCIkaW9uaWNDb25maWdQcm92aWRlciIsImRlYnVnSW5mb0VuYWJsZWQiLCJzdGF0ZSIsImNhY2hlIiwiYWJzdHJhY3QiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJ2aWV3cyIsIm1lbnVDb250ZW50IiwibWFwVmlldyIsIm90aGVyd2lzZSIsIiRzY29wZSIsIiRzdGF0ZSIsIiRjb3Jkb3ZhR2VvbG9jYXRpb24iLCIkc3RhdGVQYXJhbXMiLCIkaW9uaWNQb3B1cCIsIkxvY2F0aW9uc1NlcnZpY2UiLCJBcGlTZXJ2aWNlIiwiREJTZXJ2aWNlIiwiJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZSIsIiRpb25pY1Njcm9sbERlbGVnYXRlIiwiZm9ybSIsImVkYWQiLCJ1bHRpbW9fbml2ZWxfYXByb2JhZG8iLCJ1bHRpbW9fYW5pb19hcHJvYmFkbyIsInBsYW4iLCJsdWdhciIsInF1ZSIsImRvbmRlIiwidHVybm8iLCJTZWFyY2hRdWVSZXN1bHRzIiwiU2VhcmNoRG9uZGVSZXN1bHRzIiwic2VhcmNoUXVlIiwic2VhcmNoRG9uZGUiLCJvcHRpb24iLCJlc3RhYmxlY2ltaWVudG9zIiwicmVzdGFyRWRhZCIsInN1bWFyRWRhZCIsInNlbGVjdFVsdGltb05pdmVsIiwiaWROaXZlbCIsImkiLCJ4IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibGVuZ3RoIiwiY2xhc3NOYW1lIiwiaWQiLCJzZWxlY3RlZCIsImdldEVsZW1lbnRCeUlkIiwic2VsZWN0X3R1cm5vIiwiaWRUdXJubyIsInNlbGVjdF9vcHRpb24iLCJpZE9wdGlvbiIsInN0eWxlIiwidmlzaWJpbGl0eSIsImRpc3BsYXkiLCJvblNlYXJjaENoYW5nZVF1ZSIsInNlYXJjaCIsInNlYXJjaF9zdHIiLCJ2YWx1ZSIsInRyaW0iLCJzZWFyY2hRdWVFc3R1ZGlhciIsInRoZW4iLCJyZXNwb25zZSIsImRhdGEiLCJoaWRlU2VhcmNoUXVlUmVzdWx0cyIsInNlbGVjdFF1ZUVzdHVkaWFySXRlbSIsImN1cnNvIiwibm9tYnJlIiwibGlzdEFsbFF1ZUVzdHVkaWFyIiwib25TZWFyY2hDaGFuZ2VEb25kZSIsInNlYXJjaERvbmRlRXN0dWRpYXIiLCJoaWRlU2VhcmNoRG9uZGVSZXN1bHRzIiwic2VsZWN0RG9uZGVFc3R1ZGlhckl0ZW0iLCJsb2NfZGVwIiwiZWRpdFNlYXJjaCIsInByZXZpb3VzIiwibmV4dCIsInNsaWRlSGFzQ2hhbmdlZCIsImluZGV4IiwidXBkYXRlRmlsdGVycyIsImZpbHRlcnMiLCJnZXRFc3RhYmxlY2ltaWVudG9zQnlGaWx0ZXJzIiwiY29uc29sZSIsImxvZyIsImxhc3RTZWFyY2hSZXNwb25zZUVzdGFibGVjaW1pZW50b3MiLCJ1cGRhdGVNYXBQaW5zIiwibGF0IiwibG9uIiwiZ2VvbG9jYXRlIiwicG9zT3B0aW9ucyIsInRpbWVvdXQiLCJlbmFibGVIaWdoQWNjdXJhY3kiLCJnZXRDdXJyZW50UG9zaXRpb24iLCJwb3NpdGlvbiIsInNhdmVfaW5pdGlhbF9wb3NpdGlvbiIsImdvIiwiZXJyIiwiZ29fdG9fZm9ybSIsIl8iLCJsZWFmbGV0RGF0YSIsIkNvbmZpZ1NlcnZpY2UiLCJQaW5TZXJ2aWNlIiwiJGludGVydmFsIiwiJGxvY2F0aW9uIiwiTWFwU2VydmljZSIsIk1vZGFsU2VydmljZSIsImJhc2VVUkwiLCJBcHBOYW1lIiwib25lX3ZhbHVlX3BvcHVwIiwibXlJbnRlcnZhbHMiLCJBcnJheSIsIiRvbiIsImNoZWNrTm9Nb2RhbElzT3BlbiIsIm1hcFNjb3BlIiwiY3JlYXRlX29ubGluZV9tYXAiLCJmaWx0ZXJzVXBkYXRlZCIsImxvYWRQaW5zTGF5ZXIiLCJtYXAiLCJkZWZhdWx0cyIsInRpbGVMYXllciIsIm1pblpvb20iLCJtYXhab29tIiwiem9vbUNvbnRyb2xQb3NpdGlvbiIsIm1hcmtlcnMiLCJldmVudHMiLCJlbmFibGUiLCJsb2dpYyIsImNlbnRlciIsImxuZyIsInpvb20iLCJsb2NhdGUiLCJjb29yZHMiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsIm5vdyIsIm1lc3NhZ2UiLCJmb2N1cyIsImRyYWdnYWJsZSIsImhpZGVPZmZTY3JlZW5QaW5zIiwiZ2V0TWFwIiwiZm9yRWFjaCIsImZlYXR1cmUiLCJtYXJrZXIiLCJMIiwiYmluZFBvcHVwIiwib3BlblBvcHVwIiwiYWRkVG8iLCJmYWN0b3J5IiwiJGh0dHAiLCJBcGlPYmplY3QiLCJfZGF0YSIsImV4dGVuZCIsInRoaXMiLCJhcGlVUkwiLCJzdHIiLCJnZXQiLCJwYXJhbXMiLCJoYXNoX2lkIiwiTWF0aCIsInJhbmRvbSIsImZvcm1TY29wZSIsImZpbHRlcnNPYmplY3QiLCJjcmVhdGVGaWx0ZXJQYXJhbXNGb3JHZXRSZXF1ZXN0IiwicXVlRXN0dWRpYXJJZCIsInF1ZUVzdHVkaWFyTm9tYnJlIiwicXVlRXN0dWRpYXJUYWdVbm8iLCJ0YWciLCJxdWVFc3R1ZGlhclRhZ0RvcyIsImRvbmRlRXN0dWRpYXJEZXBhcnRhbWVudG8iLCJkZXBhcnRhbWVudG8iLCJkb25kZUVzdHVkaWFyTG9jYWxpZGFkIiwibG9jYWxpZGFkIiwiZG9uZGVFc3R1ZGlhckxhdCIsImNvb3JkZW5hZGFzIiwiZG9uZGVFc3R1ZGlhckxvbiIsInBhcmFtZXRlcnMiLCIkY29yZG92YUZpbGVUcmFuc2ZlciIsIlZhbGlkYXRpb25TZXJ2aWNlIiwibG9nX2luIiwidXNlciIsInBhc3N3b3JkIiwiYm9keSIsInBvc3QiLCJ3aXRoQ3JlZGVudGlhbHMiLCJoZWFkZXJzIiwiQ29udGVudC1UeXBlIiwic2lnbl9vdXQiLCJlbWFpbCIsInBhc3N3b3JkX3NpZ25faW4iLCJjcmVhdGVfdXNlciIsInVzZXJPYmoiLCJwaWN0dXJlX3VybCIsImlzTW9iaWxlRGV2aWNlIiwib3B0aW9ucyIsImZpbGVLZXkiLCJ1c2VybmFtZSIsImdlbmRlciIsImludGVyZXN0ZWQiLCJzdGF0dXMiLCJzaG93X2xvY2F0aW9uIiwidHJ1c3RBbGxIb3N0cyIsInVwbG9hZCIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJ1bmRlZmluZWQiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiaWRlbnRpdHkiLCJwYXNzd29yZF9yZWNvdmVyeSIsImxvZ2luX2VtYWlsIiwicGFzc3dvcmRfY2hhbmdlIiwib2xkUGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsImNvbmZpcm1QYXNzd29yZCIsImVkaXRfdXNlciIsIkNvbmZpZ09iaiIsImlzV2ViVmlldyIsIiRjb3Jkb3ZhTmV0d29yayIsImlzT25saW5lIiwiaXNPZmZsaW5lIiwiJHEiLCJzYXZlVXNlciIsInVzZXJfbmFtZSIsInVzZXJfcGFzc3dvcmQiLCJ1c2VyX3BpY3R1cmVfdXJsIiwidWlkIiwiX2lkIiwibmFtZSIsImdldFVzZXIiLCJkb2MiLCJfcmV2IiwiX2RiIiwicHV0IiwiZXJhc2VVc2VyIiwicmVtb3ZlIiwiaW5pdERCIiwiUG91Y2hEQiIsInNhdmVSZXBvcnQiLCJyZXBvcnQiLCJkYXRlIiwiRGF0ZSIsIm5ld19yZXBvcnRfaWQiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldE1pbGxpc2Vjb25kcyIsInVwZGF0ZVJlcG9ydCIsImdldENhdGVnb3JpZXMiLCJzYXZlQ2F0ZWdvcmllcyIsImNhdGVnb3JpZXMiLCJnZXRSZXBvcnQiLCJyZXBvcnRJZCIsImdldEFsbFJlcG9ydHMiLCJhbGxEb2NzIiwiaW5jbHVkZV9kb2NzIiwiYXR0YWNobWVudHMiLCJzdGFydGtleSIsImVuZGtleSIsImRlbGV0ZVJlcG9ydCIsInJlcG9ydF9pZCIsImRlbGV0ZUdpdmVuUmVwb3J0IiwiZ2V0QWxsRHJpbmtzQXZhaWxhYmxlIiwiZ2V0QWxsSW52aXRhdGlvbnNXaXRoVXNlciIsImRlc3RpbmF0aW9uX3VpZCIsImF1dGhvcl91aWQiLCJzZW5kRHJpbmtJbnZpdGF0aW9uVG9Vc2VyIiwiZHJpbmtfbmlkIiwic2VuZERyaW5rSW52aXRhdGlvblJlc3BvbnNlIiwiaW52aXRhdGlvbl9uaWQiLCJodHRwX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWwiLCJqc29uUmVzdWx0IiwiZXJyb3JDb250YWluZXJJZCIsImVycm9yRGl2IiwiU3RhdHVzIiwiaW5uZXJIVE1MIiwiTWVzc2FnZSIsImh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bF9hamF4IiwicmVzdWx0IiwiaHR0cF9yZXNwb25zZV9pc19zdWNjZXNzZnVsX3BvcHVwIiwiYWxlcnRQb3B1cCIsImFsZXJ0IiwidGl0bGUiLCJ0ZW1wbGF0ZSIsInJlcyIsImh0dHBfZGF0YV9yZXNwb25zZV9pc19zdWNjZXNzZnVsIiwiaHR0cF9kYXRhX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWxfYWpheCIsInNob3dfZXJyb3JfbWVzc2FnZSIsInNob3dfZXJyb3JfbWVzc2FnZV9wb3B1cCIsImNoZWNrX2ZpZWxkcyIsImZpZWxkcyIsImVycm9ycyIsImZpZWxkIiwidHlwZSIsInZhbGlkYXRlX25vdF9lbXB0eSIsInZhbGlkYXRlX2VtYWlsIiwidmFsaWRhdGVfaWRkb2NfdXkiLCJ2YWxpZGF0ZV90d29fd29yZHMiLCJ2YWxpZGF0ZV9lcXVhbHNUbyIsInNlY29uZFZhbHVlIiwiJGlvbmljTG9hZGluZyIsIiR0aW1lb3V0IiwiTE9BREVSQVBJIiwic2hvd0xvYWRpbmciLCJ0ZXh0Iiwic2hvdyIsImhpZGVMb2FkaW5nIiwiaGlkZSIsInRvZ2dsZUxvYWRpbmdXaXRoTWVzc2FnZSIsInNlbGYiLCJjb25maXJtUG9wdXAiLCJjb25maXJtIiwic2hvd0FsZXJ0IiwiX3RpdGxlIiwiX3RlbXBsYXRlIiwibG9jYXRpb25zT2JqIiwiaW5pdGlhbF9sYXQiLCJpbml0aWFsX2xuZyIsImxhc3RfdXNlcl9sYXQiLCJsYXN0X3VzZXJfbG5nIiwiY291bmNpbF9tb2RhbCIsInNlbGVjdGVkX2NvdW5jaWwiLCJzZWxlY3RDb3VuY2lsIiwiY291bmNpbE5hbWUiLCJzYXZlX2xhc3RfdXNlcl9wb3NpdGlvbiIsInNhdmVkTG9jYXRpb25zIiwiJGNvbXBpbGUiLCJwcm9qNCIsImRlZnMiLCJtYXBTZXJ2aWNlIiwiZ29Ub1BsYWNlIiwic2NvcGUiLCJfZ2VvSnNvbiIsImNycyIsInByb3BlcnRpZXMiLCJmZWF0dXJlcyIsImdlb21ldHJ5IiwiY29vcmRpbmF0ZXMiLCJfbGF0bG5nIiwibGF5ZXIiLCJQcm9qIiwiZ2VvSnNvbiIsInBvaW50VG9MYXllciIsImxhdGxuZyIsImh0bWxQb3BVcCIsImNvbXBpbGVkIiwic2V0VmlldyIsImNlbnRlck1hcE9uQ29vcmRzIiwiTGF0TG5nIiwiZ2V0QWxsTWVzc2FnZXNUb1VzZXIiLCJnZXRVc2VySW5mbyIsInNlbmRUZXh0TWVzc2FnZVRvVXNlciIsImNoZWNrV2hvQ2FuVGFsayIsImNhblRhbGtUb1VzZXJzIiwiY3VycmVudCIsImJ1aWxkIiwibW9kYWxPQkoiLCJhY3RpdmVNb2RhbCIsImdldFVucmVjaXZlZE5vdGlmaWNhdGlvbnMiLCJkb250U2hvd05vdGlmaWNhdGlvbkFnYWluIiwibmlkIiwiUGluIiwicGluc1VSTCIsImdldEFsbCIsInNlbmRVc2VyTG9jYXRpb24iLCJfYWxsIiwibGFzdFBpbnNSZXNwb25zZSIsInByb3RvdHlwZSIsInNldExhdExuZyIsInNob3dfYWxlcnQiLCJhbGVydF90aXRsZSIsImFsZXJ0X21lc3NhZ2UiLCJhc2tGb3JPbmVWYWx1ZVBvcFVwIiwiZmllbGRfbmFtZSIsInZhbGlkYXRpb25UeXBlIiwibXlQb3B1cCIsInN1YlRpdGxlIiwiYnV0dG9ucyIsIm9uVGFwIiwiZSIsInByZXZlbnREZWZhdWx0Iiwic2VtYXBob3JlT2JqIiwic2VtYXBob3JlcyIsInRha2VJZkF2YWlsYWJsZSIsInNlbWFwaG9yZUlkIiwibWFrZUF2YWlsYWJsZUFnYWluIiwiQXBpSW1FbmRwb2ludCIsIkFwaURhdGFFbmRwb2ludCIsInJlc3RQcmVmZml4IiwibG9jYXRpb25BUEkiLCJzZWFyY2hMb2NhdGlvbkJ5U3RyIiwiX2xvY2F0aW9uIiwibWV0aG9kIiwic2VhcmNoRXNxdWluYUJ5U3RyIiwiY2FsbGUiLCJlc3F1aW5hIiwiZ2V0TG9jYXRpb25HZW9tIiwiZ2V0UGFyYW1QYXRoQnlUaXBvIiwidGlwbyIsInBhdGhQYXJhbXMiLCJnZXRMb2NhdGlvbkdlb21QTUIiLCJlc3F1aW5hX251bWVybyIsIl90aXBvIiwicmVzdEdlb0RhdGFTZXJ2aWNlUGF0aCIsIkVTUVVJTkEiLCJESVJFQ0NJT04iLCJVc2VyT2JqIiwic2F2ZV91c2VyX2RhdGEiLCJlcmFzZV91c2VyX2RhdGEiLCJpZGVudGl0eV9kb2N1bWVudCIsInBob25lIiwiZ2V0X3VzZXJfZGF0YSIsImFkZF9waG90byIsImlzTG9nZ2VkIiwidmFsdWVzIiwic3BsaXQiLCJmaWx0ZXIiLCJ2IiwicmUiLCJ0ZXN0IiwicmVwbGFjZSIsImRpZyIsImEiLCJwYXJzZUludCJdLCJtYXBwaW5ncyI6IkFBT0EsR0FBSUEsU0FDRkMsWUFBYUMsUUFBUUMsT0FBTyx5QkFDNUJDLFNBQVVGLFFBQVFDLE9BQU8sc0JBRzNCSCxRQUFPSyxJQUFNSCxRQUFRQyxPQUFPLFVBQVcsUUFBUSxlQUFlLG1CQUFtQixvQkFBcUIscUJBQXNCLGtCQUFtQixjQUU5SUcsU0FBUyxpQkFDUkMsSUFBSyxpQ0FHTkQsU0FBUyxtQkFDUkMsSUFBSyw2Q0FJTkMsS0FBQSxpQkFBQSxhQUFBLG1CQUFJLFNBQVNDLEVBQWdCQyxFQUFZQyxHQUN4Q0QsRUFBV0UsUUFBVUMsT0FBT0QsUUFDNUJILEVBQWVLLE1BQU0sV0FHZkQsT0FBT0UsU0FBV0YsT0FBT0UsUUFBUUMsUUFBUUMsV0FDM0NGLFFBQVFDLFFBQVFDLFNBQVNDLDBCQUF5QixHQUNsREgsUUFBUUMsUUFBUUMsU0FBU0UsZUFBYyxJQUl6Q0MsTUFBTUMsU0FBU0MsY0FBZSxFQUMxQlQsT0FBT1UsV0FFVEEsVUFBVUMsb0JBS2ZDLFFBQUEs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R0FBT2xYLE9BQVMsRUFRcEIsT0FBTyxHQUliOFAsa0JBQW1CLFNBQVUvTyxFQUFNZ1AsR0FDakMsTUFBR2hQLElBQU9nUCxHQU9aSixlQUFnQixTQUFVNU8sR0FDdEIsR0FBVSxNQUFQQSxHQUFzQixhQUFQQSxHQUE2QixJQUFQQSxFQUFVLENBQ2hELEdBQUl1VyxHQUFLLHdKQUNULE9BQU9BLEdBQUdDLEtBQUt4VyxHQUVmLE9BQU8sR0FJYjZPLGtCQUFtQixTQUFVN08sR0FDM0IsR0FBVSxNQUFQQSxHQUFzQixhQUFQQSxHQUE2QixJQUFQQSxFQUFVLENBQzlDQSxFQUFRQSxFQUFNeVcsUUFBUSxNQUFPLEdBQzdCLElBQUlDLEdBQU0xVyxFQUFNQSxFQUFNZixPQUFTLEdBQzNCMFgsRUFBSSxFQUFPOVgsRUFBSSxDQUNuQixJQUFHbUIsRUFBTWYsUUFBVSxFQUNqQixJQUFJSixFQUFJbUIsRUFBTWYsT0FBUUosRUFBSSxFQUFHQSxJQUMzQm1CLEVBQVEsSUFBTUEsQ0FHbEIsS0FBSW5CLEVBQUksRUFBR0EsRUFBSSxFQUFHQSxJQUNoQjhYLEdBQU1DLFNBQVMsVUFBVS9YLElBQU0rWCxTQUFTNVcsRUFBTW5CLElBQU8sRUFFdkQsSUFBSThPLEVBTUosT0FKRUEsR0FEQ2dKLEVBQUUsS0FBTyxFQUNELEVBRUEsR0FBS0EsRUFBSSxHQUVqQkQsR0FBTy9JLEVBTVosT0FBTyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJb25pYyBTdGFydGVyIEFwcFxuXG4vLyBhbmd1bGFyLm1vZHVsZSBpcyBhIGdsb2JhbCBwbGFjZSBmb3IgY3JlYXRpbmcsIHJlZ2lzdGVyaW5nIGFuZCByZXRyaWV2aW5nIEFuZ3VsYXIgbW9kdWxlc1xuLy8gJ3BtYl9pbScgaXMgdGhlIG5hbWUgb2YgdGhpcyBhbmd1bGFyIG1vZHVsZSBleGFtcGxlIChhbHNvIHNldCBpbiBhIDxib2R5PiBhdHRyaWJ1dGUgaW4gaW5kZXguaHRtbClcbi8vIHRoZSAybmQgcGFyYW1ldGVyIGlzIGFuIGFycmF5IG9mICdyZXF1aXJlcydcbi8vICdzdGFydGVyLnNlcnZpY2VzJyBpcyBmb3VuZCBpbiBzZXJ2aWNlcy5qc1xuLy8gJ3N0YXJ0ZXIuY29udHJvbGxlcnMnIGlzIGZvdW5kIGluIGNvbnRyb2xsZXJzLmpzXG52YXIgcG1iX2ltID0ge1xuICBjb250cm9sbGVyczogYW5ndWxhci5tb2R1bGUoJ3BtYl9pbS5jb250cm9sbGVycycsIFtdKSxcbiAgc2VydmljZXM6IGFuZ3VsYXIubW9kdWxlKCdwbWJfaW0uc2VydmljZXMnLCBbXSlcbn07XG5cbnBtYl9pbS5hcHAgPSBhbmd1bGFyLm1vZHVsZSgncG1iX2ltJywgWydpb25pYycsJ2lvbmljLndpemFyZCcsJ2lvbi1hdXRvY29tcGxldGUnLCdsZWFmbGV0LWRpcmVjdGl2ZScsICdwbWJfaW0uY29udHJvbGxlcnMnLCAncG1iX2ltLnNlcnZpY2VzJywgJ25nQ29yZG92YSddKVxuXG4uY29uc3RhbnQoJ0FwaUltRW5kcG9pbnQnLCB7XG4gIHVybDogJ2h0dHA6Ly93d3cubW9udGV2aWRlby5ndWIudXknXG59KVxuXG4uY29uc3RhbnQoJ0FwaURhdGFFbmRwb2ludCcsIHtcbiAgdXJsOiAnaHR0cDovL2JhY2tlbmQuZWR1Y2FjaW9uLnRob3IuZGF0YXV5Lm9yZydcbn0pXG5cblxuLnJ1bihmdW5jdGlvbigkaW9uaWNQbGF0Zm9ybSwgJHJvb3RTY29wZSwgJGNvcmRvdmFLZXlib2FyZCkge1xuICAkcm9vdFNjb3BlLlZFUlNJT04gPSB3aW5kb3cuVkVSU0lPTjtcbiAgJGlvbmljUGxhdGZvcm0ucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgLy8gSGlkZSB0aGUgYWNjZXNzb3J5IGJhciBieSBkZWZhdWx0IChyZW1vdmUgdGhpcyB0byBzaG93IHRoZSBhY2Nlc3NvcnkgYmFyIGFib3ZlIHRoZSBrZXlib2FyZFxuICAgIC8vIGZvciBmb3JtIGlucHV0cylcbiAgICBpZiAod2luZG93LmNvcmRvdmEgJiYgd2luZG93LmNvcmRvdmEucGx1Z2lucy5LZXlib2FyZCkge1xuICAgICAgY29yZG92YS5wbHVnaW5zLktleWJvYXJkLmhpZGVLZXlib2FyZEFjY2Vzc29yeUJhcihmYWxzZSk7XG4gICAgICBjb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQuZGlzYWJsZVNjcm9sbChmYWxzZSk7XG4gICAgfVxuICAgIC8vJGNvcmRvdmFLZXlib2FyZC5oaWRlQWNjZXNzb3J5QmFyKGZhbHNlKVxuICAgIC8vJGNvcmRvdmFLZXlib2FyZC5kaXNhYmxlU2Nyb2xsKGZhbHNlKVxuICAgIGlvbmljLlBsYXRmb3JtLmlzRnVsbFNjcmVlbiA9IHRydWU7XG4gICAgaWYgKHdpbmRvdy5TdGF0dXNCYXIpIHtcbiAgICAgIC8vIG9yZy5hcGFjaGUuY29yZG92YS5zdGF0dXNiYXIgcmVxdWlyZWRcbiAgICAgIFN0YXR1c0Jhci5zdHlsZURlZmF1bHQoKTtcbiAgICB9XG4gIH0pO1xufSlcblxuLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkY29tcGlsZVByb3ZpZGVyLCAkaW9uaWNDb25maWdQcm92aWRlcikge1xuICAkY29tcGlsZVByb3ZpZGVyLmRlYnVnSW5mb0VuYWJsZWQoZmFsc2UpO1xuICAvLyRpb25pY0NvbmZpZ1Byb3ZpZGVyLnNjcm9sbGluZy5qc1Njcm9sbGluZyh0cnVlKTtcblxuICAvLyBJb25pYyB1c2VzIEFuZ3VsYXJVSSBSb3V0ZXIgd2hpY2ggdXNlcyB0aGUgY29uY2VwdCBvZiBzdGF0ZXNcbiAgLy8gTGVhcm4gbW9yZSBoZXJlOiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci11aS91aS1yb3V0ZXJcbiAgLy8gU2V0IHVwIHRoZSB2YXJpb3VzIHN0YXRlcyB3aGljaCB0aGUgYXBwIGNhbiBiZSBpbi5cbiAgLy8gRWFjaCBzdGF0ZSdzIGNvbnRyb2xsZXIgY2FuIGJlIGZvdW5kIGluIGNvbnRyb2xsZXJzLmpzXG4gICRzdGF0ZVByb3ZpZGVyXG5cbi5zdGF0ZSgnYXBwJywge1xuICAgIGNhY2hlOiBmYWxzZSxcbiAgICB1cmw6IFwiL2FwcFwiLFxuICAgIGFic3RyYWN0OiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiBcInRlbXBsYXRlcy9tZW51Lmh0bWxcIixcbiAgICBjb250cm9sbGVyOiAnQWJzQ29udHJvbGxlcidcbiAgfSlcblxuLnN0YXRlKCdhcHAuZm9ybScsIHtcbiAgY2FjaGU6IGZhbHNlLFxuICB1cmw6IFwiL2Zvcm1cIixcbiAgdmlld3M6IHtcbiAgICAnbWVudUNvbnRlbnQnIDp7XG4gICAgICB0ZW1wbGF0ZVVybDogXCJ0ZW1wbGF0ZXMvZm9ybS5odG1sXCIsXG4gICAgICBjb250cm9sbGVyIDogXCJGb3JtQ3RybFwiXG4gICAgfSxcbiAgICAnbWFwVmlldycgOntcbiAgICAgIHRlbXBsYXRlVXJsOiBcInRlbXBsYXRlcy9tYXAuaHRtbFwiLFxuICAgICAgY29udHJvbGxlciA6IFwiTWFwQ29udHJvbGxlclwiXG4gICAgfVxuICB9XG59KVxuXG4uc3RhdGUoJ2FwcC5pbnRybycsIHtcbiAgY2FjaGU6IGZhbHNlLFxuICB1cmw6IFwiL2ludHJvXCIsXG4gIHZpZXdzOiB7XG4gICAgJ21lbnVDb250ZW50JyA6e1xuICAgICAgdGVtcGxhdGVVcmw6IFwidGVtcGxhdGVzL2ludHJvLmh0bWxcIixcbiAgICAgIGNvbnRyb2xsZXIgOiBcIkludHJvQ3RybFwiXG4gICAgfVxuICB9XG59KVxuXG4vLyBpZiBub25lIG9mIHRoZSBhYm92ZSBzdGF0ZXMgYXJlIG1hdGNoZWQsIHVzZSB0aGlzIGFzIHRoZSBmYWxsYmFja1xuJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL2FwcC9pbnRybycpO1xuXG59KTtcbiIsInBtYl9pbS5jb250cm9sbGVycy5jb250cm9sbGVyKCdBYnNDb250cm9sbGVyJyxcblsnJHNjb3BlJyxcbmZ1bmN0aW9uKCRzY29wZSkge1xuXG59XSk7XG4iLCJwbWJfaW0uY29udHJvbGxlcnMuY29udHJvbGxlcignRm9ybUN0cmwnLCBbJyRzY29wZScsICckc3RhdGUnLFxuICAnJGNvcmRvdmFHZW9sb2NhdGlvbicsXG4gICckc3RhdGVQYXJhbXMnLFxuICAnJGlvbmljUGxhdGZvcm0nLFxuICAnJGlvbmljUG9wdXAnLFxuICAnTG9jYXRpb25zU2VydmljZScsXG4gICdBcGlTZXJ2aWNlJyxcbiAgJ0RCU2VydmljZScsXG4gICckaW9uaWNTbGlkZUJveERlbGVnYXRlJyxcbiAgJyRpb25pY1Njcm9sbERlbGVnYXRlJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsICRjb3Jkb3ZhR2VvbG9jYXRpb24sICRzdGF0ZVBhcmFtcywgJGlvbmljUGxhdGZvcm0sICRpb25pY1BvcHVwLCBMb2NhdGlvbnNTZXJ2aWNlLCBBcGlTZXJ2aWNlLCBEQlNlcnZpY2UsICRpb25pY1NsaWRlQm94RGVsZWdhdGUsXG4gICRpb25pY1Njcm9sbERlbGVnYXRlKSB7XG5cbiAgICAkc2NvcGUuZm9ybSA9IHt9O1xuICAgICRzY29wZS5mb3JtLmVkYWQgPSAxNjtcbiAgICAkc2NvcGUuZm9ybS51bHRpbW9fbml2ZWxfYXByb2JhZG8gPSBcInByaW1hcmlhXCI7XG4gICAgJHNjb3BlLmZvcm0udWx0aW1vX2FuaW9fYXByb2JhZG8gPSBcIlwiO1xuICAgICRzY29wZS5mb3JtLnBsYW4gPSBcIlwiO1xuICAgICRzY29wZS5mb3JtLmx1Z2FyID0gXCJcIjtcbiAgICAkc2NvcGUuZm9ybS5xdWUgPSBcIlwiO1xuICAgICRzY29wZS5mb3JtLmRvbmRlID0gXCJcIjtcbiAgICAkc2NvcGUuZm9ybS50dXJubyA9IFwibWF0dXRpbm9cIjtcbiAgICAkc2NvcGUuZm9ybS5TZWFyY2hRdWVSZXN1bHRzID0ge307XG4gICAgJHNjb3BlLmZvcm0uU2VhcmNoRG9uZGVSZXN1bHRzID0ge307XG4gICAgJHNjb3BlLmZvcm0uc2VhcmNoUXVlID0gXCJcIjtcbiAgICAkc2NvcGUuZm9ybS5zZWFyY2hEb25kZSA9IFwiXCI7XG4gICAgJHNjb3BlLmZvcm0ub3B0aW9uID0gXCJsaXN0XCI7XG4gICAgJHNjb3BlLmVzdGFibGVjaW1pZW50b3MgPSBudWxsO1xuXG4gICAgJHNjb3BlLnJlc3RhckVkYWQgPSBmdW5jdGlvbigpe1xuICAgICAgaWYoJHNjb3BlLmZvcm0uZWRhZCA+IDQpe1xuICAgICAgICAkc2NvcGUuZm9ybS5lZGFkID0gJHNjb3BlLmZvcm0uZWRhZCAtIDE7XG4gICAgICB9XG4gICAgfTtcblxuICAgICRzY29wZS5zdW1hckVkYWQgPSBmdW5jdGlvbigpe1xuICAgICAgJHNjb3BlLmZvcm0uZWRhZCA9ICRzY29wZS5mb3JtLmVkYWQgKyAxO1xuICAgIH07XG5cbiAgICAkc2NvcGUuc2VsZWN0VWx0aW1vTml2ZWwgPSBmdW5jdGlvbihpZE5pdmVsKXtcbiAgICAgIHZhciB4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm5pdmVsXCIpO1xuICAgICAgdmFyIGk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHhbaV0uY2xhc3NOYW1lID0gXCJuaXZlbF9cIit4W2ldLmlkICtcIiBuaXZlbCBoaWRkZW5cIjtcbiAgICAgIH1cbiAgICAgIHZhciBzZWxlY3RlZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkTml2ZWwpO1xuICAgICAgc2VsZWN0ZWQuY2xhc3NOYW1lID0gXCJuaXZlbF9cIitzZWxlY3RlZC5pZCArXCIgbml2ZWxcIjtcbiAgICAgICRzY29wZS5mb3JtLnVsdGltb19uaXZlbF9hcHJvYmFkbyA9IGlkTml2ZWw7XG4gICAgfVxuXG4gICAgJHNjb3BlLnNlbGVjdF90dXJubyA9IGZ1bmN0aW9uKGlkVHVybm8pe1xuICAgICAgdmFyIHggPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidHVybm9zXCIpO1xuICAgICAgdmFyIGk7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHhbaV0uY2xhc3NOYW1lID0gXCJ0dXJub3MgdHVybm9fXCIrIHhbaV0uaWQgK1wiX29mZlwiO1xuICAgICAgfVxuICAgICAgdmFyIHNlbGVjdGVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWRUdXJubyk7XG4gICAgICBzZWxlY3RlZC5jbGFzc05hbWUgPSBcInR1cm5vcyB0dXJub19cIisgaWRUdXJubztcbiAgICAgICRzY29wZS5mb3JtLnR1cm5vID0gaWRUdXJubztcbiAgICB9XG5cbiAgICAkc2NvcGUuc2VsZWN0X29wdGlvbiA9IGZ1bmN0aW9uKGlkT3B0aW9uKXtcbiAgICAgIHZhciB4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm9wdGlvbnNcIik7XG4gICAgICB2YXIgaTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgeFtpXS5jbGFzc05hbWUgPSBcIm9wdGlvbnMgb3B0aW9uX1wiKyB4W2ldLmlkICtcIl9vZmZcIjtcbiAgICAgIH1cbiAgICAgIHZhciBzZWxlY3RlZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkT3B0aW9uKTtcbiAgICAgIHNlbGVjdGVkLmNsYXNzTmFtZSA9IFwib3B0aW9ucyBvcHRpb25fXCIrIGlkT3B0aW9uO1xuICAgICAgJHNjb3BlLmZvcm0ub3B0aW9uID0gaWRPcHRpb247XG4gICAgICBpZihpZE9wdGlvbj09XCJtYXBcIil7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwX2NvbnRhaW5lclwiKS5zdHlsZS52aXNpYmlsaXR5PVwidmlzaWJsZVwiO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxpc3RfY29udGFpbmVyXCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XG4gICAgICB9XG4gICAgICBpZihpZE9wdGlvbj09XCJsaXN0XCIpe1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxpc3RfY29udGFpbmVyXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcF9jb250YWluZXJcIikuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiO1xuICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5vblNlYXJjaENoYW5nZVF1ZSA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgc2VhcmNoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJxdWVfZXN0dWRpYXJcIik7XG4gICAgICB2YXIgc2VhcmNoX3N0ciA9IHNlYXJjaC52YWx1ZS50cmltKCk7XG4gICAgICBpZihzZWFyY2hfc3RyLmxlbmd0aD49Myl7XG4gICAgICAgIEFwaVNlcnZpY2Uuc2VhcmNoUXVlRXN0dWRpYXIoc2VhcmNoX3N0cikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAkc2NvcGUuZm9ybS5TZWFyY2hRdWVSZXN1bHRzID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIlNlYXJjaFF1ZVJlc3VsdHNcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgfSk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgJHNjb3BlLmhpZGVTZWFyY2hRdWVSZXN1bHRzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLmhpZGVTZWFyY2hRdWVSZXN1bHRzID0gZnVuY3Rpb24oKXtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiU2VhcmNoUXVlUmVzdWx0c1wiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuXG4gICAgJHNjb3BlLnNlbGVjdFF1ZUVzdHVkaWFySXRlbSA9IGZ1bmN0aW9uKGN1cnNvKXtcbiAgICAgICRzY29wZS5mb3JtLnF1ZSA9IGN1cnNvO1xuICAgICAgJHNjb3BlLmhpZGVTZWFyY2hRdWVSZXN1bHRzKCk7XG4gICAgICAkc2NvcGUuZm9ybS5zZWFyY2hRdWUgPSBjdXJzby5ub21icmU7XG4gICAgfVxuXG4gICAgJHNjb3BlLmxpc3RBbGxRdWVFc3R1ZGlhciA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgc2VhcmNoX3N0ciA9IFwiYXBpLWdldC1hbGxcIjtcbiAgICAgICAgQXBpU2VydmljZS5zZWFyY2hRdWVFc3R1ZGlhcihzZWFyY2hfc3RyKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICRzY29wZS5mb3JtLlNlYXJjaFF1ZVJlc3VsdHMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiU2VhcmNoUXVlUmVzdWx0c1wiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUub25TZWFyY2hDaGFuZ2VEb25kZSA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgc2VhcmNoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkb25kZV9lc3R1ZGlhclwiKTtcbiAgICAgIHZhciBzZWFyY2hfc3RyID0gc2VhcmNoLnZhbHVlLnRyaW0oKTtcbiAgICAgIGlmKHNlYXJjaF9zdHIubGVuZ3RoPj0zKXtcbiAgICAgICAgQXBpU2VydmljZS5zZWFyY2hEb25kZUVzdHVkaWFyKHNlYXJjaF9zdHIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgJHNjb3BlLmZvcm0uU2VhcmNoRG9uZGVSZXN1bHRzID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIlNlYXJjaERvbmRlUmVzdWx0c1wiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICB9KTtcbiAgICAgIH1lbHNle1xuICAgICAgICAkc2NvcGUuaGlkZVNlYXJjaERvbmRlUmVzdWx0cygpO1xuICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5oaWRlU2VhcmNoRG9uZGVSZXN1bHRzID0gZnVuY3Rpb24oKXtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiU2VhcmNoRG9uZGVSZXN1bHRzXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG5cbiAgICAkc2NvcGUuc2VsZWN0RG9uZGVFc3R1ZGlhckl0ZW0gPSBmdW5jdGlvbihkb25kZSl7XG4gICAgICAkc2NvcGUuZm9ybS5kb25kZSA9IGRvbmRlO1xuICAgICAgJHNjb3BlLmhpZGVTZWFyY2hEb25kZVJlc3VsdHMoKTtcbiAgICAgICRzY29wZS5mb3JtLnNlYXJjaERvbmRlID0gZG9uZGUubG9jX2RlcDtcbiAgICB9XG5cbiAgICAkc2NvcGUuZWRpdFNlYXJjaCA9IGZ1bmN0aW9uKCl7XG4gICAgICAkaW9uaWNTbGlkZUJveERlbGVnYXRlLnByZXZpb3VzKCk7XG4gICAgICAkaW9uaWNTbGlkZUJveERlbGVnYXRlLnByZXZpb3VzKCk7XG4gICAgfVxuXG5cdCAgJHNjb3BlLm5leHQgPSBmdW5jdGlvbigpIHtcblx0ICAgICRpb25pY1NsaWRlQm94RGVsZWdhdGUubmV4dCgpO1xuXHQgIH07XG5cblx0ICAkc2NvcGUucHJldmlvdXMgPSBmdW5jdGlvbigpIHtcblx0ICAgICRpb25pY1NsaWRlQm94RGVsZWdhdGUucHJldmlvdXMoKTtcblx0ICB9O1xuXG4gICAgJHNjb3BlLnNsaWRlSGFzQ2hhbmdlZCA9IGZ1bmN0aW9uKGluZGV4KXtcbiAgICAgICRzY29wZS5zZWxlY3Rfb3B0aW9uKFwibGlzdFwiKTtcbiAgICAgIGlmKGluZGV4PT0yKXtcbiAgICAgICAgLy9pbmRleCAyIGVzIGVsIHNsaWRlIHF1ZSB0aWVuZSBlbCBib3TDs24gZGVsIG1hcGEgeSBkZSBlbCBsaXN0YWRvXG4gICAgICAgIEFwaVNlcnZpY2UudXBkYXRlRmlsdGVycygkc2NvcGUuZm9ybSk7XG4gICAgICAgIGlmKEFwaVNlcnZpY2UuZmlsdGVycyE9bnVsbCl7XG4gICAgICAgICAgICBBcGlTZXJ2aWNlLmdldEVzdGFibGVjaW1pZW50b3NCeUZpbHRlcnMoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgIEFwaVNlcnZpY2UubGFzdFNlYXJjaFJlc3BvbnNlRXN0YWJsZWNpbWllbnRvcyA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAvL0VMIFNFUlZJQ0lPIERFIExBIEFQSSBBQ1RVQUxJWkEgQUwgQ09OVFJPTEFET1IgREVMIE1BUEFcbiAgICAgICAgICAgICAgJHNjb3BlLmVzdGFibGVjaW1pZW50b3MgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgQXBpU2VydmljZS51cGRhdGVNYXBQaW5zKCRzY29wZS5lc3RhYmxlY2ltaWVudG9zKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYoJHNjb3BlLmVzdGFibGVjaW1pZW50b3M9PW51bGwpe1xuICAgICAgICAgICAgICAvL0VTVE8gU0UgUFJFQ0FSR0EgUEFSQSBMQSBSRVVOSU9OIENPTiBST01BTk8gRU4gQ0FTTyBERSBRVUUgTk8gRVNURSBMQSBBUEkgUVVFIFJFQ0lCRSBMT1MgRklMVFJPUyBZIERFVlVFTFZFIExPUyBFU1RBQkxFQ0lNSUVOVE9TXG4gICAgICAgICAgICAgICAkc2NvcGUuZXN0YWJsZWNpbWllbnRvcyA9IFtcbiAgICAgICAgICAgICAgICAge25vbWJyZTogXCJMaWNlbyBOwrogMVwiLCBpZDogMTIxNCwgbGF0OiAtMzQuOTA2MzQ2LCBsb246IC01Ni4xNzIwNjUgfSxcbiAgICAgICAgICAgICAgICAge25vbWJyZTogXCJMaWNlbyBOwrogMlwiLCBpZDogMjQzNCwgbGF0OiAtMzQuOTAyNzU0LCBsb246IC01Ni4xNjQxMjcgfSxcbiAgICAgICAgICAgICAgICAge25vbWJyZTogXCJMaWNlbyBOwrogN1wiLCBpZDogNDMyNH0sXG4gICAgICAgICAgICAgICAgIHtub21icmU6IFwiTGljZW8gSnVhbiBab3JyaWxsYVwiLCBpZDogNTM0NX1cbiAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICBBcGlTZXJ2aWNlLnVwZGF0ZU1hcFBpbnMoJHNjb3BlLmVzdGFibGVjaW1pZW50b3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5cdCAgLyokc2NvcGUuZ29fdG9fbWFwID0gZnVuY3Rpb24oKXtcblx0ICAgICRzdGF0ZS5nbyhcImFwcC5tYXBcIik7XG5cdCAgfSovXG5cbiAgfVxuXSk7XG4iLCJwbWJfaW0uY29udHJvbGxlcnMuY29udHJvbGxlcignSW50cm9DdHJsJywgWyckc2NvcGUnLCAnJHN0YXRlJyxcbiAgJyRjb3Jkb3ZhR2VvbG9jYXRpb24nLFxuICAnJHN0YXRlUGFyYW1zJyxcbiAgJyRpb25pY1BsYXRmb3JtJyxcbiAgJyRpb25pY1BvcHVwJyxcbiAgJ0xvY2F0aW9uc1NlcnZpY2UnLFxuICBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgJGNvcmRvdmFHZW9sb2NhdGlvbiwgJHN0YXRlUGFyYW1zLCAkaW9uaWNQbGF0Zm9ybSwgJGlvbmljUG9wdXAsIExvY2F0aW9uc1NlcnZpY2UpIHtcblxuICAkc2NvcGUuZ2VvbG9jYXRlID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgIHZhciBwb3NPcHRpb25zID0ge3RpbWVvdXQ6IDM1MDAsIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZX07XG4gICAgICAkY29yZG92YUdlb2xvY2F0aW9uXG4gICAgICAgIC5nZXRDdXJyZW50UG9zaXRpb24ocG9zT3B0aW9ucylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocG9zaXRpb24pIHtcbiAgICAgICAgICBMb2NhdGlvbnNTZXJ2aWNlLnNhdmVfaW5pdGlhbF9wb3NpdGlvbihwb3NpdGlvbik7XG4gICAgICAgICAgJHN0YXRlLmdvKFwiYXBwLmZvcm1cIik7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICRzdGF0ZS5nbyhcImFwcC5mb3JtXCIpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICRzY29wZS5nb190b19mb3JtID0gZnVuY3Rpb24oKXtcbiAgICAkc3RhdGUuZ28oXCJhcHAuZm9ybVwiKTtcbiAgfVxuXG4gICAvKiRzY29wZS4kb24oJyRpb25pY1ZpZXcuZW50ZXInLCBmdW5jdGlvbigpe1xuICAgfSk7Ki9cblxuXG5cbiAgfVxuXSk7XG4iLCJwbWJfaW0uY29udHJvbGxlcnMuY29udHJvbGxlcignTWFwQ29udHJvbGxlcicsIFtcbiAgJyRzY29wZScsXG4gICdfJyxcbiAgJyRjb3Jkb3ZhR2VvbG9jYXRpb24nLFxuICAnbGVhZmxldERhdGEnLFxuICAnQ29uZmlnU2VydmljZScsXG4gICdQaW5TZXJ2aWNlJyxcbiAgJyRpbnRlcnZhbCcsXG4gICckbG9jYXRpb24nLFxuICAnTWFwU2VydmljZScsXG4gICdNb2RhbFNlcnZpY2UnLFxuICAnQXBpU2VydmljZScsXG4gIGZ1bmN0aW9uKFxuICAgICRzY29wZSxcbiAgICBfLFxuICAgICRjb3Jkb3ZhR2VvbG9jYXRpb24sXG4gICAgbGVhZmxldERhdGEsXG4gICAgQ29uZmlnU2VydmljZSxcbiAgICBQaW5TZXJ2aWNlLFxuICAgICRpbnRlcnZhbCxcbiAgICAkbG9jYXRpb24sXG4gICAgTWFwU2VydmljZSxcbiAgICBNb2RhbFNlcnZpY2UsXG4gICAgQXBpU2VydmljZVxuICApIHtcblxuICAgIC8qKlxuICAgICAqIE9uY2Ugc3RhdGUgbG9hZGVkLCBnZXQgcHV0IG1hcCBvbiBzY29wZS5cbiAgICAgKi9cbiAgICAvKiRzY29wZS5vbmxpbmVfdXNlcl9nZW8gPSB7fTtcbiAgICAkc2NvcGUub25saW5lX3VzZXJfZ2VvX2FycmF5ID0gbmV3IEFycmF5KCk7Ki9cbiAgICAkc2NvcGUuYmFzZVVSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTDtcbiAgICAkc2NvcGUuQXBwTmFtZSA9IENvbmZpZ1NlcnZpY2UuQXBwTmFtZTtcbiAgICAkc2NvcGUub25lX3ZhbHVlX3BvcHVwID0gbnVsbDtcbiAgICAkc2NvcGUubXlJbnRlcnZhbHMgPSBuZXcgQXJyYXkoKTtcblxuICAgICRzY29wZS4kb24oXCIkaW9uaWNWaWV3LmJlZm9yZUVudGVyXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgTW9kYWxTZXJ2aWNlLmNoZWNrTm9Nb2RhbElzT3BlbigpO1xuICAgICAgLy9EQlNlcnZpY2UuaW5pdERCKCk7XG4gICAgICBBcGlTZXJ2aWNlLm1hcFNjb3BlID0gJHNjb3BlO1xuICAgICAgJHNjb3BlLmNyZWF0ZV9vbmxpbmVfbWFwKCk7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuJG9uKFwiJGlvbmljVmlldy5hZnRlckVudGVyXCIsIGZ1bmN0aW9uKCkge1xuICAgIFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGluc3Bpbm5lclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuZmlsdGVyc1VwZGF0ZWQgPSBmdW5jdGlvbigpe1xuICAgICAgY29uc29sZS5sb2coQXBpU2VydmljZS5maWx0ZXJzKTtcbiAgICAgICRzY29wZS5sb2FkUGluc0xheWVyKCk7XG4gICAgfVxuXG5cbiAgICAkc2NvcGUuY3JlYXRlX29ubGluZV9tYXAgPSBmdW5jdGlvbigpe1xuICAgICAgJHNjb3BlLm1hcCA9IHtcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICB0aWxlTGF5ZXI6ICdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsXG4gICAgICAgICAgbWluWm9vbTogMSxcbiAgICAgICAgICBtYXhab29tOiAxOCxcbiAgICAgICAgICB6b29tQ29udHJvbFBvc2l0aW9uOiAndG9wbGVmdCcsXG4gICAgICAgIH0sXG4gICAgICAgIG1hcmtlcnM6IHt9LFxuICAgICAgICBldmVudHM6IHtcbiAgICAgICAgICBtYXA6IHtcbiAgICAgICAgICAgIGVuYWJsZTogWydjb250ZXh0J10sXG4gICAgICAgICAgICBsb2dpYzogJ2VtaXQnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjZW50ZXI6IHtcbiAgICAgICAgICBsYXQ6IC0zNC45MDExMTMsXG4gICAgICAgICAgbG5nOiAtNTYuMTY0NTMxLFxuICAgICAgICAgIHpvb206IDE2XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICAvKmxlYWZsZXREYXRhLmdldE1hcCgpLnRoZW4oZnVuY3Rpb24obWFwKSB7XG4gICAgICAgIG1hcC5vbignbW92ZWVuZCcsICRzY29wZS5oaWRlT2ZmU2NyZWVuUGlucyk7XG4gICAgICB9KTsqL1xuICAgIH07XG5cblxuXG4gICAgICAvKipcbiAgICAgKiBDZW50ZXIgbWFwIG9uIHVzZXIncyBjdXJyZW50IHBvc2l0aW9uXG4gICAgICovXG4gICAgJHNjb3BlLmxvY2F0ZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAkY29yZG92YUdlb2xvY2F0aW9uXG4gICAgICAgIC5nZXRDdXJyZW50UG9zaXRpb24oKVxuICAgICAgICAudGhlbihmdW5jdGlvbihwb3NpdGlvbikge1xuICAgICAgICAgICRzY29wZS5tYXAuY2VudGVyLmxhdCA9IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZTtcbiAgICAgICAgICAkc2NvcGUubWFwLmNlbnRlci5sbmcgPSBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlO1xuICAgICAgICAgICRzY29wZS5tYXAuY2VudGVyLnpvb20gPSAxNTtcblxuICAgICAgICAgICRzY29wZS5tYXAubWFya2Vycy5ub3cgPSB7XG4gICAgICAgICAgICBsYXQ6IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSxcbiAgICAgICAgICAgIGxuZzogcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiRXN0w6FzIGFxdcOtXCIsXG4gICAgICAgICAgICBmb2N1czogdHJ1ZSxcbiAgICAgICAgICAgIGRyYWdnYWJsZTogZmFsc2VcbiAgICAgICAgICB9O1xuXG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIC8vIGVycm9yXG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkxvY2F0aW9uIGVycm9yIVwiKTtcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuXG5cbiAgICAkc2NvcGUuaGlkZU9mZlNjcmVlblBpbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIC8qbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbihtYXApIHtcbiAgICAgICAgdmFyIG1hcEJvdW5kcyA9IG1hcC5nZXRCb3VuZHMoKTtcbiAgICAgICAgJHNjb3BlLnVzZXJzVmlzaWJsZSA9IFtdO1xuICAgICAgICAgICRzY29wZS5vbmxpbmVfdXNlcl9nZW9fYXJyYXkuZm9yRWFjaChmdW5jdGlvbihsYXllcixrZXkpe1xuICAgICAgICAgICAgdmFyIHNob3VsZEJlVmlzaWJsZSA9IG1hcEJvdW5kcy5jb250YWlucyhsYXllci5nZXRMYXRMbmcoKSk7XG4gICAgICAgICAgICBpZiAoIXNob3VsZEJlVmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllcik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNob3VsZEJlVmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIG1hcC5hZGRMYXllcihsYXllcik7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzVmlzaWJsZS5wdXNoKGxheWVyLmZlYXR1cmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICB9KTsqL1xuICAgIH1cblxuICAgICRzY29wZS5sb2FkUGluc0xheWVyID0gZnVuY3Rpb24oZXN0YWJsZWNpbWllbnRvcyl7XG4gICAgICBpZihlc3RhYmxlY2ltaWVudG9zIT1udWxsKXtcbiAgICAgICAgLy9SZWNvcnJlciBsb3MgZXN0YWJsaWNpbWllbnRvcyB5IGNyZWFyIGxvcyBwaW5lc1xuICAgICAgICBsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGZ1bmN0aW9uKG1hcCkge1xuICAgICAgICAgIGVzdGFibGVjaW1pZW50b3MuZm9yRWFjaChmdW5jdGlvbihmZWF0dXJlKXtcbiAgICAgICAgICAgIGlmKGZlYXR1cmUubGF0ICYmIGZlYXR1cmUubG9uKXtcbiAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IEwubWFya2VyKFtmZWF0dXJlLmxhdCwgZmVhdHVyZS5sb25dKVxuICAgICAgICAgICAgICBtYXJrZXIuYmluZFBvcHVwKFwiPGI+XCIrZmVhdHVyZS5ub21icmUrXCI8L2I+XCIpLm9wZW5Qb3B1cCgpOztcbiAgICAgICAgICAgICAgbWFya2VyLmFkZFRvKG1hcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1lbHNle1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiTm8gaGF5IGVzdGFibGVjaW1pZW50b3MgY2FyZ2Fkb3NcIik7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgfVxuXG5dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdBcGlTZXJ2aWNlJywgWyckaHR0cCcsICdDb25maWdTZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHAsIENvbmZpZ1NlcnZpY2UpIHtcblxuICB2YXIgYXBpVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMICsgXCIvYXBpL1wiO1xuXG4vKipcbiAgICogQ29uc3RydWN0b3IsIHdpdGggY2xhc3MgbmFtZVxuICAgKi9cbiAgZnVuY3Rpb24gQXBpT2JqZWN0KF9kYXRhKSB7XG4gICAgYW5ndWxhci5leHRlbmQodGhpcywgX2RhdGEpO1xuICB9XG5cblxuICBBcGlPYmplY3Quc2VhcmNoUXVlRXN0dWRpYXIgPSBmdW5jdGlvbihzdHIpe1xuICAgIHJldHVybiAkaHR0cC5nZXQoYXBpVVJMICsgJ3NlYXJjaC8nICsgc3RyLCB7Y2FjaGU6IGZhbHNlLCBwYXJhbXM6IHtoYXNoX2lkOk1hdGgucmFuZG9tKCl9fSk7XG4gIH1cblxuICBBcGlPYmplY3Quc2VhcmNoRG9uZGVFc3R1ZGlhciA9IGZ1bmN0aW9uKHN0cil7XG4gICAgcmV0dXJuICRodHRwLmdldChhcGlVUkwgKyAnc2VhcmNoQnlMb2NhbGlkYWREZXBhcnRhbWVudG8vJyArIHN0ciwge2NhY2hlOiBmYWxzZSwgcGFyYW1zOiB7aGFzaF9pZDpNYXRoLnJhbmRvbSgpfX0pO1xuICB9XG5cbiAgICBBcGlPYmplY3QuZmlsdGVycyA9IG51bGw7XG4gICAgQXBpT2JqZWN0Lm1hcFNjb3BlID0gbnVsbDtcbiAgICBBcGlPYmplY3QuZm9ybVNjb3BlID0ge307XG4gICAgQXBpT2JqZWN0Lmxhc3RTZWFyY2hSZXNwb25zZUVzdGFibGVjaW1pZW50b3MgPSBudWxsO1xuXG4gICAgQXBpT2JqZWN0LnVwZGF0ZUZpbHRlcnMgPSBmdW5jdGlvbihmaWx0ZXJzT2JqZWN0KXtcbiAgICAgIEFwaU9iamVjdC5maWx0ZXJzID0gZmlsdGVyc09iamVjdDtcbiAgICAgIGlmKEFwaU9iamVjdC5tYXBTY29wZSAhPSBudWxsKXtcbiAgICAgICAgQXBpT2JqZWN0Lm1hcFNjb3BlLmZpbHRlcnNVcGRhdGVkKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgQXBpT2JqZWN0LmNyZWF0ZUZpbHRlclBhcmFtc0ZvckdldFJlcXVlc3QgPSBmdW5jdGlvbigpe1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgaGFzaF9pZDogTWF0aC5yYW5kb20oKSxcbiAgICAgICAgZWRhZDogQXBpT2JqZWN0LmZpbHRlcnMuZWRhZCxcbiAgICAgICAgdWx0aW1vX25pdmVsX2Fwcm9iYWRvOiBBcGlPYmplY3QuZmlsdGVycy51bHRpbW9fbml2ZWxfYXByb2JhZG8sXG4gICAgICAgIHVsdGltb19hbmlvX2Fwcm9iYWRvOiBBcGlPYmplY3QuZmlsdGVycy51bHRpbW9fYW5pb19hcHJvYmFkbyxcbiAgICAgICAgLypwbGFuOiBBcGlPYmplY3QuZmlsdGVycy5wbGFuLFxuICAgICAgICBsdWdhcjogQXBpT2JqZWN0LmZpbHRlcnMubHVnYXIsKi9cbiAgICAgICAgdHVybm86IEFwaU9iamVjdC5maWx0ZXJzLnR1cm5vXG4gICAgICB9O1xuICAgICAgaWYoQXBpT2JqZWN0LmZpbHRlcnMucXVlIT1cIlwiKXtcbiAgICAgICAgcGFyYW1zLnF1ZUVzdHVkaWFySWQgPSBBcGlPYmplY3QuZmlsdGVycy5xdWUuaWQ7XG4gICAgICAgIHBhcmFtcy5xdWVFc3R1ZGlhck5vbWJyZSA9IEFwaU9iamVjdC5maWx0ZXJzLnF1ZS5ub21icmU7XG4gICAgICAgIHBhcmFtcy5xdWVFc3R1ZGlhclRhZ1VubyA9IEFwaU9iamVjdC5maWx0ZXJzLnF1ZS50YWdbMF07XG4gICAgICAgIHBhcmFtcy5xdWVFc3R1ZGlhclRhZ0RvcyA9IEFwaU9iamVjdC5maWx0ZXJzLnF1ZS50YWdbMV07XG4gICAgICB9XG4gICAgICBpZihBcGlPYmplY3QuZmlsdGVycy5kb25kZSE9XCJcIil7XG4gICAgICAgIHBhcmFtcy5kb25kZUVzdHVkaWFyRGVwYXJ0YW1lbnRvID0gQXBpT2JqZWN0LmZpbHRlcnMuZG9uZGUuZGVwYXJ0YW1lbnRvO1xuICAgICAgICBwYXJhbXMuZG9uZGVFc3R1ZGlhckxvY2FsaWRhZCA9IEFwaU9iamVjdC5maWx0ZXJzLmRvbmRlLmxvY2FsaWRhZDtcbiAgICAgICAgcGFyYW1zLmRvbmRlRXN0dWRpYXJMYXQgPSBBcGlPYmplY3QuZmlsdGVycy5kb25kZS5jb29yZGVuYWRhcy5sYXQ7XG4gICAgICAgIHBhcmFtcy5kb25kZUVzdHVkaWFyTG9uID0gQXBpT2JqZWN0LmZpbHRlcnMuZG9uZGUuY29vcmRlbmFkYXMubG9uO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG5cbiAgICBBcGlPYmplY3QuZ2V0RXN0YWJsZWNpbWllbnRvc0J5RmlsdGVycyA9IGZ1bmN0aW9uKCl7XG4gICAgICBpZihBcGlPYmplY3QuZmlsdGVycyE9bnVsbCl7XG4gICAgICAgIHZhciBwYXJhbWV0ZXJzID0gQXBpT2JqZWN0LmNyZWF0ZUZpbHRlclBhcmFtc0ZvckdldFJlcXVlc3QoKTtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldChhcGlVUkwgKyAnZ2V0RXN0YWJsZWNpbWllbnRvcy8nLCB7Y2FjaGU6IGZhbHNlLCBwYXJhbXM6IHBhcmFtZXRlcnN9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBBcGlPYmplY3QudXBkYXRlTWFwUGlucyA9IGZ1bmN0aW9uKGVzdGFibGVjaW1pZW50b3Mpe1xuICAgICAgQXBpT2JqZWN0Lm1hcFNjb3BlLmxvYWRQaW5zTGF5ZXIoZXN0YWJsZWNpbWllbnRvcyk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uXG4gICAgICovXG4gICAgcmV0dXJuIEFwaU9iamVjdDtcblxufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ0F1dGhTZXJ2aWNlJywgWyckaHR0cCcsICckY29yZG92YUZpbGVUcmFuc2ZlcicsICdDb25maWdTZXJ2aWNlJywnVmFsaWRhdGlvblNlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCwgJGNvcmRvdmFGaWxlVHJhbnNmZXIsIENvbmZpZ1NlcnZpY2UsIFZhbGlkYXRpb25TZXJ2aWNlKSB7XG5cbiAgdmFyIGJhc2VVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9hcGkvXCI7XG5cbiAgcmV0dXJuIHtcbiAgICBsb2dfaW46IGZ1bmN0aW9uICh1c2VyLHBhc3N3b3JkKSB7XG4gICAgICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VyKycmcGFzc3dvcmQ9JytwYXNzd29yZDtcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdsb2dpbicsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgICB9LFxuXG4gICAgc2lnbl9vdXQ6IGZ1bmN0aW9uIChwYXNzd29yZCwgZW1haWwpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoYmFzZVVSTCArIFwic2lnbl9vdXRcIiwgeyB3aXRoQ3JlZGVudGlhbHM6IHRydWUsIHBhcmFtczogeyBwYXNzd29yZF9zaWduX2luOiBwYXNzd29yZCwgZW1haWw6IGVtYWlsIH0gfSk7XG4gICAgfSxcblxuICAgIGNyZWF0ZV91c2VyOiBmdW5jdGlvbiAodXNlck9iaikge1xuICAgICAgaWYodXNlck9iai5waWN0dXJlX3VybCAmJiBWYWxpZGF0aW9uU2VydmljZS5pc01vYmlsZURldmljZSgpKXtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICBmaWxlS2V5OiBcInBob3RvXCIsXG4gICAgICAgICAvL2ZpbGVOYW1lOiBmaWxlbmFtZSxcbiAgICAgICAgIC8vY2h1bmtlZE1vZGU6IGZhbHNlLFxuICAgICAgICAgLy9taW1lVHlwZTogXCJpbWFnZS9qcGdcIixcbiAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSxcbiAgICAgICAgIHBhcmFtcyA6IHsgIHVzZXI6IHVzZXJPYmoudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogdXNlck9iai5wYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyT2JqLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgZ2VuZGVyOiB1c2VyT2JqLmdlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgIGludGVyZXN0ZWQ6IHVzZXJPYmouaW50ZXJlc3RlZCxcbiAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogdXNlck9iai5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICBzaG93X2xvY2F0aW9uOiB1c2VyT2JqLnNob3dfbG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgdHJ1c3RBbGxIb3N0cyA9IHRydWU7XG4gICAgICAgIHJldHVybiAkY29yZG92YUZpbGVUcmFuc2Zlci51cGxvYWQoYmFzZVVSTCArIFwiY3JlYXRlX3VzZXJcIiwgdXNlck9iai5waWN0dXJlX3VybCwgb3B0aW9ucywgdHJ1c3RBbGxIb3N0cyk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgaWYodXNlck9iai5waWN0dXJlX3VybCl7XG4gICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwicGhvdG9cIiwgdXNlck9iai5waWN0dXJlX3VybCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwidXNlclwiLCB1c2VyT2JqLnVzZXJuYW1lKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJwYXNzd29yZFwiLCB1c2VyT2JqLnBhc3N3b3JkKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJlbWFpbFwiLCB1c2VyT2JqLmVtYWlsKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJnZW5kZXJcIiwgdXNlck9iai5nZW5kZXIpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcImludGVyZXN0ZWRcIiwgdXNlck9iai5pbnRlcmVzdGVkKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJzdGF0dXNcIiwgdXNlck9iai5zdGF0dXMpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcInNob3dfbG9jYXRpb25cIiwgdXNlck9iai5zaG93X2xvY2F0aW9uKTtcbiAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2NyZWF0ZV91c2VyJywgZm9ybURhdGEsIHtcbiAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGFuZ3VsYXIuaWRlbnRpdHlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXJPYmoudXNlcm5hbWUrJyZwYXNzd29yZD0nK3VzZXJPYmoucGFzc3dvcmQrJyZlbWFpbD0nK3VzZXJPYmouZW1haWwrJyZnZW5kZXI9Jyt1c2VyT2JqLmdlbmRlcjtcbiAgICAgICAgICBib2R5ID0gYm9keSArJyZpbnRlcmVzdGVkPScrdXNlck9iai5pbnRlcmVzdGVkKycmc3RhdHVzPScrdXNlck9iai5zdGF0dXMrJyZzaG93X2xvY2F0aW9uPScrdXNlck9iai5zaG93X2xvY2F0aW9uO1xuICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KGJhc2VVUkwgKyAnY3JlYXRlX3VzZXInLCBib2R5LHt3aXRoQ3JlZGVudGlhbHM6IHRydWUsIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9fSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH0sXG5cbiAgICBwYXNzd29yZF9yZWNvdmVyeTogZnVuY3Rpb24gKGVtYWlsKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KGJhc2VVUkwgKyBcImZvcmdvdF9wYXNzd29yZFwiLCB7IHBhcmFtczogeyBsb2dpbl9lbWFpbDogZW1haWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHBhc3N3b3JkX2NoYW5nZTogZnVuY3Rpb24gKGVtYWlsLG9sZFBhc3N3b3JkLG5ld1Bhc3N3b3JkLGNvbmZpcm1QYXNzd29yZCkge1xuXG4gICAgICB2YXIgYm9keSA9ICdlbWFpbD0nK2VtYWlsKycmcGFzc3dvcmRfc2lnbl9pbj0nK29sZFBhc3N3b3JkKycmbmV3X3Bhc3N3b3JkPScrbmV3UGFzc3dvcmQrJyZjb25maXJtPScrY29uZmlybVBhc3N3b3JkO1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdjaGFuZ2VfcGFzc3dvcmQnLCBib2R5LHtoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuXG4gICAgfSxcblxuXG4gICAgZWRpdF91c2VyOiBmdW5jdGlvbiAodXNlck9iaikge1xuICAgICAgaWYodXNlck9iai5waWN0dXJlX3VybCAmJiBWYWxpZGF0aW9uU2VydmljZS5pc01vYmlsZURldmljZSgpKXtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICBmaWxlS2V5OiBcInBob3RvXCIsXG4gICAgICAgICAvL2ZpbGVOYW1lOiBmaWxlbmFtZSxcbiAgICAgICAgIC8vY2h1bmtlZE1vZGU6IGZhbHNlLFxuICAgICAgICAgLy9taW1lVHlwZTogXCJpbWFnZS9qcGdcIixcbiAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSxcbiAgICAgICAgIHBhcmFtcyA6IHsgIHVzZXI6IHVzZXJPYmoudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogdXNlck9iai5wYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyT2JqLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgZ2VuZGVyOiB1c2VyT2JqLmdlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgIGludGVyZXN0ZWQ6IHVzZXJPYmouaW50ZXJlc3RlZCxcbiAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogdXNlck9iai5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICBzaG93X2xvY2F0aW9uOiB1c2VyT2JqLnNob3dfbG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgdHJ1c3RBbGxIb3N0cyA9IHRydWU7XG4gICAgICAgIHJldHVybiAkY29yZG92YUZpbGVUcmFuc2Zlci51cGxvYWQoYmFzZVVSTCArIFwiZWRpdF9wcm9maWxlXCIsIHVzZXJPYmoucGljdHVyZV91cmwsIG9wdGlvbnMsIHRydXN0QWxsSG9zdHMpO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VyT2JqLnVzZXJuYW1lKycmcGFzc3dvcmQ9Jyt1c2VyT2JqLnBhc3N3b3JkKycmZW1haWw9Jyt1c2VyT2JqLmVtYWlsKycmZ2VuZGVyPScrdXNlck9iai5nZW5kZXI7XG4gICAgICAgIGJvZHkgPSBib2R5ICsnJmludGVyZXN0ZWQ9Jyt1c2VyT2JqLmludGVyZXN0ZWQrJyZzdGF0dXM9Jyt1c2VyT2JqLnN0YXR1cysnJnNob3dfbG9jYXRpb249Jyt1c2VyT2JqLnNob3dfbG9jYXRpb247XG4gICAgICAgIGlmKHVzZXJPYmoucGljdHVyZV91cmwpe1xuICAgICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcInBob3RvXCIsIHVzZXJPYmoucGljdHVyZV91cmwpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcInVzZXJcIiwgdXNlck9iai51c2VybmFtZSk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwicGFzc3dvcmRcIiwgdXNlck9iai5wYXNzd29yZCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwiZW1haWxcIiwgdXNlck9iai5lbWFpbCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwiZ2VuZGVyXCIsIHVzZXJPYmouZ2VuZGVyKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJpbnRlcmVzdGVkXCIsIHVzZXJPYmouaW50ZXJlc3RlZCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwic3RhdHVzXCIsIHVzZXJPYmouc3RhdHVzKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJzaG93X2xvY2F0aW9uXCIsIHVzZXJPYmouc2hvd19sb2NhdGlvbik7XG4gICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdlZGl0X3Byb2ZpbGUnLCBmb3JtRGF0YSwge1xuICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogYW5ndWxhci5pZGVudGl0eVxuICAgICAgICAgIH0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2VkaXRfcHJvZmlsZScsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICB9O1xufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ0NvbmZpZ1NlcnZpY2UnLCBbJyRodHRwJywgZnVuY3Rpb24oJGh0dHApIHtcblxuICB2YXIgQ29uZmlnT2JqID0ge307XG4gIENvbmZpZ09iai5iYXNlVVJMID0gXCJodHRwOi8vZWVfYmFja2VuZC5kZXZlbG9wbWVudC5kYXRhdXkub3JnXCI7XG4gIGlmKGlvbmljLlBsYXRmb3JtLmlzV2ViVmlldygpKXtcbiAgICBDb25maWdPYmouYmFzZVVSTCA9IFwiaHR0cDovL2VlX2JhY2tlbmQuZGV2ZWxvcG1lbnQuZGF0YXV5Lm9yZ1wiO1xuICB9IGVsc2Uge1xuICAgIENvbmZpZ09iai5iYXNlVVJMID0gXCIvYmFja2VuZFwiO1xuICB9XG4gIENvbmZpZ09iai5BcHBOYW1lID0gXCJFbGlqbyBFc3R1ZGlhclwiO1xuXG5cbiAgcmV0dXJuIENvbmZpZ09iajtcblxufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ0Nvbm5lY3Rpdml0eVNlcnZpY2UnLCBbJyRjb3Jkb3ZhTmV0d29yaycsIGZ1bmN0aW9uKCRjb3Jkb3ZhTmV0d29yayl7XG5cbiAgcmV0dXJuIHtcbiAgICBpc09ubGluZTogZnVuY3Rpb24oKXtcbiAgICAgIC8qaWYoaW9uaWMuUGxhdGZvcm0uaXNXZWJWaWV3KCkpe1xuICAgICAgICByZXR1cm4gJGNvcmRvdmFOZXR3b3JrLmlzT25saW5lKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm9uTGluZTtcbiAgICAgICAgLy9yZXR1cm4gZmFsc2U7XG4gICAgICB9Ki9cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgaXNPZmZsaW5lOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgLyppZihpb25pYy5QbGF0Zm9ybS5pc1dlYlZpZXcoKSl7XG4gICAgICAgIHJldHVybiAhJGNvcmRvdmFOZXR3b3JrLmlzT25saW5lKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gIW5hdmlnYXRvci5vbkxpbmU7XG4gICAgICB9Ki9cbiAgICB9XG4gIH1cbn1dKVxuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ0RCU2VydmljZScsIFsnJHEnLCBmdW5jdGlvbigkcSkge1xuICAgdmFyIF9kYjtcblxuICAgcmV0dXJuIHtcbiAgICAgICBpbml0REI6IGluaXREQixcbiAgICAgICBzYXZlVXNlcjogc2F2ZVVzZXIsXG4gICAgICAgZ2V0VXNlcjogZ2V0VXNlcixcbiAgICAgICBlcmFzZVVzZXI6IGVyYXNlVXNlcixcbiAgICAgICBzYXZlUmVwb3J0OiBzYXZlUmVwb3J0LFxuICAgICAgIGdldFJlcG9ydDogZ2V0UmVwb3J0LFxuICAgICAgIGdldEFsbFJlcG9ydHM6IGdldEFsbFJlcG9ydHMsXG4gICAgICAgdXBkYXRlUmVwb3J0OiB1cGRhdGVSZXBvcnQsXG4gICAgICAgZGVsZXRlUmVwb3J0OiBkZWxldGVSZXBvcnQsXG4gICAgICAgZGVsZXRlR2l2ZW5SZXBvcnQ6IGRlbGV0ZUdpdmVuUmVwb3J0LFxuICAgICAgIGdldENhdGVnb3JpZXM6IGdldENhdGVnb3JpZXMsXG4gICAgICAgc2F2ZUNhdGVnb3JpZXM6IHNhdmVDYXRlZ29yaWVzXG4gICB9O1xuXG4gICBmdW5jdGlvbiBzYXZlVXNlcih1c2VyX25hbWUsIHVzZXJfcGFzc3dvcmQsIHVzZXJfcGljdHVyZV91cmwsc2hvd19sb2NhdGlvbiwgdWlkLCBzdGF0dXMsIGdlbmRlciwgaW50ZXJlc3RlZCkge1xuICAgICAgICAgdmFyIHVzZXIgPSB7XG4gICAgICAgICAgICBfaWQ6ICd1c2VyLWxvZ2dlZCcsXG4gICAgICAgICAgICBuYW1lOiB1c2VyX25hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogdXNlcl9wYXNzd29yZCxcbiAgICAgICAgICAgIHBpY3R1cmVfdXJsOiB1c2VyX3BpY3R1cmVfdXJsLFxuICAgICAgICAgICAgc2hvd19sb2NhdGlvbjogc2hvd19sb2NhdGlvbixcbiAgICAgICAgICAgIHVpZDogdWlkLFxuICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMsXG4gICAgICAgICAgICBnZW5kZXI6IGdlbmRlcixcbiAgICAgICAgICAgIGludGVyZXN0ZWQ6IGludGVyZXN0ZWRcbiAgICAgICAgIH07XG4gICAgICAgICBnZXRVc2VyKCkudGhlbihmdW5jdGlvbiAoZG9jKSB7XG4gICAgICAgICAgIHVzZXIuX3JldiA9IGRvYy5fcmV2O1xuICAgICAgICAgICByZXR1cm4gX2RiLnB1dCh1c2VyKTtcbiAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgcmV0dXJuIF9kYi5wdXQodXNlcik7XG4gICAgICAgICB9KVxuICAgfTtcblxuICBmdW5jdGlvbiBnZXRVc2VyKCkge1xuICAgICByZXR1cm4gX2RiLmdldCgndXNlci1sb2dnZWQnKTtcbiAgfTtcblxuICBmdW5jdGlvbiBlcmFzZVVzZXIoKSB7XG4gICAgX2RiLmdldCgndXNlci1sb2dnZWQnKS50aGVuKGZ1bmN0aW9uKGRvYykge1xuICAgICAgcmV0dXJuIF9kYi5yZW1vdmUoZG9jKTtcbiAgICB9KTtcbiAgfVxuXG4gICBmdW5jdGlvbiBpbml0REIoKSB7XG4gICAgICAgLy8gQ3JlYXRlcyB0aGUgZGF0YWJhc2Ugb3Igb3BlbnMgaWYgaXQgYWxyZWFkeSBleGlzdHNcbiAgICAgICBfZGIgPSBuZXcgUG91Y2hEQigndG9tYW1vc3VuYV9sb2NhbF9kYicpO1xuICAgICAgIHJldHVybiBfZGI7XG4gICB9O1xuXG4gICBmdW5jdGlvbiBzYXZlUmVwb3J0KHJlcG9ydCkge1xuICAgICAgLy9uZXdfcmVwb3J0X2lkID0gXCJyZXBvcnRfXCIgKyBwb3VjaENvbGxhdGUudG9JbmRleGFibGVTdHJpbmcoW3JlcG9ydF0pO1xuICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgdmFyIG5ld19yZXBvcnRfaWQgPSBcInJlcG9ydF9cIiArIGRhdGUuZ2V0RnVsbFllYXIoKSArIChkYXRlLmdldE1vbnRoKCkgKyAxKSArIGRhdGUuZ2V0RGF0ZSgpICsgZGF0ZS5nZXRNaWxsaXNlY29uZHMoKTtcbiAgICAgIHJlcG9ydC5faWQgPSBuZXdfcmVwb3J0X2lkO1xuICAgICAgcmV0dXJuIF9kYi5wdXQocmVwb3J0KTtcbiAgIH07XG5cbiAgIGZ1bmN0aW9uIHVwZGF0ZVJlcG9ydChyZXBvcnQpIHtcbiAgICAgcmV0dXJuIF9kYi5wdXQocmVwb3J0KTtcbiAgfTtcblxuICAgZnVuY3Rpb24gZ2V0Q2F0ZWdvcmllcygpIHtcbiAgICAgcmV0dXJuIF9kYi5nZXQoJ2NhdGVnb3JpZXMtbGlzdCcpO1xuICAgfTtcblxuICAgZnVuY3Rpb24gc2F2ZUNhdGVnb3JpZXMoY2F0ZWdvcmllcykge1xuICAgICBnZXRDYXRlZ29yaWVzKCkudGhlbihmdW5jdGlvbiAoZG9jKSB7XG4gICAgICAgY2F0ZWdvcmllcy5fcmV2ID0gZG9jLl9yZXY7XG4gICAgICAgcmV0dXJuIF9kYi5wdXQoY2F0ZWdvcmllcyk7XG4gICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICBjYXRlZ29yaWVzLl9pZCA9IFwiY2F0ZWdvcmllcy1saXN0XCI7XG4gICAgICAgcmV0dXJuIF9kYi5wdXQoY2F0ZWdvcmllcyk7XG4gICAgIH0pXG4gICB9O1xuXG4gIGZ1bmN0aW9uIGdldFJlcG9ydChyZXBvcnRJZCkge1xuICAgICByZXR1cm4gX2RiLmdldChyZXBvcnRJZCk7XG4gIH07XG5cbiAgIGZ1bmN0aW9uIGdldEFsbFJlcG9ydHMoKSB7XG4gICAgIHJldHVybiBfZGIuYWxsRG9jcyh7XG4gICAgICBpbmNsdWRlX2RvY3M6IHRydWUsXG4gICAgICBhdHRhY2htZW50czogZmFsc2UsXG4gICAgICBzdGFydGtleTogJ3JlcG9ydF8nLFxuICAgICAgZW5ka2V5OiAncmVwb3J0X1xcdWZmZmYnXG4gICAgIH0pOy8qLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgLy8gaGFuZGxlIHJlc3VsdFxuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7Ki9cbiAgfTtcblxuICBmdW5jdGlvbiBkZWxldGVSZXBvcnQocmVwb3J0X2lkKSB7XG4gICAgX2RiLmdldChyZXBvcnRfaWQpLnRoZW4oZnVuY3Rpb24oZG9jKSB7XG4gICAgICByZXR1cm4gX2RiLnJlbW92ZShkb2MpO1xuICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGRlbGV0ZUdpdmVuUmVwb3J0KHJlcG9ydCkge1xuICAgIHJldHVybiBfZGIucmVtb3ZlKHJlcG9ydCk7XG4gIH07XG5cbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdEcmlua1NlcnZpY2UnLCBbJyRodHRwJywgJ0NvbmZpZ1NlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCwgQ29uZmlnU2VydmljZSkge1xuXG4gIHZhciBiYXNlVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMICsgXCIvYXBpL1wiO1xuXG4gIHJldHVybiB7XG4gICAgZ2V0QWxsRHJpbmtzQXZhaWxhYmxlOiBmdW5jdGlvbiAodXNlcm5hbWUscGFzc3dvcmQpIHtcbiAgICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VybmFtZSsnJnBhc3N3b3JkPScrcGFzc3dvcmQrJyZoYXNoX2lkPScrTWF0aC5yYW5kb20oKTtcbiAgICAgIC8vYm9keSA9IGJvZHkgKycmaW50ZXJlc3RlZD0nK3VzZXJPYmouaW50ZXJlc3RlZCsnJnN0YXR1cz0nK3VzZXJPYmouc3RhdHVzKycmc2hvd19sb2NhdGlvbj0nK3VzZXJPYmouc2hvd19sb2NhdGlvbjtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KGJhc2VVUkwgKyAnZ2V0X3Bvc3NpYmxlX2RyaW5rcycsIGJvZHkse2hlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9fSk7XG4gICAgfSxcblxuICAgIGdldEFsbEludml0YXRpb25zV2l0aFVzZXI6IGZ1bmN0aW9uICh1c2VybmFtZSxwYXNzd29yZCxkZXN0aW5hdGlvbl91aWQsYXV0aG9yX3VpZCkge1xuICAgICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXJuYW1lKycmcGFzc3dvcmQ9JytwYXNzd29yZCsnJmhhc2hfaWQ9JytNYXRoLnJhbmRvbSgpO1xuICAgICAgYm9keSA9IGJvZHkgKycmdWlkPScrZGVzdGluYXRpb25fdWlkKycmYXV0aG9yX3VpZD0nK2F1dGhvcl91aWQ7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2dldF9pbnZpdGF0aW9uc19iZXR3ZWVuX3VzZXJzJywgYm9keSx7aGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgICB9LFxuXG4gICAgc2VuZERyaW5rSW52aXRhdGlvblRvVXNlcjogZnVuY3Rpb24oZHJpbmtfbmlkLGRlc3RpbmF0aW9uX3VpZCxhdXRob3JfdWlkLHVzZXJuYW1lLHBhc3N3b3JkKXtcbiAgICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VybmFtZSsnJnBhc3N3b3JkPScrcGFzc3dvcmQrJyZkcmlua19uaWQ9Jytkcmlua19uaWQrJyZkZXN0aW5hdGlvbl91aWQ9JytkZXN0aW5hdGlvbl91aWQrJyZhdXRob3JfdWlkPScrYXV0aG9yX3VpZCsnJmhhc2hfaWQ9JytNYXRoLnJhbmRvbSgpO1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdzZW5kX2RyaW5rX2ludml0YXRpb24nLCBib2R5LHt3aXRoQ3JlZGVudGlhbHM6IHRydWUsIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9fSk7XG4gICAgfSxcblxuICAgIHNlbmREcmlua0ludml0YXRpb25SZXNwb25zZTogZnVuY3Rpb24ocmVzcG9uc2UsdXNlcm5hbWUscGFzc3dvcmQsaW52aXRhdGlvbl9uaWQsZGVzdGluYXRpb25fdWlkKXtcbiAgICAgIHZhciBib2R5ID0gJ3Jlc3BvbnNlPScrcmVzcG9uc2UrJyZ1c2VyPScrdXNlcm5hbWUrJyZwYXNzd29yZD0nK3Bhc3N3b3JkKycmaW52aXRhdGlvbl9uaWQ9JytpbnZpdGF0aW9uX25pZCsnJmRlc3RpbmF0aW9uX3VpZD0nK2Rlc3RpbmF0aW9uX3VpZCsnJmhhc2hfaWQ9JytNYXRoLnJhbmRvbSgpO1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdpbnZpdGF0aW9uX3Jlc3BvbnNlJywgYm9keSx7d2l0aENyZWRlbnRpYWxzOiB0cnVlLCBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuICAgIH1cblxuICB9O1xufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ0Vycm9yU2VydmljZScsIFsnJGh0dHAnLCckaW9uaWNQb3B1cCcsICdWYWxpZGF0aW9uU2VydmljZScsIGZ1bmN0aW9uKCRodHRwLCRpb25pY1BvcHVwLFZhbGlkYXRpb25TZXJ2aWNlKSB7XG5cbiAgcmV0dXJuIHtcbiAgICBodHRwX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWw6IGZ1bmN0aW9uIChqc29uUmVzdWx0LCBlcnJvckNvbnRhaW5lcklkKSB7XG4gICAgICB2YXIgZXJyb3JEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlcnJvckNvbnRhaW5lcklkKTtcbiAgICAgIGlmKGpzb25SZXN1bHQuZGF0YSAmJiBqc29uUmVzdWx0LmRhdGEuU3RhdHVzPT1cInN1Y2Nlc3NcIiB8fCBqc29uUmVzdWx0LlN0YXR1cz09XCJzdWNjZXNzXCIpe1xuICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfWVsc2V7XG4gICAgICAgIGlmKGpzb25SZXN1bHQuZGF0YSl7XG4gICAgICAgICAgZXJyb3JEaXYuaW5uZXJIVE1MPVwiPGgzPlwiICsganNvblJlc3VsdC5kYXRhLk1lc3NhZ2UgKyBcIjwvaDM+XCI7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIGVycm9yRGl2LmlubmVySFRNTD1cIjxoMz5cIiArIGpzb25SZXN1bHQuTWVzc2FnZSArIFwiPC9oMz5cIjtcbiAgICAgICAgfVxuICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bF9hamF4OiBmdW5jdGlvbiAoanNvblJlc3VsdCkge1xuICAgICAgaWYoanNvblJlc3VsdC5kYXRhLnJlc3VsdD09MCl7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1lbHNle1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaHR0cF9yZXNwb25zZV9pc19zdWNjZXNzZnVsX3BvcHVwOiBmdW5jdGlvbiAoanNvblJlc3VsdCkge1xuICAgICAgaWYoanNvblJlc3VsdC5kYXRhLnJlc3VsdD09MCl7XG4gICAgICAgIHZhciBhbGVydFBvcHVwID0gJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgdGl0bGU6IFwiRXJyb3JcIixcbiAgICAgICAgIHRlbXBsYXRlOiBqc29uUmVzdWx0LmRhdGEubWVzc2FnZVxuICAgICAgICB9KTtcbiAgICAgICAgYWxlcnRQb3B1cC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1lbHNle1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaHR0cF9kYXRhX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWw6IGZ1bmN0aW9uIChkYXRhLCBlcnJvckNvbnRhaW5lcklkKSB7XG4gICAgICB2YXIgZXJyb3JEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlcnJvckNvbnRhaW5lcklkKTtcbiAgICAgIGlmKGRhdGEuU3RhdHVzIT0nc3VjY2Vzcycpe1xuICAgICAgICBlcnJvckRpdi5pbm5lckhUTUw9XCI8aDM+XCIgKyBkYXRhLk1lc3NhZ2UgKyBcIjwvaDM+XCI7XG4gICAgICAgIGVycm9yRGl2LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1lbHNle1xuICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBodHRwX2RhdGFfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bF9hamF4OiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgaWYoZGF0YS5yZXN1bHQ9PTApe1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHNob3dfZXJyb3JfbWVzc2FnZTogZnVuY3Rpb24gKGVycm9yQ29udGFpbmVySWQsIG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIGVycm9yRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZXJyb3JDb250YWluZXJJZCk7XG4gICAgICAgIGVycm9yRGl2LmlubmVySFRNTD1cIjxoMz5cIiArIG1lc3NhZ2UgKyBcIjwvaDM+XCI7XG4gICAgICAgIGVycm9yRGl2LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgc2hvd19lcnJvcl9tZXNzYWdlX3BvcHVwOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICB2YXIgYWxlcnRQb3B1cCA9ICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgIHRpdGxlOiBcIkVycm9yXCIsXG4gICAgICAgICB0ZW1wbGF0ZTogbWVzc2FnZVxuICAgICAgICB9KTtcbiAgICAgICAgYWxlcnRQb3B1cC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgY2hlY2tfZmllbGRzOiBmdW5jdGlvbiAoZmllbGRzLCBlcnJvckNvbnRhaW5lcklkKSB7XG4gICAgICB2YXIgZXJyb3JzID0gXCJcIjtcbiAgICAgIGZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uKGZpZWxkKSB7XG4gICAgICAgIGlmKGZpZWxkLnR5cGU9PVwibm90TnVsbFwiKXtcbiAgICAgICAgICBpZighVmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVfbm90X2VtcHR5KGZpZWxkLnZhbHVlKSl7XG4gICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMgKyAnPGgzPi0gRWwgY2FtcG8gXCInICsgZmllbGQubmFtZSArICdcIiBubyBwdWVkZSBlc3RhciB2YWPDrW8uPC9oMz4nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZihmaWVsZC50eXBlPT1cImVtYWlsXCIpe1xuICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV9lbWFpbChmaWVsZC52YWx1ZSkpe1xuICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzICsgJzxoMz4tIEVsIGNhbXBvIFwiJyArIGZpZWxkLm5hbWUgKyAnXCIgbm8gZXMgdW5hIGRpcmVjY2nDs24gZGUgY29ycmVvIHbDoWxpZGEuPC9oMz4nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZihmaWVsZC50eXBlPT1cImlkZG9jX3V5XCIpe1xuICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV9pZGRvY191eShmaWVsZC52YWx1ZSkpe1xuICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzICsgJzxoMz4tIEVsIGNhbXBvIFwiJyArIGZpZWxkLm5hbWUgKyAnXCIgbm8gZXMgdW5hIGPDqWR1bGEgdXJ1Z3VheWEgdsOhbGlkYS48L2gzPic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKGZpZWxkLnR5cGU9PVwidHdvX3dvcmRzXCIpe1xuICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV90d29fd29yZHMoZmllbGQudmFsdWUpKXtcbiAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBFbCBjYW1wbyBcIicgKyBmaWVsZC5uYW1lICsgJ1wiIGRlYmUgY29udGVuZXIgYWwgbWVub3MgZG9zIHBhbGFicmFzLjwvaDM+JztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYoZmllbGQudHlwZT09XCJlcXVhbHNUb1wiKXtcbiAgICAgICAgICBpZighVmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVfZXF1YWxzVG8oZmllbGQudmFsdWUsIGZpZWxkLnNlY29uZFZhbHVlKSl7XG4gICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMgKyAnPGgzPi0gTG9zIGNhbXBvcyBcIicgKyBmaWVsZC5uYW1lICsgJ1wiIG5vIGNvaW5jaWRlbi48L2gzPic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmKGVycm9ycyA9PVwiXCIpe1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1lbHNle1xuICAgICAgICB2YXIgZXJyb3JEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlcnJvckNvbnRhaW5lcklkKTtcbiAgICAgICAgZXJyb3JEaXYuaW5uZXJIVE1MPSBlcnJvcnM7XG4gICAgICAgIGVycm9yRGl2LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cblxuICB9O1xufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ0xvYWRlcicsIFsnJGlvbmljTG9hZGluZycsICckdGltZW91dCcsJyRpb25pY1BvcHVwJyxmdW5jdGlvbigkaW9uaWNMb2FkaW5nLCR0aW1lb3V0LCRpb25pY1BvcHVwKSB7XG5cbiAgdmFyIExPQURFUkFQSSA9IHtcblxuICAgIHNob3dMb2FkaW5nOiBmdW5jdGlvbih0ZXh0KSB7XG4gICAgICB0ZXh0ID0gdGV4dCB8fCAnTG9hZGluZy4uLic7XG4gICAgICAkaW9uaWNMb2FkaW5nLnNob3coe1xuICAgICAgICB0ZW1wbGF0ZTogdGV4dFxuICAgICAgfSk7XG4gICAgfSxcblxuICAgIGhpZGVMb2FkaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgIH0sXG5cbiAgICB0b2dnbGVMb2FkaW5nV2l0aE1lc3NhZ2U6IGZ1bmN0aW9uKHRleHQsIHRpbWVvdXQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgc2VsZi5zaG93TG9hZGluZyh0ZXh0KTtcblxuICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHNlbGYuaGlkZUxvYWRpbmcoKTtcbiAgICAgIH0sIHRpbWVvdXQgfHwgMzAwMCk7XG4gICAgfSxcblxuICAgIGNvbmZpcm1Qb3B1cDpmdW5jdGlvbih0aXRsZSx0ZXh0KXtcbiAgICAgIHZhciBjb25maXJtUG9wdXAgPSAkaW9uaWNQb3B1cC5jb25maXJtKHtcbiAgICAgdGl0bGU6IHRpdGxlLFxuICAgICB0ZW1wbGF0ZTogdGV4dFxuICAgfSk7XG4gICByZXR1cm4gY29uZmlybVBvcHVwO1xuIH0sXG5cblxuICAgIHNob3dBbGVydDpmdW5jdGlvbihfdGl0bGUsX3RlbXBsYXRlKSB7XG4gICAgICB2YXIgYWxlcnRQb3B1cCA9ICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgdGl0bGU6IF90aXRsZSxcbiAgICAgICAgdGVtcGxhdGU6IF90ZW1wbGF0ZVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gYWxlcnRQb3B1cDtcbiB9XG5cbiAgfTtcbiAgcmV0dXJuIExPQURFUkFQSTtcbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdMb2NhdGlvbnNTZXJ2aWNlJywgWyBmdW5jdGlvbigpIHtcblxuICB2YXIgbG9jYXRpb25zT2JqID0ge307XG4gIGxvY2F0aW9uc09iai5pbml0aWFsX2xhdCA9IFwiXCI7XG4gIGxvY2F0aW9uc09iai5pbml0aWFsX2xuZyA9IFwiXCI7XG4gIGxvY2F0aW9uc09iai5sYXN0X3VzZXJfbGF0ID0gXCJcIjtcbiAgbG9jYXRpb25zT2JqLmxhc3RfdXNlcl9sbmcgPSBcIlwiO1xuICBsb2NhdGlvbnNPYmouY291bmNpbF9tb2RhbCA9IG51bGw7XG4gIGxvY2F0aW9uc09iai5zZWxlY3RlZF9jb3VuY2lsID0gbnVsbDtcblxuICBsb2NhdGlvbnNPYmouc2VsZWN0Q291bmNpbCA9IGZ1bmN0aW9uKGNvdW5jaWxOYW1lKSB7XG4gICAgbG9jYXRpb25zT2JqLnNlbGVjdGVkX2NvdW5jaWwgPSAgY291bmNpbE5hbWU7XG4gIH1cblxuICBsb2NhdGlvbnNPYmouc2F2ZV9pbml0aWFsX3Bvc2l0aW9uID0gZnVuY3Rpb24ocG9zaXRpb24pIHtcbiAgICBsb2NhdGlvbnNPYmouaW5pdGlhbF9sYXQgPSAgcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlO1xuICAgIGxvY2F0aW9uc09iai5pbml0aWFsX2xuZyA9ICBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlO1xuICB9XG5cbiAgbG9jYXRpb25zT2JqLnNhdmVfbGFzdF91c2VyX3Bvc2l0aW9uID0gZnVuY3Rpb24obGF0LGxuZyl7XG4gICAgbG9jYXRpb25zT2JqLmxhc3RfdXNlcl9sYXQgPSBsYXQ7XG4gICAgbG9jYXRpb25zT2JqLmxhc3RfdXNlcl9sbmcgPSBsbmc7XG4gIH1cblxuICBsb2NhdGlvbnNPYmouc2F2ZWRMb2NhdGlvbnMgPSBbXTtcblxuICByZXR1cm4gbG9jYXRpb25zT2JqO1xuXG59XSk7XG4iLCIgLy9wbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnTWFwU2VydmljZScsIFsgZnVuY3Rpb24oKSB7XG4gcG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ01hcFNlcnZpY2UnLCBbJ2xlYWZsZXREYXRhJywgJyRjb21waWxlJywgZnVuY3Rpb24obGVhZmxldERhdGEsICRjb21waWxlKSB7XG5cbiAgIC8vRGVmaW5pY2lvbiBkZSBsYSBwcm95ZWNjY2lvbiBVVE0gMjEgc1xuICAgcHJvajQuZGVmcygnRVBTRzozMjcyMScsICcrcHJvaj11dG0gK3pvbmU9MjEgK3NvdXRoICtlbGxwcz1XR1M4NCArZGF0dW09V0dTODQgK3VuaXRzPW0gK25vX2RlZnMnKTtcblxuXG4gICB2YXIgbWFwU2VydmljZSA9IHt9O1xuXG4gICBtYXBTZXJ2aWNlLmdvVG9QbGFjZSA9IGZ1bmN0aW9uKG5hbWUsbGF0LGxvbixzY29wZSkge1xuICAgIHZhciBfZ2VvSnNvbiA9IHtcbiAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiRmVhdHVyZUNvbGxlY3Rpb25cIixcbiAgICAgICAgICAgICAgXCJjcnNcIjogeyBcInR5cGVcIjogXCJuYW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiAndXJuOm9nYzpkZWY6Y3JzOkVQU0c6OjMyNzIxJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBcImZlYXR1cmVzXCI6IFtcbiAgICAgICAgICAgICAgICB7IFwidHlwZVwiOiBcIkZlYXR1cmVcIixcbiAgICAgICAgICAgICAgICBcImdlb21ldHJ5XCI6e1xuICAgICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjpcIlBvaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgIFwiY29vcmRpbmF0ZXNcIjpbbGF0LGxvbl1cbiAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwicHJvcGVydGllc1wiOntcbiAgICAgICAgICAgICAgICAgICAgICBcIm5vbWJyZVwiOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH07XG4gICAgIGxlYWZsZXREYXRhLmdldE1hcCgpLnRoZW4oZnVuY3Rpb24obWFwKSB7XG4gICAgICB2YXIgX2xhdGxuZztcbiAgICAgICB2YXIgbGF5ZXIgPSBMLlByb2ouZ2VvSnNvbihfZ2VvSnNvbiwge1xuICAgICAgICAgJ3BvaW50VG9MYXllcic6IGZ1bmN0aW9uKGZlYXR1cmUsIGxhdGxuZykge1xuICAgICAgICAgICBfbGF0bG5nID0gbGF0bG5nO1xuICAgICAgICAgICB2YXIgaHRtbFBvcFVwID0gXCI8cCBhbGlnbj0nY2VudGVyJz5cIitmZWF0dXJlLnByb3BlcnRpZXMubm9tYnJlK1wiIDxici8+IDxhIG5nLWNsaWNrPSduZXdfcmVwb3J0X2Zyb21fbGF0bG9uKFwiK19sYXRsbmcubGF0K1wiLFwiK19sYXRsbmcubG5nK1wiKTsnPkluaWNpYXIgcmVwb3J0ZSBhcXXDrTwvYT48L3A+XCI7XG4gICAgICAgICAgIHZhciBjb21waWxlZCA9ICRjb21waWxlKGh0bWxQb3BVcCkoc2NvcGUpO1xuICAgICAgICAgICByZXR1cm4gTC5tYXJrZXIobGF0bG5nKS5iaW5kUG9wdXAoY29tcGlsZWRbMF0pO1xuICAgICAgICAgfVxuICAgICAgIH0pO1xuXG4gICAgICAgbGF5ZXIuYWRkVG8obWFwKTtcbiAgICAgICBtYXAuc2V0VmlldyhfbGF0bG5nLCAxOCk7XG4gICAgICAgbGF5ZXIub3BlblBvcHVwKCk7XG4gICAgIH0pO1xuICAgfTtcblxuICBtYXBTZXJ2aWNlLmNlbnRlck1hcE9uQ29vcmRzID0gZnVuY3Rpb24obGF0LGxuZyx6b29tKSB7XG4gICAgIGxlYWZsZXREYXRhLmdldE1hcCgpLnRoZW4oZnVuY3Rpb24obWFwKSB7XG4gICAgICAgIG1hcC5zZXRWaWV3KG5ldyBMLkxhdExuZyhsYXQsIGxuZyksem9vbSk7XG4gICAgICAgfSk7XG4gICAgIH1cblxuICAgcmV0dXJuIG1hcFNlcnZpY2U7XG5cbiB9XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnTWVzc2FnZVNlcnZpY2UnLCBbJyRodHRwJywgJ2xlYWZsZXREYXRhJywnQ29uZmlnU2VydmljZScsIGZ1bmN0aW9uKCRodHRwLCBsZWFmbGV0RGF0YSwgQ29uZmlnU2VydmljZSkge1xuXG4gIHZhciBwaW5zVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMICsgXCIvc2l0ZXMvdG9tYW1vc191bmEvZmlsZXMvanNvbi9vbmxpbmVfdXNlcnNfZ2VvLmpzb25cIjtcbiAgdmFyIGFwaVVSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTCArIFwiL2FwaS9cIlxuLyoqXG4gICAqIENvbnN0cnVjdG9yLCB3aXRoIGNsYXNzIG5hbWVcbiAgICovXG4gIGZ1bmN0aW9uIE1lc3NhZ2UoX2RhdGEpIHtcbiAgICBhbmd1bGFyLmV4dGVuZCh0aGlzLCBfZGF0YSk7XG4gIH1cblxuXG4gIE1lc3NhZ2UuZ2V0QWxsTWVzc2FnZXNUb1VzZXIgPSBmdW5jdGlvbih1c2VybmFtZSxwYXNzd29yZCx1aWQsYXV0aG9yX3VpZCl7XG4gICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXJuYW1lKycmcGFzc3dvcmQ9JytwYXNzd29yZCsnJmF1dGhvcl91aWQ9JythdXRob3JfdWlkKycmdWlkPScrdWlkKycmaGFzaF9pZD0nK01hdGgucmFuZG9tKCk7XG4gICAgcmV0dXJuICRodHRwLnBvc3QoYXBpVVJMICsgJ2dldF9hbGxfbWVzc2FnZXNfdG9fdXNlcicsIGJvZHkse2hlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9fSk7XG4gIH1cblxuICBNZXNzYWdlLmdldFVzZXJJbmZvID0gZnVuY3Rpb24odWlkKXtcbiAgICByZXR1cm4gJGh0dHAuZ2V0KGFwaVVSTCArICdnZXRfdXNlcl9pbmZvJywge2NhY2hlOiBmYWxzZSwgcGFyYW1zOiB7dWlkOnVpZCwgaGFzaF9pZDpNYXRoLnJhbmRvbSgpfX0pO1xuICB9XG5cbiAgTWVzc2FnZS5zZW5kVGV4dE1lc3NhZ2VUb1VzZXIgPSBmdW5jdGlvbih0ZXh0LGRlc3RpbmF0aW9uX3VpZCxhdXRob3JfdWlkLHVzZXJuYW1lLHBhc3N3b3JkKXtcbiAgICB2YXIgYm9keSA9ICd1c2VyPScrdXNlcm5hbWUrJyZwYXNzd29yZD0nK3Bhc3N3b3JkKycmdGV4dD0nK3RleHQrJyZkZXN0aW5hdGlvbl91aWQ9JytkZXN0aW5hdGlvbl91aWQrJyZhdXRob3JfdWlkPScrYXV0aG9yX3VpZDtcbiAgICByZXR1cm4gJGh0dHAucG9zdChhcGlVUkwgKyAnc2VuZF90ZXh0X21lc3NhZ2UnLCBib2R5LHt3aXRoQ3JlZGVudGlhbHM6IHRydWUsIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9fSk7XG4gIH1cblxuICBNZXNzYWdlLmNoZWNrV2hvQ2FuVGFsayA9IGZ1bmN0aW9uKHVzZXJuYW1lLHBhc3N3b3JkKXtcbiAgICB2YXIgYm9keSA9ICd1c2VyPScrdXNlcm5hbWUrJyZwYXNzd29yZD0nK3Bhc3N3b3JkO1xuICAgIHJldHVybiAkaHR0cC5wb3N0KGFwaVVSTCArICdjaGVja191c2VyX3RhbGsnLCBib2R5LHt3aXRoQ3JlZGVudGlhbHM6IHRydWUsIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9fSk7XG4gIH1cblxuXG4gICAgTWVzc2FnZS5jYW5UYWxrVG9Vc2VycyA9IG5ldyBBcnJheSgpO1xuICAgIE1lc3NhZ2UuY3VycmVudCA9IHt9O1xuXG5cbiAgICAvKipcbiAgICAgKiBTdGF0aWMgbWV0aG9kLCBhc3NpZ25lZCB0byBjbGFzc1xuICAgICAqIEluc3RhbmNlICgndGhpcycpIGlzIG5vdCBhdmFpbGFibGUgaW4gc3RhdGljIGNvbnRleHRcbiAgICAgKi9cbiAgICBNZXNzYWdlLmJ1aWxkID0gZnVuY3Rpb24oX2RhdGEpIHtcblxuICAgICAgcmV0dXJuIG5ldyBNZXNzYWdlKFxuICAgICAgICBfZGF0YVxuICAgICAgKTtcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uXG4gICAgICovXG4gICAgcmV0dXJuIE1lc3NhZ2U7XG5cbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdNb2RhbFNlcnZpY2UnLCBbIGZ1bmN0aW9uKCkge1xuXG4gIHZhciBtb2RhbE9CSiA9IHt9O1xuICBtb2RhbE9CSi5hY3RpdmVNb2RhbCA9IG51bGw7XG5cbiAgbW9kYWxPQkouY2hlY2tOb01vZGFsSXNPcGVuID0gZnVuY3Rpb24oKSB7XG4gICAgaWYobW9kYWxPQkouYWN0aXZlTW9kYWwpe1xuICAgICAgbW9kYWxPQkouYWN0aXZlTW9kYWwuaGlkZSgpO1xuICAgICAgbW9kYWxPQkouYWN0aXZlTW9kYWwucmVtb3ZlKCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG1vZGFsT0JKO1xuXG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnTm90aWZpY2F0aW9uU2VydmljZScsIFsnJGh0dHAnLCAnQ29uZmlnU2VydmljZScsIGZ1bmN0aW9uKCRodHRwLCBDb25maWdTZXJ2aWNlKSB7XG5cbiAgdmFyIGJhc2VVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9hcGkvXCI7XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRVbnJlY2l2ZWROb3RpZmljYXRpb25zOiBmdW5jdGlvbiAodXNlcm5hbWUscGFzc3dvcmQpIHtcbiAgICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VybmFtZSsnJnBhc3N3b3JkPScrcGFzc3dvcmQrJyZoYXNoX2lkPScrTWF0aC5yYW5kb20oKTtcbiAgICAgIC8vYm9keSA9IGJvZHkgKycmaW50ZXJlc3RlZD0nK3VzZXJPYmouaW50ZXJlc3RlZCsnJnN0YXR1cz0nK3VzZXJPYmouc3RhdHVzKycmc2hvd19sb2NhdGlvbj0nK3VzZXJPYmouc2hvd19sb2NhdGlvbjtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KGJhc2VVUkwgKyAnZ2V0X3VucmVjaXZlZF9ub3RpZmljYXRpb25zJywgYm9keSx7aGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgICB9LFxuXG4gICAgZG9udFNob3dOb3RpZmljYXRpb25BZ2FpbjogZnVuY3Rpb24gKHVzZXJuYW1lLHBhc3N3b3JkLG5pZCkge1xuICAgICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXJuYW1lKycmcGFzc3dvcmQ9JytwYXNzd29yZCsnJm5pZD0nK25pZCsnJmhhc2hfaWQ9JytNYXRoLnJhbmRvbSgpO1xuICAgICAgLy9ib2R5ID0gYm9keSArJyZpbnRlcmVzdGVkPScrdXNlck9iai5pbnRlcmVzdGVkKycmc3RhdHVzPScrdXNlck9iai5zdGF0dXMrJyZzaG93X2xvY2F0aW9uPScrdXNlck9iai5zaG93X2xvY2F0aW9uO1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdkb250X3Nob3dfbm90aWZpY2F0aW9uX2FnYWluJywgYm9keSx7aGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgICB9XG5cbiAgfTtcbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdQaW5TZXJ2aWNlJywgWyckaHR0cCcsICdsZWFmbGV0RGF0YScsJ0NvbmZpZ1NlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCwgbGVhZmxldERhdGEsIENvbmZpZ1NlcnZpY2UpIHtcblxuICB2YXIgcGluc1VSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTCArIFwiL29mZXJ0YS5nZW9qc29uLy0zNC44Mjg1MTgsLTU1Ljk1MTM3Ni9NQVRVVElOT1wiO1xuICB2YXIgYXBpVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMICsgXCIvYXBpL1wiXG4vKipcbiAgICogQ29uc3RydWN0b3IsIHdpdGggY2xhc3MgbmFtZVxuICAgKi9cbiAgZnVuY3Rpb24gUGluKF9kYXRhKSB7XG4gICAgYW5ndWxhci5leHRlbmQodGhpcywgX2RhdGEpO1xuICB9XG5cblxuICBQaW4uZ2V0QWxsID0gZnVuY3Rpb24oKXtcbiAgICByZXR1cm4gJGh0dHAuZ2V0KHBpbnNVUkwsIHtjYWNoZTogZmFsc2UsIHBhcmFtczoge2hhc2hfaWQ6TWF0aC5yYW5kb20oKX19KTtcbiAgfVxuXG4gIFBpbi5zZW5kVXNlckxvY2F0aW9uID0gZnVuY3Rpb24obGF0aXR1ZGUsbG9uZ2l0dWRlLHVzZXJuYW1lLHBhc3N3b3JkLHVpZCl7XG4gICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXJuYW1lKycmcGFzc3dvcmQ9JytwYXNzd29yZCsnJmxhdD0nK2xhdGl0dWRlKycmbG9uPScrbG9uZ2l0dWRlK1wiJnVpZD1cIit1aWQ7XG4gICAgcmV0dXJuICRodHRwLnBvc3QoYXBpVVJMICsgJ3NlbmRfdXNlcl9wb3NpdGlvbicsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcblxuICB9XG5cblxuICAgIFBpbi5fYWxsID0gW107XG4gICAgUGluLmN1cnJlbnQgPSB7fTtcbiAgICBQaW4ubGFzdFBpbnNSZXNwb25zZSA9IG51bGw7XG5cblxuXG5cbiAgICAvKipcbiAgICAgKiBTdGF0aWMgbWV0aG9kLCBhc3NpZ25lZCB0byBjbGFzc1xuICAgICAqIEluc3RhbmNlICgndGhpcycpIGlzIG5vdCBhdmFpbGFibGUgaW4gc3RhdGljIGNvbnRleHRcbiAgICAgKi9cbiAgICBQaW4uYnVpbGQgPSBmdW5jdGlvbihfZGF0YSkge1xuXG4gICAgICByZXR1cm4gbmV3IFBpbihcbiAgICAgICAgX2RhdGFcbiAgICAgICk7XG4gICAgfTtcblxuICAgIFBpbi5wcm90b3R5cGUuc2V0TGF0TG5nID0gZnVuY3Rpb24gKGxhdGxuZykge1xuXG4gICAgICB0aGlzLmxhdCA9IGxhdGxuZy5sYXQ7XG4gICAgICB0aGlzLmxvbiA9IGxhdGxuZy5sbmc7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY29uc3RydWN0b3IgZnVuY3Rpb25cbiAgICAgKi9cbiAgICByZXR1cm4gUGluO1xuXG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnUG9wVXBTZXJ2aWNlJywgWyckaW9uaWNQb3B1cCcsJ1ZhbGlkYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24oJGlvbmljUG9wdXAsVmFsaWRhdGlvblNlcnZpY2UpIHtcblxuICByZXR1cm4ge1xuICAgIHNob3dfYWxlcnQ6IGZ1bmN0aW9uIChhbGVydF90aXRsZSxhbGVydF9tZXNzYWdlKSB7XG4gICAgICAgIHZhciBhbGVydFBvcHVwID0gJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgdGl0bGU6IGFsZXJ0X3RpdGxlLFxuICAgICAgICAgdGVtcGxhdGU6IGFsZXJ0X21lc3NhZ2VcbiAgICAgICAgfSk7XG4gICAgICAgIGFsZXJ0UG9wdXAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgIGNvbmZpcm1Qb3B1cDogZnVuY3Rpb24odGl0bGUsdGV4dCl7XG4gICAgIHZhciBjb25maXJtUG9wdXAgPSAkaW9uaWNQb3B1cC5jb25maXJtKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgIHJldHVybiBjb25maXJtUG9wdXA7XG4gICB9LFxuXG4gICBhc2tGb3JPbmVWYWx1ZVBvcFVwOiBmdW5jdGlvbihzY29wZSx0aXRsZSx0ZXh0LGZpZWxkX25hbWUsdmFsaWRhdGlvblR5cGUpe1xuICAgICAgJHNjb3BlID0gc2NvcGU7XG4gICAgICB2YXIgbXlQb3B1cCA9ICRpb25pY1BvcHVwLnNob3coe1xuICAgICAgdGVtcGxhdGU6IGZpZWxkX25hbWUgKyAnOiA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cIm9uZV92YWx1ZV9wb3B1cFwiPjxkaXYgaWQ9XCJlcnJvcl9jb250YWluZXJfaW5zaWRlXCI+PC9kaXY+JyxcbiAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgIHN1YlRpdGxlOiB0ZXh0LFxuICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgIGJ1dHRvbnM6IFtcbiAgICAgICAgeyB0ZXh0OiAnQ2FuY2VsYXInIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0ZXh0OiAnPGI+RW52aWFyPC9iPicsXG4gICAgICAgICAgdHlwZTogJ2J1dHRvbi1wb3NpdGl2ZScsXG4gICAgICAgICAgb25UYXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciBlcnJvcnMgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvbmVfdmFsdWVfcG9wdXBcIikudmFsdWU7XG4gICAgICAgICAgICBpZih2YWxpZGF0aW9uVHlwZT09XCJub3ROdWxsXCIpe1xuICAgICAgICAgICAgICBpZighVmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVfbm90X2VtcHR5KHZhbHVlKSl7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzICsgJzxoMz4tIEVsIGNhbXBvIFwiJyArIGZpZWxkX25hbWUgKyAnXCIgbm8gcHVlZGUgZXN0YXIgdmFjw61vLjwvaDM+JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodmFsaWRhdGlvblR5cGU9PVwiZW1haWxcIil7XG4gICAgICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV9lbWFpbCh2YWx1ZSkpe1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBFbCBjYW1wbyBcIicgKyBmaWVsZF9uYW1lICsgJ1wiIG5vIGVzIHVuYSBkaXJlY2Npw7NuIGRlIGNvcnJlbyB2w6FsaWRhLjwvaDM+JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodmFsaWRhdGlvblR5cGU9PVwiaWRkb2NfdXlcIil7XG4gICAgICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV9pZGRvY191eSh2YWx1ZSkpe1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBFbCBjYW1wbyBcIicgKyBmaWVsZF9uYW1lICsgJ1wiIG5vIGVzIHVuYSBjw6lkdWxhIHVydWd1YXlhIHbDoWxpZGEuPC9oMz4nO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih2YWxpZGF0aW9uVHlwZT09XCJ0d29fd29yZHNcIil7XG4gICAgICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV90d29fd29yZHModmFsdWUpKXtcbiAgICAgICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMgKyAnPGgzPi0gRWwgY2FtcG8gXCInICsgZmllbGRfbmFtZSArICdcIiBkZWJlIGNvbnRlbmVyIGFsIG1lbm9zIGRvcyBwYWxhYnJhcy48L2gzPic7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGVycm9ycyE9XCJcIil7XG4gICAgICAgICAgICAgIHZhciBlcnJvckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXJyb3JfY29udGFpbmVyX2luc2lkZVwiKTtcbiAgICAgICAgICAgICAgZXJyb3JEaXYuaW5uZXJIVE1MPSBlcnJvcnM7XG4gICAgICAgICAgICAgIGVycm9yRGl2LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgIC8vZG9uJ3QgYWxsb3cgdGhlIHVzZXIgdG8gY2xvc2UgdW5sZXNzIGhlIGVudGVycyB3aWZpIHBhc3N3b3JkXG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KTtcbiAgICByZXR1cm4gbXlQb3B1cDtcbiAgIH1cblxuXG4gIH07XG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnU2VtYXBob3JlU2VydmljZScsIFtmdW5jdGlvbigpIHtcblxuICB2YXIgc2VtYXBob3JlT2JqID0ge307XG4gIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzID0gbmV3IEFycmF5KCk7XG4gIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzWydvcGVuLW1vZGFsJ10gPSBcImF2YWlsYWJsZVwiO1xuICBzZW1hcGhvcmVPYmouc2VtYXBob3Jlc1snc3VibWl0LWZvcm0nXSA9IFwiYXZhaWxhYmxlXCI7XG4gIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzWydzdWJtaXQtbG9jYXRpb24nXSA9IFwiYXZhaWxhYmxlXCI7XG4gIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzWydjYW5fdGFsayddID0gXCJhdmFpbGFibGVcIjtcblxuXG5cblxuICBzZW1hcGhvcmVPYmoudGFrZUlmQXZhaWxhYmxlID0gZnVuY3Rpb24oc2VtYXBob3JlSWQpIHtcbiAgICAvL2NvbnNvbGUubG9nKHNlbWFwaG9yZUlkICsgXCI6XCIgKyBzZW1hcGhvcmVPYmouc2VtYXBob3Jlc1tzZW1hcGhvcmVJZF0pO1xuICAgIGlmKHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzW3NlbWFwaG9yZUlkXT09XCJhdmFpbGFibGVcIil7XG4gICAgICAgIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzW3NlbWFwaG9yZUlkXSA9IFwib2NjdXBpZWRcIjtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfWVsc2V7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgc2VtYXBob3JlT2JqLm1ha2VBdmFpbGFibGVBZ2FpbiA9IGZ1bmN0aW9uKHNlbWFwaG9yZUlkKSB7XG4gICAgaWYoc2VtYXBob3JlT2JqLnNlbWFwaG9yZXNbc2VtYXBob3JlSWRdPT1cIm9jY3VwaWVkXCIpe1xuICAgICAgICBzZW1hcGhvcmVPYmouc2VtYXBob3Jlc1tzZW1hcGhvcmVJZF0gPSBcImF2YWlsYWJsZVwiO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9ZWxzZXtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc2VtYXBob3JlT2JqO1xuXG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnbG9jYXRpb25BUEknLCBbJyRodHRwJywgJyRxJywgJ0FwaUltRW5kcG9pbnQnLCAnQXBpRGF0YUVuZHBvaW50JywgJ0NvbmZpZ1NlcnZpY2UnLCAnTG9jYXRpb25zU2VydmljZScsIGZ1bmN0aW9uKCRodHRwLCAkcSwgQXBpSW1FbmRwb2ludCwgQXBpRGF0YUVuZHBvaW50LCBDb25maWdTZXJ2aWNlLCBMb2NhdGlvbnNTZXJ2aWNlKSB7XG5cbiAgdmFyIHJlc3RQcmVmZml4ID0gXCJ1YmljYWNpb25lc1Jlc3RQcm9kXCI7XG5cblxuICB2YXIgbG9jYXRpb25BUEkgPSB7fTtcblxuICBsb2NhdGlvbkFQSS5zZWFyY2hMb2NhdGlvbkJ5U3RyID0gZnVuY3Rpb24oX2xvY2F0aW9uKSB7XG4gICAgLypyZXR1cm4gJGh0dHAuZ2V0KEFwaUltRW5kcG9pbnQudXJsICsgJy8nICsgcmVzdFByZWZmaXggKyAnL2NhbGxlcycsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgbm9tYnJlOiBfbG9jYXRpb25cbiAgICAgIH1cbiAgICB9KTsqL1xuICAgIHZhciBiYXNlVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMICsgXCIvYWpheC9nZW9jb2RlP3Rlcm09XCIgKyBMb2NhdGlvbnNTZXJ2aWNlLnNlbGVjdGVkX2NvdW5jaWwgKyBcIixcIiArIF9sb2NhdGlvbjtcbiAgICByZXR1cm4gJGh0dHAuZ2V0KGJhc2VVUkwsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBwYXJhbXM6IHt9XG4gICAgfSk7XG4gIH07XG5cblxuICBsb2NhdGlvbkFQSS5zZWFyY2hFc3F1aW5hQnlTdHIgPSBmdW5jdGlvbihfbG9jYXRpb24pIHtcbiAgICAvL2NvbnNvbGUubG9nKFwic2VhcmNoRXNxdWluYUJ5U3RyID0gXCIgKyBKU09OLnN0cmluZ2lmeShfbG9jYXRpb24pKTtcbiAgICAvL3JldHVybiAkaHR0cC5nZXQoQXBpSW1FbmRwb2ludC51cmwgKyAnLycgKyByZXN0UHJlZmZpeCArICcvZXNxdWluYS8nICsgX2xvY2F0aW9uLmNhbGxlICsgJy8nICsgX2xvY2F0aW9uLmVzcXVpbmEsIHtcbiAgICAgIC8qcmV0dXJuICRodHRwLmdldChBcGlJbUVuZHBvaW50LnVybCArICcvJyArIHJlc3RQcmVmZml4ICsgJy9jcnVjZXMvJyArIF9sb2NhdGlvbi5jYWxsZSArICcvJyxcbiAgICAgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgbm9tYnJlOiBfbG9jYXRpb24uZXNxdWluYVxuICAgICAgICB9XG4gICAgICB9KTsqL1xuXG4gICAgICB2YXIgYmFzZVVSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTCArIFwiL2FqYXgvZ2VvY29kZT90ZXJtPVwiICsgTG9jYXRpb25zU2VydmljZS5zZWxlY3RlZF9jb3VuY2lsICsgXCIsXCJcbiAgICAgICAgICAgICAgICAgICAgKyBfbG9jYXRpb24uY2FsbGUgKyBcIixcIiArIF9sb2NhdGlvbi5lc3F1aW5hO1xuICAgICAgcmV0dXJuICRodHRwLmdldChiYXNlVVJMLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIHBhcmFtczoge31cbiAgICAgIH0pO1xuICB9O1xuXG4gIGxvY2F0aW9uQVBJLmdldExvY2F0aW9uR2VvbSA9IGZ1bmN0aW9uKF9sb2NhdGlvbikge1xuICAgIHZhciB1cmwgPSBBcGlJbUVuZHBvaW50LnVybCArICcvJyArIHJlc3RQcmVmZml4ICsgbG9jYXRpb25BUEkuZ2V0UGFyYW1QYXRoQnlUaXBvKF9sb2NhdGlvbi50aXBvKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9sb2NhdGlvbi5wYXRoUGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB1cmwgKz0gJy8nICsgX2xvY2F0aW9uLnBhdGhQYXJhbXNbaV07XG4gICAgfVxuICAgIHJldHVybiAkaHR0cC5nZXQoYmFzZVVSTCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9KTtcbiAgfTtcblxuICBsb2NhdGlvbkFQSS5nZXRMb2NhdGlvbkdlb21QTUIgPSBmdW5jdGlvbihjYWxsZSxlc3F1aW5hX251bWVybyx0aXBvKSB7XG4gICAgdmFyIGJhc2VVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9hamF4L2dlb2NvZGU/dGVybT1cIiArIExvY2F0aW9uc1NlcnZpY2Uuc2VsZWN0ZWRfY291bmNpbCArIFwiLFwiXG4gICAgICAgICAgICAgICsgY2FsbGUgKyBcIixcIiArIGVzcXVpbmFfbnVtZXJvICsgXCIsXCIgKyB0aXBvO1xuXG4gICAgcmV0dXJuICRodHRwLmdldChiYXNlVVJMKTtcblxuICB9O1xuXG4gIGxvY2F0aW9uQVBJLmdldFBhcmFtUGF0aEJ5VGlwbyA9IGZ1bmN0aW9uKF90aXBvKSB7XG5cbiAgICB2YXIgcmVzdEdlb0RhdGFTZXJ2aWNlUGF0aCA9IHtcbiAgICAgICdFU1FVSU5BJzpcIi9lc3F1aW5hXCIsXG4gICAgICAnRElSRUNDSU9OJzpcIi9kaXJlY2Npb25cIlxuICAgIH07XG5cbiAgICByZXR1cm4gcmVzdEdlb0RhdGFTZXJ2aWNlUGF0aFtfdGlwb107XG5cblxuICB9O1xuXG4gIHJldHVybiBsb2NhdGlvbkFQSTtcblxufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ18nLCBbZnVuY3Rpb24oKSB7XG4gIHJldHVybiB3aW5kb3cuXzsgLy9VbmRlcnNjb3JlIG11c3QgYWxyZWFkeSBiZSBsb2FkZWQgb24gdGhlIHBhZ2Vcbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdVc2VyU2VydmljZScsIFsnJGh0dHAnLCBmdW5jdGlvbigkaHR0cCkge1xuXG4gIC8vdmFyIGJhc2VVUkwgPSBcImh0dHA6Ly9wbWJ1eS5kZXZlbG9wbWVudC5kYXRhdXkub3JnL2F1dGgvYWpheC9cIjtcbiAgdmFyIFVzZXJPYmogPSB7fTtcbiAgVXNlck9iai51aWQgPSBudWxsO1xuICBVc2VyT2JqLm5hbWUgPSBudWxsO1xuICBVc2VyT2JqLmVtYWlsID0gbnVsbDtcbiAgVXNlck9iai5wYXNzd29yZCA9IG51bGw7XG4gIFVzZXJPYmoucGljdHVyZV91cmwgPSBcInVybCguL2ltZy9pY29uLXVzZXItYW5vbnltb3VzLnBuZylcIjtcbiAgVXNlck9iai5zaG93X2xvY2F0aW9uID0gbnVsbDtcblxuXG4gIFVzZXJPYmouc2F2ZV91c2VyX2RhdGEgPSBmdW5jdGlvbiAodXNlcl9uYW1lLCB1c2VyX3Bhc3N3b3JkLCB1c2VyX3BpY3R1cmVfdXJsLCBzaG93X2xvY2F0aW9uLCB1aWQsIHN0YXR1cywgZ2VuZGVyLCBpbnRlcmVzdGVkKSB7XG4gICAgICBVc2VyT2JqLnVpZCA9IHVpZDtcbiAgICAgIFVzZXJPYmoubmFtZSA9IHVzZXJfbmFtZTtcbiAgICAgIFVzZXJPYmoucGFzc3dvcmQgPSB1c2VyX3Bhc3N3b3JkO1xuICAgICAgVXNlck9iai5waWN0dXJlX3VybCA9IHVzZXJfcGljdHVyZV91cmw7XG4gICAgICBVc2VyT2JqLnNob3dfbG9jYXRpb24gPSBzaG93X2xvY2F0aW9uO1xuICAgICAgVXNlck9iai5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICBVc2VyT2JqLmdlbmRlciA9IGdlbmRlcjtcbiAgICAgIFVzZXJPYmouaW50ZXJlc3RlZCA9IGludGVyZXN0ZWQ7XG5cbiAgICAgIC8vU0FWRSBJTiBQT1VDSERCXG4gIH1cblxuICBVc2VyT2JqLmVyYXNlX3VzZXJfZGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICBVc2VyT2JqLm5hbWUgPSBudWxsO1xuICAgIFVzZXJPYmouZW1haWwgPSBudWxsO1xuICAgIFVzZXJPYmoucGFzc3dvcmQgPSBudWxsO1xuICAgIFVzZXJPYmouaWRlbnRpdHlfZG9jdW1lbnQgPSBudWxsO1xuICAgIFVzZXJPYmoucGhvbmUgPSBudWxsO1xuICAgIFVzZXJPYmoucGljdHVyZV91cmwgPSBudWxsO1xuICAgIC8vREVMRVRFIElOIFBPVUNIREJcbiAgfVxuXG4gIFVzZXJPYmouZ2V0X3VzZXJfZGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvL0xFVkFOVEEgREUgUE9VQ0hEQiBMT1MgREFUT1MgREVMIFVTVUFSSU8uIFNJIEhBWSBMT1MgUE9ORSBFTiBMQVMgVkFSSUFCTEVTIERFTCBTRVJWSUNJTy4gU0kgTk8gSEFZIFBPTkUgVE9ETyBOVUxMXG4gIH1cblxuICBVc2VyT2JqLmFkZF9waG90byA9IGZ1bmN0aW9uICh1c2VyX3BpY3R1cmVfdXJsKSB7XG4gICAgVXNlck9iai5waWN0dXJlX3VybCA9IHVzZXJfcGljdHVyZV91cmw7XG4gIH1cblxuICBVc2VyT2JqLmlzTG9nZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgIGlmKFVzZXJPYmoubmFtZSE9bnVsbCAmJiBVc2VyT2JqLm5hbWUhPVwiXCIpe1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfWVsc2V7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cblxuICByZXR1cm4gVXNlck9iajtcblxufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ1ZhbGlkYXRpb25TZXJ2aWNlJywgWyckaHR0cCcsJyRpb25pY1BvcHVwJywgZnVuY3Rpb24oJGh0dHAsJGlvbmljUG9wdXApIHtcblxuICByZXR1cm4ge1xuICAgIGlzTW9iaWxlRGV2aWNlOiBmdW5jdGlvbigpe1xuICAgICAgaWYod2luZG93LmNvcmRvdmEpe1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgIH0sXG5cbiAgICB2YWxpZGF0ZV9ub3RfZW1wdHk6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZih2YWx1ZSE9bnVsbCAmJiB2YWx1ZSE9XCJ1bmRlZmluZWRcIiAmJiB2YWx1ZSE9XCJcIil7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB2YWxpZGF0ZV90d29fd29yZHM6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZih2YWx1ZSE9bnVsbCAmJiB2YWx1ZSE9XCJ1bmRlZmluZWRcIiAmJiB2YWx1ZSE9XCJcIil7XG4gICAgICAgICAgdmFyIHZhbHVlcyA9IHZhbHVlLnNwbGl0KCcgJykuZmlsdGVyKGZ1bmN0aW9uKHYpe3JldHVybiB2IT09Jyd9KTtcbiAgICAgICAgICBpZiAodmFsdWVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgLy90d28gb3IgbW9yZSB3b3Jkc1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvL25vdCBlbm91Z2ggd29yZHNcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHZhbGlkYXRlX2VxdWFsc1RvOiBmdW5jdGlvbiAodmFsdWUsc2Vjb25kVmFsdWUpIHtcbiAgICAgIGlmKHZhbHVlPT1zZWNvbmRWYWx1ZSl7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdmFsaWRhdGVfZW1haWw6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZih2YWx1ZSE9bnVsbCAmJiB2YWx1ZSE9XCJ1bmRlZmluZWRcIiAmJiB2YWx1ZSE9XCJcIil7XG4gICAgICAgICAgdmFyIHJlID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XG4gICAgICAgICAgcmV0dXJuIHJlLnRlc3QodmFsdWUpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgdmFsaWRhdGVfaWRkb2NfdXk6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYodmFsdWUhPW51bGwgJiYgdmFsdWUhPVwidW5kZWZpbmVkXCIgJiYgdmFsdWUhPVwiXCIpe1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFxEL2csICcnKTtcbiAgICAgICAgICB2YXIgZGlnID0gdmFsdWVbdmFsdWUubGVuZ3RoIC0gMV07XG4gICAgICAgICAgdmFyIGEgPSAwOyB2YXIgaSA9IDA7XG4gICAgICAgICAgaWYodmFsdWUubGVuZ3RoIDw9IDYpe1xuICAgICAgICAgICAgZm9yKGkgPSB2YWx1ZS5sZW5ndGg7IGkgPCA3OyBpKyspe1xuICAgICAgICAgICAgICB2YWx1ZSA9ICcwJyArIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IoaSA9IDA7IGkgPCA3OyBpKyspe1xuICAgICAgICAgICAgYSArPSAocGFyc2VJbnQoXCIyOTg3NjM0XCJbaV0pICogcGFyc2VJbnQodmFsdWVbaV0pKSAlIDEwO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgIGlmKGElMTAgPT09IDApe1xuICAgICAgICAgICAgcmVzdWx0ID0gMDtcbiAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHJlc3VsdCA9IDEwIC0gYSAlIDEwO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZihkaWcgPT0gcmVzdWx0KXtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgIH1lbHNle1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9O1xufV0pO1xuIl19
