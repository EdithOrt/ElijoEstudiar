window.VERSION = "0.0.1";var pmb_im={controllers:angular.module("pmb_im.controllers",[]),services:angular.module("pmb_im.services",[])};pmb_im.app=angular.module("pmb_im",["ionic","ionic.wizard","ion-autocomplete","leaflet-directive","pmb_im.controllers","pmb_im.services","ngCordova"]).constant("ApiImEndpoint",{url:"http://www.montevideo.gub.uy"}).constant("ApiDataEndpoint",{url:"http://backend.educacion.thor.datauy.org"}).run(["$ionicPlatform","$rootScope","$cordovaKeyboard",function(e,t,n){t.VERSION=window.VERSION,e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1),cordova.plugins.Keyboard.disableScroll(!1)),ionic.Platform.isFullScreen=!0,window.StatusBar&&StatusBar.styleDefault()})}]).config(["$stateProvider","$urlRouterProvider","$compileProvider","$ionicConfigProvider",function(e,t,n,o){n.debugInfoEnabled(!1),e.state("app",{cache:!1,url:"/app","abstract":!0,templateUrl:"templates/menu.html",controller:"AbsController"}).state("app.form",{cache:!1,url:"/form",views:{menuContent:{templateUrl:"templates/form.html",controller:"FormCtrl"},mapView:{templateUrl:"templates/map.html",controller:"MapController"}}}).state("app.intro",{cache:!1,url:"/intro",views:{menuContent:{templateUrl:"templates/intro.html",controller:"IntroCtrl"}}}).state("app.search",{cache:!1,url:"/search",views:{menuContent:{templateUrl:"templates/search.html",controller:"SearchCtrl"},mapView:{templateUrl:"templates/map.html",controller:"MapController"}}}),t.otherwise("/app/intro")}]),pmb_im.controllers.controller("AbsController",["$scope","$cordovaInAppBrowser",function(e,t){e.openWebsite=function(e){var n={location:"no",clearcache:"yes",toolbar:"yes"};t.open(e,"_blank",n).then(function(e){})["catch"](function(e){})}}]),pmb_im.controllers.controller("FormCtrl",["$scope","$state","$cordovaGeolocation","$stateParams","$ionicPlatform","$ionicPopup","LocationsService","ApiService","DBService","$ionicSlideBoxDelegate","$ionicScrollDelegate",function(e,t,n,o,r,a,i,s,l,c,u){e.form={},e.form.edad=16,e.form.ultimo_nivel_aprobado="primaria",e.form.ultimo_anio_aprobado="",e.form.plan="",e.form.lugar="",e.form.que="",e.form.donde="",e.form.turno="matutino",e.form.SearchQueResults={},e.form.SearchDondeResults={},e.form.searchQue="",e.form.searchDonde="",e.form.option="list",e.establecimientos=null,e.restarEdad=function(){parseInt(e.form.edad)>4&&(e.form.edad=parseInt(e.form.edad)-1)},e.sumarEdad=function(){e.form.edad=parseInt(e.form.edad)+1},e.selectUltimoNivel=function(t){var n,o=document.getElementsByClassName("nivel");for(n=0;n<o.length;n++)o[n].className="nivel_"+o[n].id+" nivel hidden";var r=document.getElementById(t);r.className="nivel_"+r.id+" nivel",e.form.ultimo_nivel_aprobado=t},e.select_turno=function(t){var n,o=document.getElementsByClassName("turnos");for(n=0;n<o.length;n++)o[n].className="turnos turno_"+o[n].id+"_off";var r=document.getElementById(t);r.className="turnos turno_"+t,e.form.turno=t},e.select_option=function(t){var n,o=document.getElementsByClassName("options");for(n=0;n<o.length;n++)o[n].className="options option_"+o[n].id+"_off";var r=document.getElementById(t);r.className="options option_"+t,e.form.option=t,"map"==t&&(document.getElementById("map_wrapper").style.display="block",document.getElementById("map_container").style.display="block",document.getElementById("map_container").style.visibility="visible",document.getElementById("list_container").style.display="none",document.getElementById("form_container").style.minHeight="370px"),"list"==t&&(document.getElementById("map_wrapper").style.display="none",document.getElementById("list_container").style.display="block",document.getElementById("map_container").style.visibility="hidden",document.getElementById("map_container").style.display="none",document.getElementById("form_container").style.minHeight="640px")},e.onSearchChangeQue=function(){var t=document.getElementById("que_estudiar"),n=t.value.trim();n.length>=3?s.searchQueEstudiar(n).then(function(t){e.form.SearchQueResults=t.data,document.getElementById("SearchQueResults").style.display="block"}):e.hideSearchQueResults()},e.hideSearchQueResults=function(){document.getElementById("SearchQueResults").style.display="none"},e.selectQueEstudiarItem=function(t){e.form.que=t,e.hideSearchQueResults(),e.form.searchQue=t.nombre},e.listAllQueEstudiar=function(){var t="api-get-all";s.searchQueEstudiar(t).then(function(t){e.form.SearchQueResults=t.data,document.getElementById("SearchQueResults").style.display="block"})},e.onSearchChangeDonde=function(){var t=document.getElementById("donde_estudiar"),n=t.value.trim();n.length>=3?s.searchDondeEstudiar(n).then(function(t){e.form.SearchDondeResults=t.data,document.getElementById("SearchDondeResults").style.display="block"}):e.hideSearchDondeResults()},e.hideSearchDondeResults=function(){document.getElementById("SearchDondeResults").style.display="none"},e.selectDondeEstudiarItem=function(t){e.form.donde=t,e.hideSearchDondeResults(),e.form.searchDonde=t.loc_dep},e.editSearch=function(){c.previous(),c.previous()},e.next=function(){c.next()},e.previous=function(){c.previous()},e.slideHasChanged=function(t){e.select_option("list"),2==t&&(document.getElementById("map_container").style.display="none",s.updateFilters(e.form),null!=s.filters&&s.getEstablecimientosByFilters().then(function(t){console.log(t),s.lastSearchResponseEstablecimientos=t.data,e.establecimientos=t.data,s.updateMapPins(e.establecimientos)}))}}]),pmb_im.controllers.controller("IntroCtrl",["$scope","$state","$cordovaGeolocation","$stateParams","$ionicPlatform","$ionicPopup","LocationsService",function(e,t,n,o,r,a,i){e.$on("$ionicView.beforeEnter",function(){document.getElementById("form_container").style.minHeight="640px"}),e.$on("$ionicView.afterEnter",function(){document.getElementById("map_wrapper").style.display="none"}),e.geolocate=function(){var e={timeout:3500,enableHighAccuracy:!0};n.getCurrentPosition(e).then(function(e){i.save_initial_position(e),t.go("app.form")},function(e){t.go("app.form")})},e.go_to_form=function(){document.getElementById("map_wrapper").style.display="block",t.go("app.form")},e.go_to_search=function(){document.getElementById("map_wrapper").style.display="block",t.go("app.search")}}]),pmb_im.controllers.controller("MapController",["$scope","_","$cordovaGeolocation","leafletData","ConfigService","PinService","$interval","$location","MapService","ModalService","ApiService","$timeout",function(e,t,n,o,r,a,i,s,l,c,u,d){e.baseURL=r.baseURL,e.AppName=r.AppName,e.one_value_popup=null,e.myIntervals=new Array,e.$on("$ionicView.beforeEnter",function(){c.checkNoModalIsOpen(),u.mapScope=e,e.create_online_map(),document.getElementById("spinner").style.display="none",document.getElementById("pinspinner").style.display="none"}),e.filtersUpdated=function(){console.log(u.filters),e.loadPinsLayer()},e.create_online_map=function(){e.map={defaults:{tileLayer:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",minZoom:1,maxZoom:18,zoomControlPosition:"topleft"},markers:{},events:{map:{enable:["context"],logic:"emit"}},center:{lat:-34.901113,lng:-56.164531,zoom:16}},d(function(){document.getElementById("map_wrapper").style.display="none"},1e3)},e.locate=function(){n.getCurrentPosition().then(function(t){e.map.center.lat=t.coords.latitude,e.map.center.lng=t.coords.longitude,e.map.center.zoom=15,e.map.markers.now={lat:t.coords.latitude,lng:t.coords.longitude,message:"Estás aquí",focus:!0,draggable:!1}},function(e){})},e.hideOffScreenPins=function(){},e.loadPinsLayer=function(e){console.log(e),null!=e&&o.getMap().then(function(t){e.forEach(function(e){if(e.lat&&e.lon){var n=L.icon({iconUrl:"./img/blue_pin.svg",iconSize:[48,65],iconAnchor:[24,65],popupAnchor:[0,-65]}),o=L.marker([e.lat,e.lon],{icon:n});o.bindPopup("<b>"+e.nombre+"</b>").openPopup(),o.addTo(t)}})})}}]),pmb_im.controllers.controller("SearchCtrl",["$scope","$state","$cordovaGeolocation","$stateParams","$ionicPlatform","$ionicPopup","LocationsService","ApiService","DBService","$ionicSlideBoxDelegate","$ionicScrollDelegate",function(e,t,n,o,r,a,i,s,l,c,u){e.form={},e.form.lugar="",e.form.nombre_centro="",e.form.option="list",e.establecimientos=null,e.$on("$ionicView.beforeEnter",function(){document.getElementById("form_container").style.minHeight="460px"}),e.onSearchChange=function(){},e.hideSearchQueResults=function(){document.getElementById("SearchQueResults").style.display="none"},e.showMap=function(){document.getElementById("map_wrapper").style.display="block",document.getElementById("map_container").style.display="block",document.getElementById("map_container").style.visibility="visible",document.getElementById("form_container").style.minHeight="210px",document.getElementById("search_view_list_button").style.display="block",document.getElementById("search_view_map_button").style.display="none"},e.showList=function(){document.getElementById("map_wrapper").style.display="none",document.getElementById("map_container").style.display="none",document.getElementById("map_container").style.visibility="hidden",document.getElementById("form_container").style.minHeight="460px",document.getElementById("search_view_map_button").style.display="block",document.getElementById("search_view_list_button").style.display="none"}}]),pmb_im.services.factory("ApiService",["$http","ConfigService",function(e,t){function n(e){angular.extend(this,e)}var o=t.baseURL+"/api/";return n.searchQueEstudiar=function(t){return e.get(o+"search/"+t,{cache:!1,params:{hash_id:Math.random()}})},n.searchDondeEstudiar=function(t){return e.get(o+"searchByLocalidadDepartamento/"+t,{cache:!1,params:{hash_id:Math.random()}})},n.filters=null,n.mapScope=null,n.formScope={},n.lastSearchResponseEstablecimientos=null,n.updateFilters=function(e){n.filters=e,null!=n.mapScope&&n.mapScope.filtersUpdated()},n.createFilterParamsForGetRequest=function(){console.log(n.filters);var e={hash_id:Math.random(),edad:n.filters.edad,ultimo_nivel_aprobado:n.filters.ultimo_nivel_aprobado,ultimo_anio_aprobado:n.filters.ultimo_anio_aprobado,turno:n.filters.turno};return""!=n.filters.que&&(e.queEstudiarId=n.filters.que.id,e.queEstudiarNombre=n.filters.que.nombre,e.queEstudiarTagUno=n.filters.que.tag[0],e.queEstudiarTagDos=n.filters.que.tag[1]),""!=n.filters.donde&&(e.dondeEstudiarDepartamento=n.filters.donde.departamento,e.dondeEstudiarLocalidad=n.filters.donde.localidad,e.dondeEstudiarLat=n.filters.donde.coordenadas.lat,e.dondeEstudiarLon=n.filters.donde.coordenadas.lon),e="tipo"==n.filters.que.tipo?n.filters.que.id+"/all":"all/"+n.filters.que.id},n.getEstablecimientosByFilters=function(){if(null!=n.filters){var t=n.createFilterParamsForGetRequest();return console.log(t),e.get(o+"establecimiento-por-tipo/"+t)}},n.updateMapPins=function(e){n.mapScope.loadPinsLayer(e)},n}]),pmb_im.services.factory("AuthService",["$http","$cordovaFileTransfer","ConfigService","ValidationService",function(e,t,n,o){var r=n.baseURL+"/api/";return{log_in:function(t,n){var o="user="+t+"&password="+n;return e.post(r+"login",o,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},sign_out:function(t,n){return e.get(r+"sign_out",{withCredentials:!0,params:{password_sign_in:t,email:n}})},create_user:function(n){if(n.picture_url&&o.isMobileDevice()){var a={fileKey:"photo",withCredentials:!0,params:{user:n.username,password:n.password,email:n.email,gender:n.gender,interested:n.interested,status:n.status,show_location:n.show_location}},i=!0;return t.upload(r+"create_user",n.picture_url,a,i)}if(n.picture_url){var s=new FormData;return s.append("photo",n.picture_url),s.append("user",n.username),s.append("password",n.password),s.append("email",n.email),s.append("gender",n.gender),s.append("interested",n.interested),s.append("status",n.status),s.append("show_location",n.show_location),e.post(r+"create_user",s,{headers:{"Content-Type":void 0},transformRequest:angular.identity})}var l="user="+n.username+"&password="+n.password+"&email="+n.email+"&gender="+n.gender;return l=l+"&interested="+n.interested+"&status="+n.status+"&show_location="+n.show_location,e.post(r+"create_user",l,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},password_recovery:function(t){return e.get(r+"forgot_password",{params:{login_email:t}})},password_change:function(t,n,o,a){var i="email="+t+"&password_sign_in="+n+"&new_password="+o+"&confirm="+a;return e.post(r+"change_password",i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},edit_user:function(n){if(n.picture_url&&o.isMobileDevice()){var a={fileKey:"photo",withCredentials:!0,params:{user:n.username,password:n.password,email:n.email,gender:n.gender,interested:n.interested,status:n.status,show_location:n.show_location}},i=!0;return t.upload(r+"edit_profile",n.picture_url,a,i)}var s="user="+n.username+"&password="+n.password+"&email="+n.email+"&gender="+n.gender;if(s=s+"&interested="+n.interested+"&status="+n.status+"&show_location="+n.show_location,n.picture_url){var l=new FormData;return l.append("photo",n.picture_url),l.append("user",n.username),l.append("password",n.password),l.append("email",n.email),l.append("gender",n.gender),l.append("interested",n.interested),l.append("status",n.status),l.append("show_location",n.show_location),e.post(r+"edit_profile",l,{headers:{"Content-Type":void 0},transformRequest:angular.identity})}return e.post(r+"edit_profile",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}]),pmb_im.services.factory("ConfigService",["$http",function(e){var t={};return t.baseURL="http://ee_backend.development.datauy.org",ionic.Platform.isWebView()?t.baseURL="http://ee_backend.development.datauy.org":t.baseURL="/backend",t.AppName="Elijo Estudiar",t}]),pmb_im.services.factory("ConnectivityService",["$cordovaNetwork",function(e){return{isOnline:function(){return!0},isOffline:function(){return!1}}}]),pmb_im.services.factory("DBService",["$q",function(e){function t(e,t,o,r,a,i,s,l){var c={_id:"user-logged",name:e,password:t,picture_url:o,show_location:r,uid:a,status:i,gender:s,interested:l};n().then(function(e){return c._rev=e._rev,m.put(c)})["catch"](function(e){return m.put(c)})}function n(){return m.get("user-logged")}function o(){m.get("user-logged").then(function(e){return m.remove(e)})}function r(){return m=new PouchDB("tomamosuna_local_db")}function a(e){var t=new Date,n="report_"+t.getFullYear()+(t.getMonth()+1)+t.getDate()+t.getMilliseconds();return e._id=n,m.put(e)}function i(e){return m.put(e)}function s(){return m.get("categories-list")}function l(e){s().then(function(t){return e._rev=t._rev,m.put(e)})["catch"](function(t){return e._id="categories-list",m.put(e)})}function c(e){return m.get(e)}function u(){return m.allDocs({include_docs:!0,attachments:!1,startkey:"report_",endkey:"report_￿"})}function d(e){m.get(e).then(function(e){return m.remove(e)})}function p(e){return m.remove(e)}var m;return{initDB:r,saveUser:t,getUser:n,eraseUser:o,saveReport:a,getReport:c,getAllReports:u,updateReport:i,deleteReport:d,deleteGivenReport:p,getCategories:s,saveCategories:l}}]),pmb_im.services.factory("ErrorService",["$http","$ionicPopup","ValidationService",function(e,t,n){return{http_response_is_successful:function(e,t){var n=document.getElementById(t);return e.data&&"success"==e.data.Status||"success"==e.Status?(n.style.display="none",!0):(e.data?n.innerHTML="<h3>"+e.data.Message+"</h3>":n.innerHTML="<h3>"+e.Message+"</h3>",n.style.display="block",!1)},http_response_is_successful_ajax:function(e){return 0!=e.data.result},http_response_is_successful_popup:function(e){if(0==e.data.result){var n=t.alert({title:"Error",template:e.data.message});return n.then(function(e){return!1}),!1}return!0},http_data_response_is_successful:function(e,t){var n=document.getElementById(t);return"success"!=e.Status?(n.innerHTML="<h3>"+e.Message+"</h3>",n.style.display="block",!1):(n.style.display="none",!0)},http_data_response_is_successful_ajax:function(e){return 0!=e.result},show_error_message:function(e,t){var n=document.getElementById(e);return n.innerHTML="<h3>"+t+"</h3>",n.style.display="block",!1},show_error_message_popup:function(e){var n=t.alert({title:"Error",template:e});return n.then(function(e){return!1}),!1},check_fields:function(e,t){var o="";if(e.forEach(function(e){"notNull"==e.type&&(n.validate_not_empty(e.value)||(o=o+'<h3>- El campo "'+e.name+'" no puede estar vacío.</h3>')),"email"==e.type&&(n.validate_email(e.value)||(o=o+'<h3>- El campo "'+e.name+'" no es una dirección de correo válida.</h3>')),"iddoc_uy"==e.type&&(n.validate_iddoc_uy(e.value)||(o=o+'<h3>- El campo "'+e.name+'" no es una cédula uruguaya válida.</h3>')),"two_words"==e.type&&(n.validate_two_words(e.value)||(o=o+'<h3>- El campo "'+e.name+'" debe contener al menos dos palabras.</h3>')),"equalsTo"==e.type&&(n.validate_equalsTo(e.value,e.secondValue)||(o=o+'<h3>- Los campos "'+e.name+'" no coinciden.</h3>'))}),""==o)return!0;var r=document.getElementById(t);return r.innerHTML=o,r.style.display="block",!1}}}]),pmb_im.services.factory("Loader",["$ionicLoading","$timeout","$ionicPopup",function(e,t,n){var o={showLoading:function(t){t=t||"Loading...",e.show({template:t})},hideLoading:function(){e.hide()},toggleLoadingWithMessage:function(e,n){var o=this;o.showLoading(e),t(function(){o.hideLoading()},n||3e3)},confirmPopup:function(e,t){var o=n.confirm({title:e,template:t});return o},showAlert:function(e,t){var o=n.alert({title:e,template:t});return o}};return o}]),pmb_im.services.factory("LocationsService",[function(){var e={};return e.initial_lat="",e.initial_lng="",e.last_user_lat="",e.last_user_lng="",e.council_modal=null,e.selected_council=null,e.selectCouncil=function(t){e.selected_council=t},e.save_initial_position=function(t){e.initial_lat=t.coords.latitude,e.initial_lng=t.coords.longitude},e.save_last_user_position=function(t,n){e.last_user_lat=t,e.last_user_lng=n},e.savedLocations=[],e}]),pmb_im.services.factory("MapService",["leafletData","$compile",function(e,t){proj4.defs("EPSG:32721","+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs");var n={};return n.goToPlace=function(n,o,r,a){var i={type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::32721"}},features:[{type:"Feature",geometry:{type:"Point",coordinates:[o,r]},properties:{nombre:n}}]};e.getMap().then(function(e){var n,o=L.Proj.geoJson(i,{pointToLayer:function(e,o){n=o;var r="<p align='center'>"+e.properties.nombre+" <br/> <a ng-click='new_report_from_latlon("+n.lat+","+n.lng+");'>Iniciar reporte aquí</a></p>",i=t(r)(a);return L.marker(o).bindPopup(i[0])}});o.addTo(e),e.setView(n,18),o.openPopup()})},n.centerMapOnCoords=function(t,n,o){e.getMap().then(function(e){e.setView(new L.LatLng(t,n),o)})},n}]),pmb_im.services.factory("ModalService",[function(){var e={};return e.activeModal=null,e.checkNoModalIsOpen=function(){e.activeModal&&(e.activeModal.hide(),e.activeModal.remove())},e}]),pmb_im.services.factory("PinService",["$http","leafletData","ConfigService",function(e,t,n){function o(e){angular.extend(this,e)}var r=n.baseURL+"/oferta.geojson/-34.828518,-55.951376/MATUTINO",a=n.baseURL+"/api/";return o.getAll=function(){return e.get(r,{cache:!1,params:{hash_id:Math.random()}})},o.sendUserLocation=function(t,n,o,r,i){var s="user="+o+"&password="+r+"&lat="+t+"&lon="+n+"&uid="+i;return e.post(a+"send_user_position",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o._all=[],o.current={},o.lastPinsResponse=null,o.build=function(e){return new o(e)},o.prototype.setLatLng=function(e){this.lat=e.lat,this.lon=e.lng},o}]),pmb_im.services.factory("PopUpService",["$ionicPopup","ValidationService",function(e,t){return{show_alert:function(t,n){var o=e.alert({title:t,template:n});return o.then(function(e){return!0}),!0},confirmPopup:function(t,n){var o=e.confirm({title:t,template:n});return o},askForOneValuePopUp:function(n,o,r,a,i){$scope=n;var s=e.show({template:a+': <input type="text" id="one_value_popup"><div id="error_container_inside"></div>',title:o,subTitle:r,scope:$scope,buttons:[{text:"Cancelar"},{text:"<b>Enviar</b>",type:"button-positive",onTap:function(e){var n="",o=document.getElementById("one_value_popup").value;if("notNull"==i&&(t.validate_not_empty(o)||(n=n+'<h3>- El campo "'+a+'" no puede estar vacío.</h3>')),"email"==i&&(t.validate_email(o)||(n=n+'<h3>- El campo "'+a+'" no es una dirección de correo válida.</h3>')),"iddoc_uy"==i&&(t.validate_iddoc_uy(o)||(n=n+'<h3>- El campo "'+a+'" no es una cédula uruguaya válida.</h3>')),"two_words"==i&&(t.validate_two_words(o)||(n=n+'<h3>- El campo "'+a+'" debe contener al menos dos palabras.</h3>')),""==n)return o;var r=document.getElementById("error_container_inside");r.innerHTML=n,r.style.display="block",e.preventDefault()}}]});return s}}}]),pmb_im.services.factory("SemaphoreService",[function(){var e={};return e.semaphores=new Array,e.semaphores["open-modal"]="available",e.semaphores["submit-form"]="available",e.semaphores["submit-location"]="available",e.semaphores.can_talk="available",e.takeIfAvailable=function(t){return"available"==e.semaphores[t]&&(e.semaphores[t]="occupied",!0)},e.makeAvailableAgain=function(t){return"occupied"==e.semaphores[t]&&(e.semaphores[t]="available",!0)},e}]),pmb_im.services.factory("locationAPI",["$http","$q","ApiImEndpoint","ApiDataEndpoint","ConfigService","LocationsService",function(e,t,n,o,r,a){var i="ubicacionesRestProd",s={};return s.searchLocationByStr=function(t){var n=r.baseURL+"/ajax/geocode?term="+a.selected_council+","+t;return e.get(n,{method:"GET",params:{}})},s.searchEsquinaByStr=function(t){var n=r.baseURL+"/ajax/geocode?term="+a.selected_council+","+t.calle+","+t.esquina;return e.get(n,{method:"GET",params:{}})},s.getLocationGeom=function(t){for(var o=n.url+"/"+i+s.getParamPathByTipo(t.tipo),r=0;r<t.pathParams.length;r++)o+="/"+t.pathParams[r];return e.get(baseURL).then(function(e){return e.data})},s.getLocationGeomPMB=function(t,n,o){var i=r.baseURL+"/ajax/geocode?term="+a.selected_council+","+t+","+n+","+o;return e.get(i)},s.getParamPathByTipo=function(e){var t={ESQUINA:"/esquina",DIRECCION:"/direccion"};return t[e]},s}]),pmb_im.services.factory("_",[function(){return window._}]),pmb_im.services.factory("UserService",["$http",function(e){var t={};return t.uid=null,t.name=null,t.email=null,t.password=null,t.picture_url="url(./img/icon-user-anonymous.png)",t.show_location=null,t.save_user_data=function(e,n,o,r,a,i,s,l){t.uid=a,t.name=e,t.password=n,t.picture_url=o,t.show_location=r,t.status=i,t.gender=s,t.interested=l},t.erase_user_data=function(){t.name=null,t.email=null,t.password=null,t.identity_document=null,t.phone=null,t.picture_url=null},t.get_user_data=function(){},t.add_photo=function(e){t.picture_url=e},t.isLogged=function(){return null!=t.name&&""!=t.name},t}]),pmb_im.services.factory("ValidationService",["$http","$ionicPopup",function(e,t){return{isMobileDevice:function(){return!!window.cordova},validate_not_empty:function(e){return null!=e&&"undefined"!=e&&""!=e},validate_two_words:function(e){if(null!=e&&"undefined"!=e&&""!=e){var t=e.split(" ").filter(function(e){return""!==e});return t.length>1}return!1},validate_equalsTo:function(e,t){return e==t},validate_email:function(e){if(null!=e&&"undefined"!=e&&""!=e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}return!1},validate_iddoc_uy:function(e){if(null!=e&&"undefined"!=e&&""!=e){e=e.replace(/\D/g,"");var t=e[e.length-1],n=0,o=0;if(e.length<=6)for(o=e.length;o<7;o++)e="0"+e;for(o=0;o<7;o++)n+=parseInt("2987634"[o])*parseInt(e[o])%10;var r;return r=n%10===0?0:10-n%10,t==r}return!1}}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXJzL2Ficy5jdHJsLmpzIiwiY29udHJvbGxlcnMvZm9ybS5jcnRsLmpzIiwiY29udHJvbGxlcnMvaW50cm8uY3RybC5qcyIsImNvbnRyb2xsZXJzL21hcC5jdHJsLmpzIiwiY29udHJvbGxlcnMvc2VhcmNoLmNydGwuanMiLCJzZXJ2aWNlcy9hcGkuc2VydmljZS5qcyIsInNlcnZpY2VzL2F1dGguc2VydmljZXMuanMiLCJzZXJ2aWNlcy9jb25maWcuc2VydmljZXMuanMiLCJzZXJ2aWNlcy9jb25uZWN0aXZpdHkuc2VydmljZXMuanMiLCJzZXJ2aWNlcy9kYi5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2Vycm9yLnNlcnZpY2VzLmpzIiwic2VydmljZXMvbG9hZGVyLnNlcnZpY2VzLmpzIiwic2VydmljZXMvbG9jYXRpb25zU2VydmljZS5qcyIsInNlcnZpY2VzL21hcC5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL21vZGFsU2VydmljZS5qcyIsInNlcnZpY2VzL3Bpbi5zZXJ2aWNlLmpzIiwic2VydmljZXMvcG9wdXAuc2VydmljZXMuanMiLCJzZXJ2aWNlcy9zZW1hcGhvcmUuc2VydmljZS5qcyIsInNlcnZpY2VzL3ViaWNhY2lvbmVzLnNlcnZpY2VzLmpzIiwic2VydmljZXMvdW5kZXJzY29yZS5zZXJ2aWNlLmpzIiwic2VydmljZXMvdXNlci5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL3ZhbGlkYXRpb24uc2VydmljZXMuanMiXSwibmFtZXMiOlsicG1iX2ltIiwiY29udHJvbGxlcnMiLCJhbmd1bGFyIiwibW9kdWxlIiwic2VydmljZXMiLCJhcHAiLCJjb25zdGFudCIsInVybCIsInJ1biIsIiRpb25pY1BsYXRmb3JtIiwiJHJvb3RTY29wZSIsIiRjb3Jkb3ZhS2V5Ym9hcmQiLCJWRVJTSU9OIiwid2luZG93IiwicmVhZHkiLCJjb3Jkb3ZhIiwicGx1Z2lucyIsIktleWJvYXJkIiwiaGlkZUtleWJvYXJkQWNjZXNzb3J5QmFyIiwiZGlzYWJsZVNjcm9sbCIsImlvbmljIiwiUGxhdGZvcm0iLCJpc0Z1bGxTY3JlZW4iLCJTdGF0dXNCYXIiLCJzdHlsZURlZmF1bHQiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRjb21waWxlUHJvdmlkZXIiLCIkaW9uaWNDb25maWdQcm92aWRlciIsImRlYnVnSW5mb0VuYWJsZWQiLCJzdGF0ZSIsImNhY2hlIiwiYWJzdHJhY3QiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJ2aWV3cyIsIm1lbnVDb250ZW50IiwibWFwVmlldyIsIm90aGVyd2lzZSIsIiRzY29wZSIsIiRjb3Jkb3ZhSW5BcHBCcm93c2VyIiwib3BlbldlYnNpdGUiLCJvcHRpb25zIiwibG9jYXRpb24iLCJjbGVhcmNhY2hlIiwidG9vbGJhciIsIm9wZW4iLCJ0aGVuIiwiZXZlbnQiLCIkc3RhdGUiLCIkY29yZG92YUdlb2xvY2F0aW9uIiwiJHN0YXRlUGFyYW1zIiwiJGlvbmljUG9wdXAiLCJMb2NhdGlvbnNTZXJ2aWNlIiwiQXBpU2VydmljZSIsIkRCU2VydmljZSIsIiRpb25pY1NsaWRlQm94RGVsZWdhdGUiLCIkaW9uaWNTY3JvbGxEZWxlZ2F0ZSIsImZvcm0iLCJlZGFkIiwidWx0aW1vX25pdmVsX2Fwcm9iYWRvIiwidWx0aW1vX2FuaW9fYXByb2JhZG8iLCJwbGFuIiwibHVnYXIiLCJxdWUiLCJkb25kZSIsInR1cm5vIiwiU2VhcmNoUXVlUmVzdWx0cyIsIlNlYXJjaERvbmRlUmVzdWx0cyIsInNlYXJjaFF1ZSIsInNlYXJjaERvbmRlIiwib3B0aW9uIiwiZXN0YWJsZWNpbWllbnRvcyIsInJlc3RhckVkYWQiLCJwYXJzZUludCIsInN1bWFyRWRhZCIsInNlbGVjdFVsdGltb05pdmVsIiwiaWROaXZlbCIsImkiLCJ4IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibGVuZ3RoIiwiY2xhc3NOYW1lIiwiaWQiLCJzZWxlY3RlZCIsImdldEVsZW1lbnRCeUlkIiwic2VsZWN0X3R1cm5vIiwiaWRUdXJubyIsInNlbGVjdF9vcHRpb24iLCJpZE9wdGlvbiIsInN0eWxlIiwiZGlzcGxheSIsInZpc2liaWxpdHkiLCJtaW5IZWlnaHQiLCJvblNlYXJjaENoYW5nZVF1ZSIsInNlYXJjaCIsInNlYXJjaF9zdHIiLCJ2YWx1ZSIsInRyaW0iLCJzZWFyY2hRdWVFc3R1ZGlhciIsInJlc3BvbnNlIiwiZGF0YSIsImhpZGVTZWFyY2hRdWVSZXN1bHRzIiwic2VsZWN0UXVlRXN0dWRpYXJJdGVtIiwiY3Vyc28iLCJub21icmUiLCJsaXN0QWxsUXVlRXN0dWRpYXIiLCJvblNlYXJjaENoYW5nZURvbmRlIiwic2VhcmNoRG9uZGVFc3R1ZGlhciIsImhpZGVTZWFyY2hEb25kZVJlc3VsdHMiLCJzZWxlY3REb25kZUVzdHVkaWFySXRlbSIsImxvY19kZXAiLCJlZGl0U2VhcmNoIiwicHJldmlvdXMiLCJuZXh0Iiwic2xpZGVIYXNDaGFuZ2VkIiwiaW5kZXgiLCJ1cGRhdGVGaWx0ZXJzIiwiZmlsdGVycyIsImdldEVzdGFibGVjaW1pZW50b3NCeUZpbHRlcnMiLCJjb25zb2xlIiwibG9nIiwibGFzdFNlYXJjaFJlc3BvbnNlRXN0YWJsZWNpbWllbnRvcyIsInVwZGF0ZU1hcFBpbnMiLCIkb24iLCJnZW9sb2NhdGUiLCJwb3NPcHRpb25zIiwidGltZW91dCIsImVuYWJsZUhpZ2hBY2N1cmFjeSIsImdldEN1cnJlbnRQb3NpdGlvbiIsInBvc2l0aW9uIiwic2F2ZV9pbml0aWFsX3Bvc2l0aW9uIiwiZ28iLCJlcnIiLCJnb190b19mb3JtIiwiZ29fdG9fc2VhcmNoIiwiXyIsImxlYWZsZXREYXRhIiwiQ29uZmlnU2VydmljZSIsIlBpblNlcnZpY2UiLCIkaW50ZXJ2YWwiLCIkbG9jYXRpb24iLCJNYXBTZXJ2aWNlIiwiTW9kYWxTZXJ2aWNlIiwiJHRpbWVvdXQiLCJiYXNlVVJMIiwiQXBwTmFtZSIsIm9uZV92YWx1ZV9wb3B1cCIsIm15SW50ZXJ2YWxzIiwiQXJyYXkiLCJjaGVja05vTW9kYWxJc09wZW4iLCJtYXBTY29wZSIsImNyZWF0ZV9vbmxpbmVfbWFwIiwiZmlsdGVyc1VwZGF0ZWQiLCJsb2FkUGluc0xheWVyIiwibWFwIiwiZGVmYXVsdHMiLCJ0aWxlTGF5ZXIiLCJtaW5ab29tIiwibWF4Wm9vbSIsInpvb21Db250cm9sUG9zaXRpb24iLCJtYXJrZXJzIiwiZXZlbnRzIiwiZW5hYmxlIiwibG9naWMiLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJ6b29tIiwibG9jYXRlIiwiY29vcmRzIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJub3ciLCJtZXNzYWdlIiwiZm9jdXMiLCJkcmFnZ2FibGUiLCJoaWRlT2ZmU2NyZWVuUGlucyIsImdldE1hcCIsImZvckVhY2giLCJmZWF0dXJlIiwibG9uIiwibWFya2VySWNvbiIsIkwiLCJpY29uIiwiaWNvblVybCIsImljb25TaXplIiwiaWNvbkFuY2hvciIsInBvcHVwQW5jaG9yIiwibWFya2VyIiwiYmluZFBvcHVwIiwib3BlblBvcHVwIiwiYWRkVG8iLCJub21icmVfY2VudHJvIiwib25TZWFyY2hDaGFuZ2UiLCJzaG93TWFwIiwic2hvd0xpc3QiLCJmYWN0b3J5IiwiJGh0dHAiLCJBcGlPYmplY3QiLCJfZGF0YSIsImV4dGVuZCIsInRoaXMiLCJhcGlVUkwiLCJzdHIiLCJnZXQiLCJwYXJhbXMiLCJoYXNoX2lkIiwiTWF0aCIsInJhbmRvbSIsImZvcm1TY29wZSIsImZpbHRlcnNPYmplY3QiLCJjcmVhdGVGaWx0ZXJQYXJhbXNGb3JHZXRSZXF1ZXN0IiwicXVlRXN0dWRpYXJJZCIsInF1ZUVzdHVkaWFyTm9tYnJlIiwicXVlRXN0dWRpYXJUYWdVbm8iLCJ0YWciLCJxdWVFc3R1ZGlhclRhZ0RvcyIsImRvbmRlRXN0dWRpYXJEZXBhcnRhbWVudG8iLCJkZXBhcnRhbWVudG8iLCJkb25kZUVzdHVkaWFyTG9jYWxpZGFkIiwibG9jYWxpZGFkIiwiZG9uZGVFc3R1ZGlhckxhdCIsImNvb3JkZW5hZGFzIiwiZG9uZGVFc3R1ZGlhckxvbiIsInRpcG8iLCJwYXJhbWV0ZXJzIiwiJGNvcmRvdmFGaWxlVHJhbnNmZXIiLCJWYWxpZGF0aW9uU2VydmljZSIsImxvZ19pbiIsInVzZXIiLCJwYXNzd29yZCIsImJvZHkiLCJwb3N0Iiwid2l0aENyZWRlbnRpYWxzIiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsInNpZ25fb3V0IiwiZW1haWwiLCJwYXNzd29yZF9zaWduX2luIiwiY3JlYXRlX3VzZXIiLCJ1c2VyT2JqIiwicGljdHVyZV91cmwiLCJpc01vYmlsZURldmljZSIsImZpbGVLZXkiLCJ1c2VybmFtZSIsImdlbmRlciIsImludGVyZXN0ZWQiLCJzdGF0dXMiLCJzaG93X2xvY2F0aW9uIiwidHJ1c3RBbGxIb3N0cyIsInVwbG9hZCIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJ1bmRlZmluZWQiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiaWRlbnRpdHkiLCJwYXNzd29yZF9yZWNvdmVyeSIsImxvZ2luX2VtYWlsIiwicGFzc3dvcmRfY2hhbmdlIiwib2xkUGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsImNvbmZpcm1QYXNzd29yZCIsImVkaXRfdXNlciIsIkNvbmZpZ09iaiIsImlzV2ViVmlldyIsIiRjb3Jkb3ZhTmV0d29yayIsImlzT25saW5lIiwiaXNPZmZsaW5lIiwiJHEiLCJzYXZlVXNlciIsInVzZXJfbmFtZSIsInVzZXJfcGFzc3dvcmQiLCJ1c2VyX3BpY3R1cmVfdXJsIiwidWlkIiwiX2lkIiwibmFtZSIsImdldFVzZXIiLCJkb2MiLCJfcmV2IiwiX2RiIiwicHV0IiwiZXJhc2VVc2VyIiwicmVtb3ZlIiwiaW5pdERCIiwiUG91Y2hEQiIsInNhdmVSZXBvcnQiLCJyZXBvcnQiLCJkYXRlIiwiRGF0ZSIsIm5ld19yZXBvcnRfaWQiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZ2V0RGF0ZSIsImdldE1pbGxpc2Vjb25kcyIsInVwZGF0ZVJlcG9ydCIsImdldENhdGVnb3JpZXMiLCJzYXZlQ2F0ZWdvcmllcyIsImNhdGVnb3JpZXMiLCJnZXRSZXBvcnQiLCJyZXBvcnRJZCIsImdldEFsbFJlcG9ydHMiLCJhbGxEb2NzIiwiaW5jbHVkZV9kb2NzIiwiYXR0YWNobWVudHMiLCJzdGFydGtleSIsImVuZGtleSIsImRlbGV0ZVJlcG9ydCIsInJlcG9ydF9pZCIsImRlbGV0ZUdpdmVuUmVwb3J0IiwiaHR0cF9yZXNwb25zZV9pc19zdWNjZXNzZnVsIiwianNvblJlc3VsdCIsImVycm9yQ29udGFpbmVySWQiLCJlcnJvckRpdiIsIlN0YXR1cyIsImlubmVySFRNTCIsIk1lc3NhZ2UiLCJodHRwX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWxfYWpheCIsInJlc3VsdCIsImh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bF9wb3B1cCIsImFsZXJ0UG9wdXAiLCJhbGVydCIsInRpdGxlIiwidGVtcGxhdGUiLCJyZXMiLCJodHRwX2RhdGFfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bCIsImh0dHBfZGF0YV9yZXNwb25zZV9pc19zdWNjZXNzZnVsX2FqYXgiLCJzaG93X2Vycm9yX21lc3NhZ2UiLCJzaG93X2Vycm9yX21lc3NhZ2VfcG9wdXAiLCJjaGVja19maWVsZHMiLCJmaWVsZHMiLCJlcnJvcnMiLCJmaWVsZCIsInR5cGUiLCJ2YWxpZGF0ZV9ub3RfZW1wdHkiLCJ2YWxpZGF0ZV9lbWFpbCIsInZhbGlkYXRlX2lkZG9jX3V5IiwidmFsaWRhdGVfdHdvX3dvcmRzIiwidmFsaWRhdGVfZXF1YWxzVG8iLCJzZWNvbmRWYWx1ZSIsIiRpb25pY0xvYWRpbmciLCJMT0FERVJBUEkiLCJzaG93TG9hZGluZyIsInRleHQiLCJzaG93IiwiaGlkZUxvYWRpbmciLCJoaWRlIiwidG9nZ2xlTG9hZGluZ1dpdGhNZXNzYWdlIiwic2VsZiIsImNvbmZpcm1Qb3B1cCIsImNvbmZpcm0iLCJzaG93QWxlcnQiLCJfdGl0bGUiLCJfdGVtcGxhdGUiLCJsb2NhdGlvbnNPYmoiLCJpbml0aWFsX2xhdCIsImluaXRpYWxfbG5nIiwibGFzdF91c2VyX2xhdCIsImxhc3RfdXNlcl9sbmciLCJjb3VuY2lsX21vZGFsIiwic2VsZWN0ZWRfY291bmNpbCIsInNlbGVjdENvdW5jaWwiLCJjb3VuY2lsTmFtZSIsInNhdmVfbGFzdF91c2VyX3Bvc2l0aW9uIiwic2F2ZWRMb2NhdGlvbnMiLCIkY29tcGlsZSIsInByb2o0IiwiZGVmcyIsIm1hcFNlcnZpY2UiLCJnb1RvUGxhY2UiLCJzY29wZSIsIl9nZW9Kc29uIiwiY3JzIiwicHJvcGVydGllcyIsImZlYXR1cmVzIiwiZ2VvbWV0cnkiLCJjb29yZGluYXRlcyIsIl9sYXRsbmciLCJsYXllciIsIlByb2oiLCJnZW9Kc29uIiwicG9pbnRUb0xheWVyIiwibGF0bG5nIiwiaHRtbFBvcFVwIiwiY29tcGlsZWQiLCJzZXRWaWV3IiwiY2VudGVyTWFwT25Db29yZHMiLCJMYXRMbmciLCJtb2RhbE9CSiIsImFjdGl2ZU1vZGFsIiwiUGluIiwicGluc1VSTCIsImdldEFsbCIsInNlbmRVc2VyTG9jYXRpb24iLCJfYWxsIiwiY3VycmVudCIsImxhc3RQaW5zUmVzcG9uc2UiLCJidWlsZCIsInByb3RvdHlwZSIsInNldExhdExuZyIsInNob3dfYWxlcnQiLCJhbGVydF90aXRsZSIsImFsZXJ0X21lc3NhZ2UiLCJhc2tGb3JPbmVWYWx1ZVBvcFVwIiwiZmllbGRfbmFtZSIsInZhbGlkYXRpb25UeXBlIiwibXlQb3B1cCIsInN1YlRpdGxlIiwiYnV0dG9ucyIsIm9uVGFwIiwiZSIsInByZXZlbnREZWZhdWx0Iiwic2VtYXBob3JlT2JqIiwic2VtYXBob3JlcyIsInRha2VJZkF2YWlsYWJsZSIsInNlbWFwaG9yZUlkIiwibWFrZUF2YWlsYWJsZUFnYWluIiwiQXBpSW1FbmRwb2ludCIsIkFwaURhdGFFbmRwb2ludCIsInJlc3RQcmVmZml4IiwibG9jYXRpb25BUEkiLCJzZWFyY2hMb2NhdGlvbkJ5U3RyIiwiX2xvY2F0aW9uIiwibWV0aG9kIiwic2VhcmNoRXNxdWluYUJ5U3RyIiwiY2FsbGUiLCJlc3F1aW5hIiwiZ2V0TG9jYXRpb25HZW9tIiwiZ2V0UGFyYW1QYXRoQnlUaXBvIiwicGF0aFBhcmFtcyIsImdldExvY2F0aW9uR2VvbVBNQiIsImVzcXVpbmFfbnVtZXJvIiwiX3RpcG8iLCJyZXN0R2VvRGF0YVNlcnZpY2VQYXRoIiwiRVNRVUlOQSIsIkRJUkVDQ0lPTiIsIlVzZXJPYmoiLCJzYXZlX3VzZXJfZGF0YSIsImVyYXNlX3VzZXJfZGF0YSIsImlkZW50aXR5X2RvY3VtZW50IiwicGhvbmUiLCJnZXRfdXNlcl9kYXRhIiwiYWRkX3Bob3RvIiwiaXNMb2dnZWQiLCJ2YWx1ZXMiLCJzcGxpdCIsImZpbHRlciIsInYiLCJyZSIsInRlc3QiLCJyZXBsYWNlIiwiZGlnIiwiYSJdLCJtYXBwaW5ncyI6IkFBT0EsR0FBSUEsU0FDRkMsWUFBYUMsUUFBUUMsT0FBTyx5QkFDNUJDLFNBQVVGLFFBQVFDLE9BQU8sc0JBRzNCSCxRQUFPSyxJQUFNSCxRQUFRQyxPQUFPLFVBQVcsUUFBUSxlQUFlLG1CQUFtQixvQkFBcUIscUJBQXNCLGtCQUFtQixjQUU5SUcsU0FBUyxpQkFDUkMsSUFBSyxpQ0FHTkQsU0FBUyxtQkFDUkMsSUFBSyw2Q0FJTkMsS0FBQSxpQkFBQSxhQUFBLG1CQUFJLFNBQVNDLEVBQWdCQyxFQUFZQyxHQUN4Q0QsRUFBV0UsUUFBVUMsT0FBT0QsUUFDNUJILEVBQWVLLE1BQU0sV0FHZkQsT0FBT0UsU0FBV0YsT0FBT0UsUUFBUUMsUUFBUUMsV0FDM0NGLFFBQVFDLFFBQVFDLFNBQVNDLDBCQUF5QixHQUNsREgsUUFBUUMsUUFBUUMsU0FBU0UsZUFBYyxJQUl6Q0MsTUFBTUMsU0FBU0MsY0FBZSxFQUMxQlQsT0FBT1UsV0FFVEEsVUFBVUMsb0JBS2ZDLFFBQUEsaUJBQUEscUJBQUEsbUJBQUEsdUJBQU8sU0FBU0MsRUFBZ0JDLEVBQW9CQyxFQUFrQkMsR0FDckVELEVBQWlCRSxrQkFBaUIsR0FPbENKLEVBRURLLE1BQU0sT0FDSEMsT0FBTyxFQUNQekIsSUFBSyxPQUNMMEIsWUFBVSxFQUNWQyxZQUFhLHNCQUNiQyxXQUFZLGtCQUdmSixNQUFN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QUFNNVgsU0FBUyxVQUFVSSxJQUFNSixTQUFTd0IsRUFBTXBCLElBQU8sRUFFdkQsSUFBSWtQLEVBTUosT0FKRUEsR0FEQ3NJLEVBQUUsS0FBTyxFQUNELEVBRUEsR0FBS0EsRUFBSSxHQUVqQkQsR0FBT3JJLEVBTVosT0FBTyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJb25pYyBTdGFydGVyIEFwcFxuXG4vLyBhbmd1bGFyLm1vZHVsZSBpcyBhIGdsb2JhbCBwbGFjZSBmb3IgY3JlYXRpbmcsIHJlZ2lzdGVyaW5nIGFuZCByZXRyaWV2aW5nIEFuZ3VsYXIgbW9kdWxlc1xuLy8gJ3BtYl9pbScgaXMgdGhlIG5hbWUgb2YgdGhpcyBhbmd1bGFyIG1vZHVsZSBleGFtcGxlIChhbHNvIHNldCBpbiBhIDxib2R5PiBhdHRyaWJ1dGUgaW4gaW5kZXguaHRtbClcbi8vIHRoZSAybmQgcGFyYW1ldGVyIGlzIGFuIGFycmF5IG9mICdyZXF1aXJlcydcbi8vICdzdGFydGVyLnNlcnZpY2VzJyBpcyBmb3VuZCBpbiBzZXJ2aWNlcy5qc1xuLy8gJ3N0YXJ0ZXIuY29udHJvbGxlcnMnIGlzIGZvdW5kIGluIGNvbnRyb2xsZXJzLmpzXG52YXIgcG1iX2ltID0ge1xuICBjb250cm9sbGVyczogYW5ndWxhci5tb2R1bGUoJ3BtYl9pbS5jb250cm9sbGVycycsIFtdKSxcbiAgc2VydmljZXM6IGFuZ3VsYXIubW9kdWxlKCdwbWJfaW0uc2VydmljZXMnLCBbXSlcbn07XG5cbnBtYl9pbS5hcHAgPSBhbmd1bGFyLm1vZHVsZSgncG1iX2ltJywgWydpb25pYycsJ2lvbmljLndpemFyZCcsJ2lvbi1hdXRvY29tcGxldGUnLCdsZWFmbGV0LWRpcmVjdGl2ZScsICdwbWJfaW0uY29udHJvbGxlcnMnLCAncG1iX2ltLnNlcnZpY2VzJywgJ25nQ29yZG92YSddKVxuXG4uY29uc3RhbnQoJ0FwaUltRW5kcG9pbnQnLCB7XG4gIHVybDogJ2h0dHA6Ly93d3cubW9udGV2aWRlby5ndWIudXknXG59KVxuXG4uY29uc3RhbnQoJ0FwaURhdGFFbmRwb2ludCcsIHtcbiAgdXJsOiAnaHR0cDovL2JhY2tlbmQuZWR1Y2FjaW9uLnRob3IuZGF0YXV5Lm9yZydcbn0pXG5cblxuLnJ1bihmdW5jdGlvbigkaW9uaWNQbGF0Zm9ybSwgJHJvb3RTY29wZSwgJGNvcmRvdmFLZXlib2FyZCkge1xuICAkcm9vdFNjb3BlLlZFUlNJT04gPSB3aW5kb3cuVkVSU0lPTjtcbiAgJGlvbmljUGxhdGZvcm0ucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgLy8gSGlkZSB0aGUgYWNjZXNzb3J5IGJhciBieSBkZWZhdWx0IChyZW1vdmUgdGhpcyB0byBzaG93IHRoZSBhY2Nlc3NvcnkgYmFyIGFib3ZlIHRoZSBrZXlib2FyZFxuICAgIC8vIGZvciBmb3JtIGlucHV0cylcbiAgICBpZiAod2luZG93LmNvcmRvdmEgJiYgd2luZG93LmNvcmRvdmEucGx1Z2lucy5LZXlib2FyZCkge1xuICAgICAgY29yZG92YS5wbHVnaW5zLktleWJvYXJkLmhpZGVLZXlib2FyZEFjY2Vzc29yeUJhcihmYWxzZSk7XG4gICAgICBjb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQuZGlzYWJsZVNjcm9sbChmYWxzZSk7XG4gICAgfVxuICAgIC8vJGNvcmRvdmFLZXlib2FyZC5oaWRlQWNjZXNzb3J5QmFyKGZhbHNlKVxuICAgIC8vJGNvcmRvdmFLZXlib2FyZC5kaXNhYmxlU2Nyb2xsKGZhbHNlKVxuICAgIGlvbmljLlBsYXRmb3JtLmlzRnVsbFNjcmVlbiA9IHRydWU7XG4gICAgaWYgKHdpbmRvdy5TdGF0dXNCYXIpIHtcbiAgICAgIC8vIG9yZy5hcGFjaGUuY29yZG92YS5zdGF0dXNiYXIgcmVxdWlyZWRcbiAgICAgIFN0YXR1c0Jhci5zdHlsZURlZmF1bHQoKTtcbiAgICB9XG4gIH0pO1xufSlcblxuLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkY29tcGlsZVByb3ZpZGVyLCAkaW9uaWNDb25maWdQcm92aWRlcikge1xuICAkY29tcGlsZVByb3ZpZGVyLmRlYnVnSW5mb0VuYWJsZWQoZmFsc2UpO1xuICAvLyRpb25pY0NvbmZpZ1Byb3ZpZGVyLnNjcm9sbGluZy5qc1Njcm9sbGluZyh0cnVlKTtcblxuICAvLyBJb25pYyB1c2VzIEFuZ3VsYXJVSSBSb3V0ZXIgd2hpY2ggdXNlcyB0aGUgY29uY2VwdCBvZiBzdGF0ZXNcbiAgLy8gTGVhcm4gbW9yZSBoZXJlOiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci11aS91aS1yb3V0ZXJcbiAgLy8gU2V0IHVwIHRoZSB2YXJpb3VzIHN0YXRlcyB3aGljaCB0aGUgYXBwIGNhbiBiZSBpbi5cbiAgLy8gRWFjaCBzdGF0ZSdzIGNvbnRyb2xsZXIgY2FuIGJlIGZvdW5kIGluIGNvbnRyb2xsZXJzLmpzXG4gICRzdGF0ZVByb3ZpZGVyXG5cbi5zdGF0ZSgnYXBwJywge1xuICAgIGNhY2hlOiBmYWxzZSxcbiAgICB1cmw6IFwiL2FwcFwiLFxuICAgIGFic3RyYWN0OiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiBcInRlbXBsYXRlcy9tZW51Lmh0bWxcIixcbiAgICBjb250cm9sbGVyOiAnQWJzQ29udHJvbGxlcidcbiAgfSlcblxuLnN0YXRlKCdhcHAuZm9ybScsIHtcbiAgY2FjaGU6IGZhbHNlLFxuICB1cmw6IFwiL2Zvcm1cIixcbiAgdmlld3M6IHtcbiAgICAnbWVudUNvbnRlbnQnIDp7XG4gICAgICB0ZW1wbGF0ZVVybDogXCJ0ZW1wbGF0ZXMvZm9ybS5odG1sXCIsXG4gICAgICBjb250cm9sbGVyIDogXCJGb3JtQ3RybFwiXG4gICAgfSxcbiAgICAnbWFwVmlldycgOntcbiAgICAgIHRlbXBsYXRlVXJsOiBcInRlbXBsYXRlcy9tYXAuaHRtbFwiLFxuICAgICAgY29udHJvbGxlciA6IFwiTWFwQ29udHJvbGxlclwiXG4gICAgfVxuICB9XG59KVxuXG4uc3RhdGUoJ2FwcC5pbnRybycsIHtcbiAgY2FjaGU6IGZhbHNlLFxuICB1cmw6IFwiL2ludHJvXCIsXG4gIHZpZXdzOiB7XG4gICAgJ21lbnVDb250ZW50JyA6e1xuICAgICAgdGVtcGxhdGVVcmw6IFwidGVtcGxhdGVzL2ludHJvLmh0bWxcIixcbiAgICAgIGNvbnRyb2xsZXIgOiBcIkludHJvQ3RybFwiXG4gICAgfVxuICB9XG59KVxuXG4uc3RhdGUoJ2FwcC5zZWFyY2gnLCB7XG4gIGNhY2hlOiBmYWxzZSxcbiAgdXJsOiBcIi9zZWFyY2hcIixcbiAgdmlld3M6IHtcbiAgICAnbWVudUNvbnRlbnQnIDp7XG4gICAgICB0ZW1wbGF0ZVVybDogXCJ0ZW1wbGF0ZXMvc2VhcmNoLmh0bWxcIixcbiAgICAgIGNvbnRyb2xsZXIgOiBcIlNlYXJjaEN0cmxcIlxuICAgIH0sXG4gICAgJ21hcFZpZXcnIDp7XG4gICAgICB0ZW1wbGF0ZVVybDogXCJ0ZW1wbGF0ZXMvbWFwLmh0bWxcIixcbiAgICAgIGNvbnRyb2xsZXIgOiBcIk1hcENvbnRyb2xsZXJcIlxuICAgIH1cbiAgfVxufSlcblxuLy8gaWYgbm9uZSBvZiB0aGUgYWJvdmUgc3RhdGVzIGFyZSBtYXRjaGVkLCB1c2UgdGhpcyBhcyB0aGUgZmFsbGJhY2tcbiR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9hcHAvaW50cm8nKTtcblxufSk7XG4iLCJwbWJfaW0uY29udHJvbGxlcnMuY29udHJvbGxlcignQWJzQ29udHJvbGxlcicsXG5bJyRzY29wZScsJyRjb3Jkb3ZhSW5BcHBCcm93c2VyJyxcbmZ1bmN0aW9uKCRzY29wZSwkY29yZG92YUluQXBwQnJvd3Nlcikge1xuXG4gICRzY29wZS5vcGVuV2Vic2l0ZSA9IGZ1bmN0aW9uKHVybCkge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgICBsb2NhdGlvbjogJ25vJyxcbiAgICAgICAgICAgICAgY2xlYXJjYWNoZTogJ3llcycsXG4gICAgICAgICAgICAgIHRvb2xiYXI6ICd5ZXMnXG4gICAgICAgICAgfTtcblxuICAgJGNvcmRvdmFJbkFwcEJyb3dzZXIub3Blbih1cmwsICdfYmxhbmsnLCBvcHRpb25zKVxuICAgICAgICAudGhlbihmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgLy8gZXJyb3JcbiAgICAgIH0pO1xuICB9XG5cbn1dKTtcbiIsInBtYl9pbS5jb250cm9sbGVycy5jb250cm9sbGVyKCdGb3JtQ3RybCcsIFsnJHNjb3BlJywgJyRzdGF0ZScsXG4gICckY29yZG92YUdlb2xvY2F0aW9uJyxcbiAgJyRzdGF0ZVBhcmFtcycsXG4gICckaW9uaWNQbGF0Zm9ybScsXG4gICckaW9uaWNQb3B1cCcsXG4gICdMb2NhdGlvbnNTZXJ2aWNlJyxcbiAgJ0FwaVNlcnZpY2UnLFxuICAnREJTZXJ2aWNlJyxcbiAgJyRpb25pY1NsaWRlQm94RGVsZWdhdGUnLFxuICAnJGlvbmljU2Nyb2xsRGVsZWdhdGUnLFxuICBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgJGNvcmRvdmFHZW9sb2NhdGlvbiwgJHN0YXRlUGFyYW1zLCAkaW9uaWNQbGF0Zm9ybSwgJGlvbmljUG9wdXAsIExvY2F0aW9uc1NlcnZpY2UsIEFwaVNlcnZpY2UsIERCU2VydmljZSwgJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZSxcbiAgJGlvbmljU2Nyb2xsRGVsZWdhdGUpIHtcblxuICAgICRzY29wZS5mb3JtID0ge307XG4gICAgJHNjb3BlLmZvcm0uZWRhZCA9IDE2O1xuICAgICRzY29wZS5mb3JtLnVsdGltb19uaXZlbF9hcHJvYmFkbyA9IFwicHJpbWFyaWFcIjtcbiAgICAkc2NvcGUuZm9ybS51bHRpbW9fYW5pb19hcHJvYmFkbyA9IFwiXCI7XG4gICAgJHNjb3BlLmZvcm0ucGxhbiA9IFwiXCI7XG4gICAgJHNjb3BlLmZvcm0ubHVnYXIgPSBcIlwiO1xuICAgICRzY29wZS5mb3JtLnF1ZSA9IFwiXCI7XG4gICAgJHNjb3BlLmZvcm0uZG9uZGUgPSBcIlwiO1xuICAgICRzY29wZS5mb3JtLnR1cm5vID0gXCJtYXR1dGlub1wiO1xuICAgICRzY29wZS5mb3JtLlNlYXJjaFF1ZVJlc3VsdHMgPSB7fTtcbiAgICAkc2NvcGUuZm9ybS5TZWFyY2hEb25kZVJlc3VsdHMgPSB7fTtcbiAgICAkc2NvcGUuZm9ybS5zZWFyY2hRdWUgPSBcIlwiO1xuICAgICRzY29wZS5mb3JtLnNlYXJjaERvbmRlID0gXCJcIjtcbiAgICAkc2NvcGUuZm9ybS5vcHRpb24gPSBcImxpc3RcIjtcbiAgICAkc2NvcGUuZXN0YWJsZWNpbWllbnRvcyA9IG51bGw7XG5cbiAgICAkc2NvcGUucmVzdGFyRWRhZCA9IGZ1bmN0aW9uKCl7XG4gICAgICBpZihwYXJzZUludCgkc2NvcGUuZm9ybS5lZGFkKSA+IDQpe1xuICAgICAgICAkc2NvcGUuZm9ybS5lZGFkID0gcGFyc2VJbnQoJHNjb3BlLmZvcm0uZWRhZCkgLSAxO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAkc2NvcGUuc3VtYXJFZGFkID0gZnVuY3Rpb24oKXtcbiAgICAgICRzY29wZS5mb3JtLmVkYWQgPSBwYXJzZUludCgkc2NvcGUuZm9ybS5lZGFkKSArIDE7XG4gICAgfTtcblxuICAgICRzY29wZS5zZWxlY3RVbHRpbW9OaXZlbCA9IGZ1bmN0aW9uKGlkTml2ZWwpe1xuICAgICAgdmFyIHggPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibml2ZWxcIik7XG4gICAgICB2YXIgaTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgeFtpXS5jbGFzc05hbWUgPSBcIm5pdmVsX1wiK3hbaV0uaWQgK1wiIG5pdmVsIGhpZGRlblwiO1xuICAgICAgfVxuICAgICAgdmFyIHNlbGVjdGVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWROaXZlbCk7XG4gICAgICBzZWxlY3RlZC5jbGFzc05hbWUgPSBcIm5pdmVsX1wiK3NlbGVjdGVkLmlkICtcIiBuaXZlbFwiO1xuICAgICAgJHNjb3BlLmZvcm0udWx0aW1vX25pdmVsX2Fwcm9iYWRvID0gaWROaXZlbDtcbiAgICB9XG5cbiAgICAkc2NvcGUuc2VsZWN0X3R1cm5vID0gZnVuY3Rpb24oaWRUdXJubyl7XG4gICAgICB2YXIgeCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ0dXJub3NcIik7XG4gICAgICB2YXIgaTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgeFtpXS5jbGFzc05hbWUgPSBcInR1cm5vcyB0dXJub19cIisgeFtpXS5pZCArXCJfb2ZmXCI7XG4gICAgICB9XG4gICAgICB2YXIgc2VsZWN0ZWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZFR1cm5vKTtcbiAgICAgIHNlbGVjdGVkLmNsYXNzTmFtZSA9IFwidHVybm9zIHR1cm5vX1wiKyBpZFR1cm5vO1xuICAgICAgJHNjb3BlLmZvcm0udHVybm8gPSBpZFR1cm5vO1xuICAgIH1cblxuICAgICRzY29wZS5zZWxlY3Rfb3B0aW9uID0gZnVuY3Rpb24oaWRPcHRpb24pe1xuICAgICAgdmFyIHggPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwib3B0aW9uc1wiKTtcbiAgICAgIHZhciBpO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB4W2ldLmNsYXNzTmFtZSA9IFwib3B0aW9ucyBvcHRpb25fXCIrIHhbaV0uaWQgK1wiX29mZlwiO1xuICAgICAgfVxuICAgICAgdmFyIHNlbGVjdGVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWRPcHRpb24pO1xuICAgICAgc2VsZWN0ZWQuY2xhc3NOYW1lID0gXCJvcHRpb25zIG9wdGlvbl9cIisgaWRPcHRpb247XG4gICAgICAkc2NvcGUuZm9ybS5vcHRpb24gPSBpZE9wdGlvbjtcbiAgICAgIGlmKGlkT3B0aW9uPT1cIm1hcFwiKXtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBfd3JhcHBlclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBfY29udGFpbmVyXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcF9jb250YWluZXJcIikuc3R5bGUudmlzaWJpbGl0eT1cInZpc2libGVcIjtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsaXN0X2NvbnRhaW5lclwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvcm1fY29udGFpbmVyXCIpLnN0eWxlLm1pbkhlaWdodD1cIjM3MHB4XCI7XG4gICAgICB9XG4gICAgICBpZihpZE9wdGlvbj09XCJsaXN0XCIpe1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcF93cmFwcGVyXCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGlzdF9jb250YWluZXJcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwX2NvbnRhaW5lclwiKS5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCI7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwX2NvbnRhaW5lclwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvcm1fY29udGFpbmVyXCIpLnN0eWxlLm1pbkhlaWdodD1cIjY0MHB4XCI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLm9uU2VhcmNoQ2hhbmdlUXVlID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciBzZWFyY2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInF1ZV9lc3R1ZGlhclwiKTtcbiAgICAgIHZhciBzZWFyY2hfc3RyID0gc2VhcmNoLnZhbHVlLnRyaW0oKTtcbiAgICAgIGlmKHNlYXJjaF9zdHIubGVuZ3RoPj0zKXtcbiAgICAgICAgQXBpU2VydmljZS5zZWFyY2hRdWVFc3R1ZGlhcihzZWFyY2hfc3RyKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICRzY29wZS5mb3JtLlNlYXJjaFF1ZVJlc3VsdHMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiU2VhcmNoUXVlUmVzdWx0c1wiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICB9KTtcbiAgICAgIH1lbHNle1xuICAgICAgICAkc2NvcGUuaGlkZVNlYXJjaFF1ZVJlc3VsdHMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuaGlkZVNlYXJjaFF1ZVJlc3VsdHMgPSBmdW5jdGlvbigpe1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJTZWFyY2hRdWVSZXN1bHRzXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG5cbiAgICAkc2NvcGUuc2VsZWN0UXVlRXN0dWRpYXJJdGVtID0gZnVuY3Rpb24oY3Vyc28pe1xuICAgICAgJHNjb3BlLmZvcm0ucXVlID0gY3Vyc287XG4gICAgICAkc2NvcGUuaGlkZVNlYXJjaFF1ZVJlc3VsdHMoKTtcbiAgICAgICRzY29wZS5mb3JtLnNlYXJjaFF1ZSA9IGN1cnNvLm5vbWJyZTtcbiAgICB9XG5cbiAgICAkc2NvcGUubGlzdEFsbFF1ZUVzdHVkaWFyID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciBzZWFyY2hfc3RyID0gXCJhcGktZ2V0LWFsbFwiO1xuICAgICAgICBBcGlTZXJ2aWNlLnNlYXJjaFF1ZUVzdHVkaWFyKHNlYXJjaF9zdHIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgJHNjb3BlLmZvcm0uU2VhcmNoUXVlUmVzdWx0cyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJTZWFyY2hRdWVSZXN1bHRzXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICRzY29wZS5vblNlYXJjaENoYW5nZURvbmRlID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciBzZWFyY2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRvbmRlX2VzdHVkaWFyXCIpO1xuICAgICAgdmFyIHNlYXJjaF9zdHIgPSBzZWFyY2gudmFsdWUudHJpbSgpO1xuICAgICAgaWYoc2VhcmNoX3N0ci5sZW5ndGg+PTMpe1xuICAgICAgICBBcGlTZXJ2aWNlLnNlYXJjaERvbmRlRXN0dWRpYXIoc2VhcmNoX3N0cikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAkc2NvcGUuZm9ybS5TZWFyY2hEb25kZVJlc3VsdHMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiU2VhcmNoRG9uZGVSZXN1bHRzXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIH0pO1xuICAgICAgfWVsc2V7XG4gICAgICAgICRzY29wZS5oaWRlU2VhcmNoRG9uZGVSZXN1bHRzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLmhpZGVTZWFyY2hEb25kZVJlc3VsdHMgPSBmdW5jdGlvbigpe1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJTZWFyY2hEb25kZVJlc3VsdHNcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cblxuICAgICRzY29wZS5zZWxlY3REb25kZUVzdHVkaWFySXRlbSA9IGZ1bmN0aW9uKGRvbmRlKXtcbiAgICAgICRzY29wZS5mb3JtLmRvbmRlID0gZG9uZGU7XG4gICAgICAkc2NvcGUuaGlkZVNlYXJjaERvbmRlUmVzdWx0cygpO1xuICAgICAgJHNjb3BlLmZvcm0uc2VhcmNoRG9uZGUgPSBkb25kZS5sb2NfZGVwO1xuICAgIH1cblxuICAgICRzY29wZS5lZGl0U2VhcmNoID0gZnVuY3Rpb24oKXtcbiAgICAgICRpb25pY1NsaWRlQm94RGVsZWdhdGUucHJldmlvdXMoKTtcbiAgICAgICRpb25pY1NsaWRlQm94RGVsZWdhdGUucHJldmlvdXMoKTtcbiAgICB9XG5cblx0ICAkc2NvcGUubmV4dCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZS5uZXh0KCk7XG5cdCAgfTtcblxuXHQgICRzY29wZS5wcmV2aW91cyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZS5wcmV2aW91cygpO1xuXHQgIH07XG5cbiAgICAkc2NvcGUuc2xpZGVIYXNDaGFuZ2VkID0gZnVuY3Rpb24oaW5kZXgpe1xuICAgICAgJHNjb3BlLnNlbGVjdF9vcHRpb24oXCJsaXN0XCIpO1xuICAgICAgaWYoaW5kZXg9PTIpe1xuICAgICAgICAvL2luZGV4IDIgZXMgZWwgc2xpZGUgcXVlIHRpZW5lIGVsIGJvdMOzbiBkZWwgbWFwYSB5IGRlIGVsIGxpc3RhZG9cbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBfY29udGFpbmVyXCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XG4gICAgICAgIEFwaVNlcnZpY2UudXBkYXRlRmlsdGVycygkc2NvcGUuZm9ybSk7XG4gICAgICAgIGlmKEFwaVNlcnZpY2UuZmlsdGVycyE9bnVsbCl7XG4gICAgICAgICAgICBBcGlTZXJ2aWNlLmdldEVzdGFibGVjaW1pZW50b3NCeUZpbHRlcnMoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgIEFwaVNlcnZpY2UubGFzdFNlYXJjaFJlc3BvbnNlRXN0YWJsZWNpbWllbnRvcyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgIC8vRUwgU0VSVklDSU8gREUgTEEgQVBJIEFDVFVBTElaQSBBTCBDT05UUk9MQURPUiBERUwgTUFQQVxuICAgICAgICAgICAgICAkc2NvcGUuZXN0YWJsZWNpbWllbnRvcyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgIEFwaVNlcnZpY2UudXBkYXRlTWFwUGlucygkc2NvcGUuZXN0YWJsZWNpbWllbnRvcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8qaWYoJHNjb3BlLmVzdGFibGVjaW1pZW50b3M9PW51bGwpe1xuICAgICAgICAgICAgICAvL0VTVE8gU0UgUFJFQ0FSR0EgUEFSQSBMQSBSRVVOSU9OIENPTiBST01BTk8gRU4gQ0FTTyBERSBRVUUgTk8gRVNURSBMQSBBUEkgUVVFIFJFQ0lCRSBMT1MgRklMVFJPUyBZIERFVlVFTFZFIExPUyBFU1RBQkxFQ0lNSUVOVE9TXG4gICAgICAgICAgICAgICAkc2NvcGUuZXN0YWJsZWNpbWllbnRvcyA9IFtcbiAgICAgICAgICAgICAgICAge25vbWJyZTogXCJMaWNlbyBOwrogMVwiLCBpZDogMTIxNCwgbGF0OiAtMzQuOTA2MzQ2LCBsb246IC01Ni4xNzIwNjUgfSxcbiAgICAgICAgICAgICAgICAge25vbWJyZTogXCJMaWNlbyBOwrogMlwiLCBpZDogMjQzNCwgbGF0OiAtMzQuOTAyNzU0LCBsb246IC01Ni4xNjQxMjcgfSxcbiAgICAgICAgICAgICAgICAge25vbWJyZTogXCJMaWNlbyBOwrogN1wiLCBpZDogNDMyNH0sXG4gICAgICAgICAgICAgICAgIHtub21icmU6IFwiTGljZW8gSnVhbiBab3JyaWxsYVwiLCBpZDogNTM0NX1cbiAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICBBcGlTZXJ2aWNlLnVwZGF0ZU1hcFBpbnMoJHNjb3BlLmVzdGFibGVjaW1pZW50b3MpO1xuICAgICAgICAgICAgfSovXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblx0ICAvKiRzY29wZS5nb190b19tYXAgPSBmdW5jdGlvbigpe1xuXHQgICAgJHN0YXRlLmdvKFwiYXBwLm1hcFwiKTtcblx0ICB9Ki9cblxuICB9XG5dKTtcbiIsInBtYl9pbS5jb250cm9sbGVycy5jb250cm9sbGVyKCdJbnRyb0N0cmwnLCBbJyRzY29wZScsICckc3RhdGUnLFxuICAnJGNvcmRvdmFHZW9sb2NhdGlvbicsXG4gICckc3RhdGVQYXJhbXMnLFxuICAnJGlvbmljUGxhdGZvcm0nLFxuICAnJGlvbmljUG9wdXAnLFxuICAnTG9jYXRpb25zU2VydmljZScsXG4gIGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlLCAkY29yZG92YUdlb2xvY2F0aW9uLCAkc3RhdGVQYXJhbXMsICRpb25pY1BsYXRmb3JtLCAkaW9uaWNQb3B1cCwgTG9jYXRpb25zU2VydmljZSkge1xuXG4gICAgJHNjb3BlLiRvbihcIiRpb25pY1ZpZXcuYmVmb3JlRW50ZXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvcm1fY29udGFpbmVyXCIpLnN0eWxlLm1pbkhlaWdodCA9IFwiNjQwcHhcIjtcbiAgICB9KTtcblxuICAgICRzY29wZS4kb24oXCIkaW9uaWNWaWV3LmFmdGVyRW50ZXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcF93cmFwcGVyXCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XG4gICAgfSk7XG5cblxuICAkc2NvcGUuZ2VvbG9jYXRlID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgIHZhciBwb3NPcHRpb25zID0ge3RpbWVvdXQ6IDM1MDAsIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZX07XG4gICAgICAkY29yZG92YUdlb2xvY2F0aW9uXG4gICAgICAgIC5nZXRDdXJyZW50UG9zaXRpb24ocG9zT3B0aW9ucylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocG9zaXRpb24pIHtcbiAgICAgICAgICBMb2NhdGlvbnNTZXJ2aWNlLnNhdmVfaW5pdGlhbF9wb3NpdGlvbihwb3NpdGlvbik7XG4gICAgICAgICAgJHN0YXRlLmdvKFwiYXBwLmZvcm1cIik7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICRzdGF0ZS5nbyhcImFwcC5mb3JtXCIpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICRzY29wZS5nb190b19mb3JtID0gZnVuY3Rpb24oKXtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcF93cmFwcGVyXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xuICAgICRzdGF0ZS5nbyhcImFwcC5mb3JtXCIpO1xuICB9XG5cbiAgJHNjb3BlLmdvX3RvX3NlYXJjaCA9IGZ1bmN0aW9uKCl7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBfd3JhcHBlclwiKS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtcbiAgICAkc3RhdGUuZ28oXCJhcHAuc2VhcmNoXCIpO1xuICB9XG5cbiAgIC8qJHNjb3BlLiRvbignJGlvbmljVmlldy5lbnRlcicsIGZ1bmN0aW9uKCl7XG4gICB9KTsqL1xuXG5cblxuICB9XG5dKTtcbiIsInBtYl9pbS5jb250cm9sbGVycy5jb250cm9sbGVyKCdNYXBDb250cm9sbGVyJywgW1xuICAnJHNjb3BlJyxcbiAgJ18nLFxuICAnJGNvcmRvdmFHZW9sb2NhdGlvbicsXG4gICdsZWFmbGV0RGF0YScsXG4gICdDb25maWdTZXJ2aWNlJyxcbiAgJ1BpblNlcnZpY2UnLFxuICAnJGludGVydmFsJyxcbiAgJyRsb2NhdGlvbicsXG4gICdNYXBTZXJ2aWNlJyxcbiAgJ01vZGFsU2VydmljZScsXG4gICdBcGlTZXJ2aWNlJyxcbiAgJyR0aW1lb3V0JyxcbiAgZnVuY3Rpb24oXG4gICAgJHNjb3BlLFxuICAgIF8sXG4gICAgJGNvcmRvdmFHZW9sb2NhdGlvbixcbiAgICBsZWFmbGV0RGF0YSxcbiAgICBDb25maWdTZXJ2aWNlLFxuICAgIFBpblNlcnZpY2UsXG4gICAgJGludGVydmFsLFxuICAgICRsb2NhdGlvbixcbiAgICBNYXBTZXJ2aWNlLFxuICAgIE1vZGFsU2VydmljZSxcbiAgICBBcGlTZXJ2aWNlLFxuICAgICR0aW1lb3V0XG4gICkge1xuXG4gICAgLyoqXG4gICAgICogT25jZSBzdGF0ZSBsb2FkZWQsIGdldCBwdXQgbWFwIG9uIHNjb3BlLlxuICAgICAqL1xuICAgIC8qJHNjb3BlLm9ubGluZV91c2VyX2dlbyA9IHt9O1xuICAgICRzY29wZS5vbmxpbmVfdXNlcl9nZW9fYXJyYXkgPSBuZXcgQXJyYXkoKTsqL1xuICAgICRzY29wZS5iYXNlVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMO1xuICAgICRzY29wZS5BcHBOYW1lID0gQ29uZmlnU2VydmljZS5BcHBOYW1lO1xuICAgICRzY29wZS5vbmVfdmFsdWVfcG9wdXAgPSBudWxsO1xuICAgICRzY29wZS5teUludGVydmFscyA9IG5ldyBBcnJheSgpO1xuXG4gICAgJHNjb3BlLiRvbihcIiRpb25pY1ZpZXcuYmVmb3JlRW50ZXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBNb2RhbFNlcnZpY2UuY2hlY2tOb01vZGFsSXNPcGVuKCk7XG4gICAgICAvL0RCU2VydmljZS5pbml0REIoKTtcbiAgICAgIEFwaVNlcnZpY2UubWFwU2NvcGUgPSAkc2NvcGU7XG4gICAgICAkc2NvcGUuY3JlYXRlX29ubGluZV9tYXAoKTtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpbnNwaW5uZXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH0pO1xuXG4gICAgLyokc2NvcGUuJG9uKFwiJGlvbmljVmlldy5hZnRlckVudGVyXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBfd3JhcHBlclwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xuICAgIH0pOyovXG5cbiAgICAkc2NvcGUuZmlsdGVyc1VwZGF0ZWQgPSBmdW5jdGlvbigpe1xuICAgICAgY29uc29sZS5sb2coQXBpU2VydmljZS5maWx0ZXJzKTtcbiAgICAgICRzY29wZS5sb2FkUGluc0xheWVyKCk7XG4gICAgfVxuXG5cbiAgICAkc2NvcGUuY3JlYXRlX29ubGluZV9tYXAgPSBmdW5jdGlvbigpe1xuICAgICAgJHNjb3BlLm1hcCA9IHtcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICB0aWxlTGF5ZXI6ICdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsXG4gICAgICAgICAgbWluWm9vbTogMSxcbiAgICAgICAgICBtYXhab29tOiAxOCxcbiAgICAgICAgICB6b29tQ29udHJvbFBvc2l0aW9uOiAndG9wbGVmdCcsXG4gICAgICAgIH0sXG4gICAgICAgIG1hcmtlcnM6IHt9LFxuICAgICAgICBldmVudHM6IHtcbiAgICAgICAgICBtYXA6IHtcbiAgICAgICAgICAgIGVuYWJsZTogWydjb250ZXh0J10sXG4gICAgICAgICAgICBsb2dpYzogJ2VtaXQnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjZW50ZXI6IHtcbiAgICAgICAgICBsYXQ6IC0zNC45MDExMTMsXG4gICAgICAgICAgbG5nOiAtNTYuMTY0NTMxLFxuICAgICAgICAgIHpvb206IDE2XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBfd3JhcHBlclwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xuICAgICAgfSwxMDAwKTtcbiAgICAgIC8qbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbihtYXApIHtcbiAgICAgICAgbWFwLm9uKCdtb3ZlZW5kJywgJHNjb3BlLmhpZGVPZmZTY3JlZW5QaW5zKTtcbiAgICAgIH0pOyovXG4gICAgfTtcblxuXG5cbiAgICAgIC8qKlxuICAgICAqIENlbnRlciBtYXAgb24gdXNlcidzIGN1cnJlbnQgcG9zaXRpb25cbiAgICAgKi9cbiAgICAkc2NvcGUubG9jYXRlID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICRjb3Jkb3ZhR2VvbG9jYXRpb25cbiAgICAgICAgLmdldEN1cnJlbnRQb3NpdGlvbigpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHBvc2l0aW9uKSB7XG4gICAgICAgICAgJHNjb3BlLm1hcC5jZW50ZXIubGF0ID0gcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlO1xuICAgICAgICAgICRzY29wZS5tYXAuY2VudGVyLmxuZyA9IHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGU7XG4gICAgICAgICAgJHNjb3BlLm1hcC5jZW50ZXIuem9vbSA9IDE1O1xuXG4gICAgICAgICAgJHNjb3BlLm1hcC5tYXJrZXJzLm5vdyA9IHtcbiAgICAgICAgICAgIGxhdDogcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlLFxuICAgICAgICAgICAgbG5nOiBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJFc3TDoXMgYXF1w61cIixcbiAgICAgICAgICAgIGZvY3VzOiB0cnVlLFxuICAgICAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgLy8gZXJyb3JcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiTG9jYXRpb24gZXJyb3IhXCIpO1xuICAgICAgICAgIC8vY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG5cblxuICAgICRzY29wZS5oaWRlT2ZmU2NyZWVuUGlucyA9IGZ1bmN0aW9uKCkge1xuICAgICAgLypsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGZ1bmN0aW9uKG1hcCkge1xuICAgICAgICB2YXIgbWFwQm91bmRzID0gbWFwLmdldEJvdW5kcygpO1xuICAgICAgICAkc2NvcGUudXNlcnNWaXNpYmxlID0gW107XG4gICAgICAgICAgJHNjb3BlLm9ubGluZV91c2VyX2dlb19hcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyLGtleSl7XG4gICAgICAgICAgICB2YXIgc2hvdWxkQmVWaXNpYmxlID0gbWFwQm91bmRzLmNvbnRhaW5zKGxheWVyLmdldExhdExuZygpKTtcbiAgICAgICAgICAgIGlmICghc2hvdWxkQmVWaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgbWFwLnJlbW92ZUxheWVyKGxheWVyKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvdWxkQmVWaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgbWFwLmFkZExheWVyKGxheWVyKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcnNWaXNpYmxlLnB1c2gobGF5ZXIuZmVhdHVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgIH0pOyovXG4gICAgfVxuXG4gICAgJHNjb3BlLmxvYWRQaW5zTGF5ZXIgPSBmdW5jdGlvbihlc3RhYmxlY2ltaWVudG9zKXtcbiAgICAgIGNvbnNvbGUubG9nKGVzdGFibGVjaW1pZW50b3MpO1xuICAgICAgaWYoZXN0YWJsZWNpbWllbnRvcyE9bnVsbCl7XG4gICAgICAgIC8vUmVjb3JyZXIgbG9zIGVzdGFibGljaW1pZW50b3MgeSBjcmVhciBsb3MgcGluZXNcbiAgICAgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbihtYXApIHtcbiAgICAgICAgICBlc3RhYmxlY2ltaWVudG9zLmZvckVhY2goZnVuY3Rpb24oZmVhdHVyZSl7XG4gICAgICAgICAgICBpZihmZWF0dXJlLmxhdCAmJiBmZWF0dXJlLmxvbil7XG4gICAgICAgICAgICAgIHZhciBtYXJrZXJJY29uID0gTC5pY29uKHtcbiAgICAgICAgICAgICAgICAgICAgaWNvblVybDogJy4vaW1nL2JsdWVfcGluLnN2ZycsXG4gICAgICAgICAgICAgICAgICAgIC8vc2hhZG93VXJsOiAnbGVhZi1zaGFkb3cucG5nJyxcbiAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6ICAgICBbNDgsIDY1XSwgLy8gc2l6ZSBvZiB0aGUgaWNvblxuICAgICAgICAgICAgICAgICAgICAvL3NoYWRvd1NpemU6ICAgWzUwLCA2NF0sIC8vIHNpemUgb2YgdGhlIHNoYWRvd1xuICAgICAgICAgICAgICAgICAgICBpY29uQW5jaG9yOiAgIFsyNCwgNjVdLCAvLyBwb2ludCBvZiB0aGUgaWNvbiB3aGljaCB3aWxsIGNvcnJlc3BvbmQgdG8gbWFya2VyJ3MgbG9jYXRpb25cbiAgICAgICAgICAgICAgICAgICAgLy9zaGFkb3dBbmNob3I6IFs0LCA2Ml0sICAvLyB0aGUgc2FtZSBmb3IgdGhlIHNoYWRvd1xuICAgICAgICAgICAgICAgICAgICBwb3B1cEFuY2hvcjogIFswLCAtNjVdIC8vIHBvaW50IGZyb20gd2hpY2ggdGhlIHBvcHVwIHNob3VsZCBvcGVuIHJlbGF0aXZlIHRvIHRoZSBpY29uQW5jaG9yXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHZhciBtYXJrZXIgPSBMLm1hcmtlcihbZmVhdHVyZS5sYXQsIGZlYXR1cmUubG9uXSwge2ljb246IG1hcmtlckljb259KTtcbiAgICAgICAgICAgICAgbWFya2VyLmJpbmRQb3B1cChcIjxiPlwiK2ZlYXR1cmUubm9tYnJlK1wiPC9iPlwiKS5vcGVuUG9wdXAoKTtcbiAgICAgICAgICAgICAgbWFya2VyLmFkZFRvKG1hcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH1lbHNle1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiTm8gaGF5IGVzdGFibGVjaW1pZW50b3MgY2FyZ2Fkb3NcIik7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgfVxuXG5dKTtcbiIsInBtYl9pbS5jb250cm9sbGVycy5jb250cm9sbGVyKCdTZWFyY2hDdHJsJywgWyckc2NvcGUnLCAnJHN0YXRlJyxcbiAgJyRjb3Jkb3ZhR2VvbG9jYXRpb24nLFxuICAnJHN0YXRlUGFyYW1zJyxcbiAgJyRpb25pY1BsYXRmb3JtJyxcbiAgJyRpb25pY1BvcHVwJyxcbiAgJ0xvY2F0aW9uc1NlcnZpY2UnLFxuICAnQXBpU2VydmljZScsXG4gICdEQlNlcnZpY2UnLFxuICAnJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZScsXG4gICckaW9uaWNTY3JvbGxEZWxlZ2F0ZScsXG4gIGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlLCAkY29yZG92YUdlb2xvY2F0aW9uLCAkc3RhdGVQYXJhbXMsICRpb25pY1BsYXRmb3JtLCAkaW9uaWNQb3B1cCwgTG9jYXRpb25zU2VydmljZSwgQXBpU2VydmljZSwgREJTZXJ2aWNlLCAkaW9uaWNTbGlkZUJveERlbGVnYXRlLFxuICAkaW9uaWNTY3JvbGxEZWxlZ2F0ZSkge1xuXG4gICAgJHNjb3BlLmZvcm0gPSB7fTtcbiAgICAkc2NvcGUuZm9ybS5sdWdhciA9IFwiXCI7XG4gICAgJHNjb3BlLmZvcm0ubm9tYnJlX2NlbnRybyA9IFwiXCI7XG4gICAgJHNjb3BlLmZvcm0ub3B0aW9uID0gXCJsaXN0XCI7XG4gICAgJHNjb3BlLmVzdGFibGVjaW1pZW50b3MgPSBudWxsO1xuXG4gICAgJHNjb3BlLiRvbihcIiRpb25pY1ZpZXcuYmVmb3JlRW50ZXJcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvcm1fY29udGFpbmVyXCIpLnN0eWxlLm1pbkhlaWdodCA9IFwiNDYwcHhcIjtcbiAgICB9KTtcblxuICAgICRzY29wZS5vblNlYXJjaENoYW5nZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAvKnZhciBzZWFyY2ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInF1ZV9lc3R1ZGlhclwiKTtcbiAgICAgIHZhciBzZWFyY2hfc3RyID0gc2VhcmNoLnZhbHVlLnRyaW0oKTtcbiAgICAgIGlmKHNlYXJjaF9zdHIubGVuZ3RoPj0zKXtcbiAgICAgICAgQXBpU2VydmljZS5zZWFyY2hRdWVFc3R1ZGlhcihzZWFyY2hfc3RyKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICRzY29wZS5mb3JtLlNlYXJjaFF1ZVJlc3VsdHMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiU2VhcmNoUXVlUmVzdWx0c1wiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICB9KTtcbiAgICAgIH1lbHNle1xuICAgICAgICAkc2NvcGUuaGlkZVNlYXJjaFF1ZVJlc3VsdHMoKTtcbiAgICAgIH0qL1xuICAgIH1cblxuICAgICRzY29wZS5oaWRlU2VhcmNoUXVlUmVzdWx0cyA9IGZ1bmN0aW9uKCl7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIlNlYXJjaFF1ZVJlc3VsdHNcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cblxuICAgICRzY29wZS5zaG93TWFwID0gZnVuY3Rpb24oKXtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwX3dyYXBwZXJcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcF9jb250YWluZXJcIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcF9jb250YWluZXJcIikuc3R5bGUudmlzaWJpbGl0eT1cInZpc2libGVcIjtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9ybV9jb250YWluZXJcIikuc3R5bGUubWluSGVpZ2h0PVwiMjEwcHhcIjtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoX3ZpZXdfbGlzdF9idXR0b25cIikuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlYXJjaF92aWV3X21hcF9idXR0b25cIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcbiAgICB9XG5cbiAgICAkc2NvcGUuc2hvd0xpc3QgPSBmdW5jdGlvbigpe1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBfd3JhcHBlclwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBfY29udGFpbmVyXCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcF9jb250YWluZXJcIikuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb3JtX2NvbnRhaW5lclwiKS5zdHlsZS5taW5IZWlnaHQ9XCI0NjBweFwiO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWFyY2hfdmlld19tYXBfYnV0dG9uXCIpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWFyY2hfdmlld19saXN0X2J1dHRvblwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xuICAgIH1cblxuXG4gIH1cbl0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ0FwaVNlcnZpY2UnLCBbJyRodHRwJywgJ0NvbmZpZ1NlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCwgQ29uZmlnU2VydmljZSkge1xuXG4gIHZhciBhcGlVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9hcGkvXCI7XG5cbi8qKlxuICAgKiBDb25zdHJ1Y3Rvciwgd2l0aCBjbGFzcyBuYW1lXG4gICAqL1xuICBmdW5jdGlvbiBBcGlPYmplY3QoX2RhdGEpIHtcbiAgICBhbmd1bGFyLmV4dGVuZCh0aGlzLCBfZGF0YSk7XG4gIH1cblxuXG4gIEFwaU9iamVjdC5zZWFyY2hRdWVFc3R1ZGlhciA9IGZ1bmN0aW9uKHN0cil7XG4gICAgcmV0dXJuICRodHRwLmdldChhcGlVUkwgKyAnc2VhcmNoLycgKyBzdHIsIHtjYWNoZTogZmFsc2UsIHBhcmFtczoge2hhc2hfaWQ6TWF0aC5yYW5kb20oKX19KTtcbiAgfVxuXG4gIEFwaU9iamVjdC5zZWFyY2hEb25kZUVzdHVkaWFyID0gZnVuY3Rpb24oc3RyKXtcbiAgICByZXR1cm4gJGh0dHAuZ2V0KGFwaVVSTCArICdzZWFyY2hCeUxvY2FsaWRhZERlcGFydGFtZW50by8nICsgc3RyLCB7Y2FjaGU6IGZhbHNlLCBwYXJhbXM6IHtoYXNoX2lkOk1hdGgucmFuZG9tKCl9fSk7XG4gIH1cblxuICAgIEFwaU9iamVjdC5maWx0ZXJzID0gbnVsbDtcbiAgICBBcGlPYmplY3QubWFwU2NvcGUgPSBudWxsO1xuICAgIEFwaU9iamVjdC5mb3JtU2NvcGUgPSB7fTtcbiAgICBBcGlPYmplY3QubGFzdFNlYXJjaFJlc3BvbnNlRXN0YWJsZWNpbWllbnRvcyA9IG51bGw7XG5cbiAgICBBcGlPYmplY3QudXBkYXRlRmlsdGVycyA9IGZ1bmN0aW9uKGZpbHRlcnNPYmplY3Qpe1xuICAgICAgQXBpT2JqZWN0LmZpbHRlcnMgPSBmaWx0ZXJzT2JqZWN0O1xuICAgICAgaWYoQXBpT2JqZWN0Lm1hcFNjb3BlICE9IG51bGwpe1xuICAgICAgICBBcGlPYmplY3QubWFwU2NvcGUuZmlsdGVyc1VwZGF0ZWQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBBcGlPYmplY3QuY3JlYXRlRmlsdGVyUGFyYW1zRm9yR2V0UmVxdWVzdCA9IGZ1bmN0aW9uKCl7XG4gICAgICBjb25zb2xlLmxvZyhBcGlPYmplY3QuZmlsdGVycyk7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBoYXNoX2lkOiBNYXRoLnJhbmRvbSgpLFxuICAgICAgICBlZGFkOiBBcGlPYmplY3QuZmlsdGVycy5lZGFkLFxuICAgICAgICB1bHRpbW9fbml2ZWxfYXByb2JhZG86IEFwaU9iamVjdC5maWx0ZXJzLnVsdGltb19uaXZlbF9hcHJvYmFkbyxcbiAgICAgICAgdWx0aW1vX2FuaW9fYXByb2JhZG86IEFwaU9iamVjdC5maWx0ZXJzLnVsdGltb19hbmlvX2Fwcm9iYWRvLFxuICAgICAgICAvKnBsYW46IEFwaU9iamVjdC5maWx0ZXJzLnBsYW4sXG4gICAgICAgIGx1Z2FyOiBBcGlPYmplY3QuZmlsdGVycy5sdWdhciwqL1xuICAgICAgICB0dXJubzogQXBpT2JqZWN0LmZpbHRlcnMudHVybm9cbiAgICAgIH07XG4gICAgICBpZihBcGlPYmplY3QuZmlsdGVycy5xdWUhPVwiXCIpe1xuICAgICAgICBwYXJhbXMucXVlRXN0dWRpYXJJZCA9IEFwaU9iamVjdC5maWx0ZXJzLnF1ZS5pZDtcbiAgICAgICAgcGFyYW1zLnF1ZUVzdHVkaWFyTm9tYnJlID0gQXBpT2JqZWN0LmZpbHRlcnMucXVlLm5vbWJyZTtcbiAgICAgICAgcGFyYW1zLnF1ZUVzdHVkaWFyVGFnVW5vID0gQXBpT2JqZWN0LmZpbHRlcnMucXVlLnRhZ1swXTtcbiAgICAgICAgcGFyYW1zLnF1ZUVzdHVkaWFyVGFnRG9zID0gQXBpT2JqZWN0LmZpbHRlcnMucXVlLnRhZ1sxXTtcbiAgICAgIH1cbiAgICAgIGlmKEFwaU9iamVjdC5maWx0ZXJzLmRvbmRlIT1cIlwiKXtcbiAgICAgICAgcGFyYW1zLmRvbmRlRXN0dWRpYXJEZXBhcnRhbWVudG8gPSBBcGlPYmplY3QuZmlsdGVycy5kb25kZS5kZXBhcnRhbWVudG87XG4gICAgICAgIHBhcmFtcy5kb25kZUVzdHVkaWFyTG9jYWxpZGFkID0gQXBpT2JqZWN0LmZpbHRlcnMuZG9uZGUubG9jYWxpZGFkO1xuICAgICAgICBwYXJhbXMuZG9uZGVFc3R1ZGlhckxhdCA9IEFwaU9iamVjdC5maWx0ZXJzLmRvbmRlLmNvb3JkZW5hZGFzLmxhdDtcbiAgICAgICAgcGFyYW1zLmRvbmRlRXN0dWRpYXJMb24gPSBBcGlPYmplY3QuZmlsdGVycy5kb25kZS5jb29yZGVuYWRhcy5sb247XG4gICAgICB9XG4gICAgICBpZiAoIEFwaU9iamVjdC5maWx0ZXJzLnF1ZS50aXBvID09ICd0aXBvJyApIHtcbiAgICAgICAgcGFyYW1zID0gQXBpT2JqZWN0LmZpbHRlcnMucXVlLmlkKycvYWxsJztcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBwYXJhbXMgPSAnYWxsLycrQXBpT2JqZWN0LmZpbHRlcnMucXVlLmlkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG5cbiAgICBBcGlPYmplY3QuZ2V0RXN0YWJsZWNpbWllbnRvc0J5RmlsdGVycyA9IGZ1bmN0aW9uKCl7XG4gICAgICBpZihBcGlPYmplY3QuZmlsdGVycyE9bnVsbCl7XG4gICAgICAgIHZhciBwYXJhbWV0ZXJzID0gQXBpT2JqZWN0LmNyZWF0ZUZpbHRlclBhcmFtc0ZvckdldFJlcXVlc3QoKTtcbiAgICAgICAgY29uc29sZS5sb2cocGFyYW1ldGVycyk7XG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoYXBpVVJMICsgJ2VzdGFibGVjaW1pZW50by1wb3ItdGlwby8nK3BhcmFtZXRlcnMpOy8vLCB7Y2FjaGU6IGZhbHNlLCBwYXJhbXM6IHBhcmFtZXRlcnN9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBBcGlPYmplY3QudXBkYXRlTWFwUGlucyA9IGZ1bmN0aW9uKGVzdGFibGVjaW1pZW50b3Mpe1xuICAgICAgQXBpT2JqZWN0Lm1hcFNjb3BlLmxvYWRQaW5zTGF5ZXIoZXN0YWJsZWNpbWllbnRvcyk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uXG4gICAgICovXG4gICAgcmV0dXJuIEFwaU9iamVjdDtcblxufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ0F1dGhTZXJ2aWNlJywgWyckaHR0cCcsICckY29yZG92YUZpbGVUcmFuc2ZlcicsICdDb25maWdTZXJ2aWNlJywnVmFsaWRhdGlvblNlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCwgJGNvcmRvdmFGaWxlVHJhbnNmZXIsIENvbmZpZ1NlcnZpY2UsIFZhbGlkYXRpb25TZXJ2aWNlKSB7XG5cbiAgdmFyIGJhc2VVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9hcGkvXCI7XG5cbiAgcmV0dXJuIHtcbiAgICBsb2dfaW46IGZ1bmN0aW9uICh1c2VyLHBhc3N3b3JkKSB7XG4gICAgICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VyKycmcGFzc3dvcmQ9JytwYXNzd29yZDtcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdsb2dpbicsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgICB9LFxuXG4gICAgc2lnbl9vdXQ6IGZ1bmN0aW9uIChwYXNzd29yZCwgZW1haWwpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoYmFzZVVSTCArIFwic2lnbl9vdXRcIiwgeyB3aXRoQ3JlZGVudGlhbHM6IHRydWUsIHBhcmFtczogeyBwYXNzd29yZF9zaWduX2luOiBwYXNzd29yZCwgZW1haWw6IGVtYWlsIH0gfSk7XG4gICAgfSxcblxuICAgIGNyZWF0ZV91c2VyOiBmdW5jdGlvbiAodXNlck9iaikge1xuICAgICAgaWYodXNlck9iai5waWN0dXJlX3VybCAmJiBWYWxpZGF0aW9uU2VydmljZS5pc01vYmlsZURldmljZSgpKXtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICBmaWxlS2V5OiBcInBob3RvXCIsXG4gICAgICAgICAvL2ZpbGVOYW1lOiBmaWxlbmFtZSxcbiAgICAgICAgIC8vY2h1bmtlZE1vZGU6IGZhbHNlLFxuICAgICAgICAgLy9taW1lVHlwZTogXCJpbWFnZS9qcGdcIixcbiAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSxcbiAgICAgICAgIHBhcmFtcyA6IHsgIHVzZXI6IHVzZXJPYmoudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogdXNlck9iai5wYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyT2JqLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgZ2VuZGVyOiB1c2VyT2JqLmdlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgIGludGVyZXN0ZWQ6IHVzZXJPYmouaW50ZXJlc3RlZCxcbiAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogdXNlck9iai5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICBzaG93X2xvY2F0aW9uOiB1c2VyT2JqLnNob3dfbG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgdHJ1c3RBbGxIb3N0cyA9IHRydWU7XG4gICAgICAgIHJldHVybiAkY29yZG92YUZpbGVUcmFuc2Zlci51cGxvYWQoYmFzZVVSTCArIFwiY3JlYXRlX3VzZXJcIiwgdXNlck9iai5waWN0dXJlX3VybCwgb3B0aW9ucywgdHJ1c3RBbGxIb3N0cyk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgaWYodXNlck9iai5waWN0dXJlX3VybCl7XG4gICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwicGhvdG9cIiwgdXNlck9iai5waWN0dXJlX3VybCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwidXNlclwiLCB1c2VyT2JqLnVzZXJuYW1lKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJwYXNzd29yZFwiLCB1c2VyT2JqLnBhc3N3b3JkKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJlbWFpbFwiLCB1c2VyT2JqLmVtYWlsKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJnZW5kZXJcIiwgdXNlck9iai5nZW5kZXIpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcImludGVyZXN0ZWRcIiwgdXNlck9iai5pbnRlcmVzdGVkKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJzdGF0dXNcIiwgdXNlck9iai5zdGF0dXMpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcInNob3dfbG9jYXRpb25cIiwgdXNlck9iai5zaG93X2xvY2F0aW9uKTtcbiAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2NyZWF0ZV91c2VyJywgZm9ybURhdGEsIHtcbiAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGFuZ3VsYXIuaWRlbnRpdHlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXJPYmoudXNlcm5hbWUrJyZwYXNzd29yZD0nK3VzZXJPYmoucGFzc3dvcmQrJyZlbWFpbD0nK3VzZXJPYmouZW1haWwrJyZnZW5kZXI9Jyt1c2VyT2JqLmdlbmRlcjtcbiAgICAgICAgICBib2R5ID0gYm9keSArJyZpbnRlcmVzdGVkPScrdXNlck9iai5pbnRlcmVzdGVkKycmc3RhdHVzPScrdXNlck9iai5zdGF0dXMrJyZzaG93X2xvY2F0aW9uPScrdXNlck9iai5zaG93X2xvY2F0aW9uO1xuICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KGJhc2VVUkwgKyAnY3JlYXRlX3VzZXInLCBib2R5LHt3aXRoQ3JlZGVudGlhbHM6IHRydWUsIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9fSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH0sXG5cbiAgICBwYXNzd29yZF9yZWNvdmVyeTogZnVuY3Rpb24gKGVtYWlsKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KGJhc2VVUkwgKyBcImZvcmdvdF9wYXNzd29yZFwiLCB7IHBhcmFtczogeyBsb2dpbl9lbWFpbDogZW1haWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIHBhc3N3b3JkX2NoYW5nZTogZnVuY3Rpb24gKGVtYWlsLG9sZFBhc3N3b3JkLG5ld1Bhc3N3b3JkLGNvbmZpcm1QYXNzd29yZCkge1xuXG4gICAgICB2YXIgYm9keSA9ICdlbWFpbD0nK2VtYWlsKycmcGFzc3dvcmRfc2lnbl9pbj0nK29sZFBhc3N3b3JkKycmbmV3X3Bhc3N3b3JkPScrbmV3UGFzc3dvcmQrJyZjb25maXJtPScrY29uZmlybVBhc3N3b3JkO1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdjaGFuZ2VfcGFzc3dvcmQnLCBib2R5LHtoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuXG4gICAgfSxcblxuXG4gICAgZWRpdF91c2VyOiBmdW5jdGlvbiAodXNlck9iaikge1xuICAgICAgaWYodXNlck9iai5waWN0dXJlX3VybCAmJiBWYWxpZGF0aW9uU2VydmljZS5pc01vYmlsZURldmljZSgpKXtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICBmaWxlS2V5OiBcInBob3RvXCIsXG4gICAgICAgICAvL2ZpbGVOYW1lOiBmaWxlbmFtZSxcbiAgICAgICAgIC8vY2h1bmtlZE1vZGU6IGZhbHNlLFxuICAgICAgICAgLy9taW1lVHlwZTogXCJpbWFnZS9qcGdcIixcbiAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSxcbiAgICAgICAgIHBhcmFtcyA6IHsgIHVzZXI6IHVzZXJPYmoudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogdXNlck9iai5wYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyT2JqLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgZ2VuZGVyOiB1c2VyT2JqLmdlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgIGludGVyZXN0ZWQ6IHVzZXJPYmouaW50ZXJlc3RlZCxcbiAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogdXNlck9iai5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICBzaG93X2xvY2F0aW9uOiB1c2VyT2JqLnNob3dfbG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB2YXIgdHJ1c3RBbGxIb3N0cyA9IHRydWU7XG4gICAgICAgIHJldHVybiAkY29yZG92YUZpbGVUcmFuc2Zlci51cGxvYWQoYmFzZVVSTCArIFwiZWRpdF9wcm9maWxlXCIsIHVzZXJPYmoucGljdHVyZV91cmwsIG9wdGlvbnMsIHRydXN0QWxsSG9zdHMpO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VyT2JqLnVzZXJuYW1lKycmcGFzc3dvcmQ9Jyt1c2VyT2JqLnBhc3N3b3JkKycmZW1haWw9Jyt1c2VyT2JqLmVtYWlsKycmZ2VuZGVyPScrdXNlck9iai5nZW5kZXI7XG4gICAgICAgIGJvZHkgPSBib2R5ICsnJmludGVyZXN0ZWQ9Jyt1c2VyT2JqLmludGVyZXN0ZWQrJyZzdGF0dXM9Jyt1c2VyT2JqLnN0YXR1cysnJnNob3dfbG9jYXRpb249Jyt1c2VyT2JqLnNob3dfbG9jYXRpb247XG4gICAgICAgIGlmKHVzZXJPYmoucGljdHVyZV91cmwpe1xuICAgICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcInBob3RvXCIsIHVzZXJPYmoucGljdHVyZV91cmwpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcInVzZXJcIiwgdXNlck9iai51c2VybmFtZSk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwicGFzc3dvcmRcIiwgdXNlck9iai5wYXNzd29yZCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwiZW1haWxcIiwgdXNlck9iai5lbWFpbCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwiZ2VuZGVyXCIsIHVzZXJPYmouZ2VuZGVyKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJpbnRlcmVzdGVkXCIsIHVzZXJPYmouaW50ZXJlc3RlZCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwic3RhdHVzXCIsIHVzZXJPYmouc3RhdHVzKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJzaG93X2xvY2F0aW9uXCIsIHVzZXJPYmouc2hvd19sb2NhdGlvbik7XG4gICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdlZGl0X3Byb2ZpbGUnLCBmb3JtRGF0YSwge1xuICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogYW5ndWxhci5pZGVudGl0eVxuICAgICAgICAgIH0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2VkaXRfcHJvZmlsZScsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICB9O1xufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ0NvbmZpZ1NlcnZpY2UnLCBbJyRodHRwJywgZnVuY3Rpb24oJGh0dHApIHtcblxuICB2YXIgQ29uZmlnT2JqID0ge307XG4gIENvbmZpZ09iai5iYXNlVVJMID0gXCJodHRwOi8vZWVfYmFja2VuZC5kZXZlbG9wbWVudC5kYXRhdXkub3JnXCI7XG4gIGlmKGlvbmljLlBsYXRmb3JtLmlzV2ViVmlldygpKXtcbiAgICBDb25maWdPYmouYmFzZVVSTCA9IFwiaHR0cDovL2VlX2JhY2tlbmQuZGV2ZWxvcG1lbnQuZGF0YXV5Lm9yZ1wiO1xuICB9IGVsc2Uge1xuICAgIENvbmZpZ09iai5iYXNlVVJMID0gXCIvYmFja2VuZFwiO1xuICB9XG4gIENvbmZpZ09iai5BcHBOYW1lID0gXCJFbGlqbyBFc3R1ZGlhclwiO1xuXG5cbiAgcmV0dXJuIENvbmZpZ09iajtcblxufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ0Nvbm5lY3Rpdml0eVNlcnZpY2UnLCBbJyRjb3Jkb3ZhTmV0d29yaycsIGZ1bmN0aW9uKCRjb3Jkb3ZhTmV0d29yayl7XG5cbiAgcmV0dXJuIHtcbiAgICBpc09ubGluZTogZnVuY3Rpb24oKXtcbiAgICAgIC8qaWYoaW9uaWMuUGxhdGZvcm0uaXNXZWJWaWV3KCkpe1xuICAgICAgICByZXR1cm4gJGNvcmRvdmFOZXR3b3JrLmlzT25saW5lKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm9uTGluZTtcbiAgICAgICAgLy9yZXR1cm4gZmFsc2U7XG4gICAgICB9Ki9cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgaXNPZmZsaW5lOiBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgLyppZihpb25pYy5QbGF0Zm9ybS5pc1dlYlZpZXcoKSl7XG4gICAgICAgIHJldHVybiAhJGNvcmRvdmFOZXR3b3JrLmlzT25saW5lKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gIW5hdmlnYXRvci5vbkxpbmU7XG4gICAgICB9Ki9cbiAgICB9XG4gIH1cbn1dKVxuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ0RCU2VydmljZScsIFsnJHEnLCBmdW5jdGlvbigkcSkge1xuICAgdmFyIF9kYjtcblxuICAgcmV0dXJuIHtcbiAgICAgICBpbml0REI6IGluaXREQixcbiAgICAgICBzYXZlVXNlcjogc2F2ZVVzZXIsXG4gICAgICAgZ2V0VXNlcjogZ2V0VXNlcixcbiAgICAgICBlcmFzZVVzZXI6IGVyYXNlVXNlcixcbiAgICAgICBzYXZlUmVwb3J0OiBzYXZlUmVwb3J0LFxuICAgICAgIGdldFJlcG9ydDogZ2V0UmVwb3J0LFxuICAgICAgIGdldEFsbFJlcG9ydHM6IGdldEFsbFJlcG9ydHMsXG4gICAgICAgdXBkYXRlUmVwb3J0OiB1cGRhdGVSZXBvcnQsXG4gICAgICAgZGVsZXRlUmVwb3J0OiBkZWxldGVSZXBvcnQsXG4gICAgICAgZGVsZXRlR2l2ZW5SZXBvcnQ6IGRlbGV0ZUdpdmVuUmVwb3J0LFxuICAgICAgIGdldENhdGVnb3JpZXM6IGdldENhdGVnb3JpZXMsXG4gICAgICAgc2F2ZUNhdGVnb3JpZXM6IHNhdmVDYXRlZ29yaWVzXG4gICB9O1xuXG4gICBmdW5jdGlvbiBzYXZlVXNlcih1c2VyX25hbWUsIHVzZXJfcGFzc3dvcmQsIHVzZXJfcGljdHVyZV91cmwsc2hvd19sb2NhdGlvbiwgdWlkLCBzdGF0dXMsIGdlbmRlciwgaW50ZXJlc3RlZCkge1xuICAgICAgICAgdmFyIHVzZXIgPSB7XG4gICAgICAgICAgICBfaWQ6ICd1c2VyLWxvZ2dlZCcsXG4gICAgICAgICAgICBuYW1lOiB1c2VyX25hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogdXNlcl9wYXNzd29yZCxcbiAgICAgICAgICAgIHBpY3R1cmVfdXJsOiB1c2VyX3BpY3R1cmVfdXJsLFxuICAgICAgICAgICAgc2hvd19sb2NhdGlvbjogc2hvd19sb2NhdGlvbixcbiAgICAgICAgICAgIHVpZDogdWlkLFxuICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMsXG4gICAgICAgICAgICBnZW5kZXI6IGdlbmRlcixcbiAgICAgICAgICAgIGludGVyZXN0ZWQ6IGludGVyZXN0ZWRcbiAgICAgICAgIH07XG4gICAgICAgICBnZXRVc2VyKCkudGhlbihmdW5jdGlvbiAoZG9jKSB7XG4gICAgICAgICAgIHVzZXIuX3JldiA9IGRvYy5fcmV2O1xuICAgICAgICAgICByZXR1cm4gX2RiLnB1dCh1c2VyKTtcbiAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgcmV0dXJuIF9kYi5wdXQodXNlcik7XG4gICAgICAgICB9KVxuICAgfTtcblxuICBmdW5jdGlvbiBnZXRVc2VyKCkge1xuICAgICByZXR1cm4gX2RiLmdldCgndXNlci1sb2dnZWQnKTtcbiAgfTtcblxuICBmdW5jdGlvbiBlcmFzZVVzZXIoKSB7XG4gICAgX2RiLmdldCgndXNlci1sb2dnZWQnKS50aGVuKGZ1bmN0aW9uKGRvYykge1xuICAgICAgcmV0dXJuIF9kYi5yZW1vdmUoZG9jKTtcbiAgICB9KTtcbiAgfVxuXG4gICBmdW5jdGlvbiBpbml0REIoKSB7XG4gICAgICAgLy8gQ3JlYXRlcyB0aGUgZGF0YWJhc2Ugb3Igb3BlbnMgaWYgaXQgYWxyZWFkeSBleGlzdHNcbiAgICAgICBfZGIgPSBuZXcgUG91Y2hEQigndG9tYW1vc3VuYV9sb2NhbF9kYicpO1xuICAgICAgIHJldHVybiBfZGI7XG4gICB9O1xuXG4gICBmdW5jdGlvbiBzYXZlUmVwb3J0KHJlcG9ydCkge1xuICAgICAgLy9uZXdfcmVwb3J0X2lkID0gXCJyZXBvcnRfXCIgKyBwb3VjaENvbGxhdGUudG9JbmRleGFibGVTdHJpbmcoW3JlcG9ydF0pO1xuICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgdmFyIG5ld19yZXBvcnRfaWQgPSBcInJlcG9ydF9cIiArIGRhdGUuZ2V0RnVsbFllYXIoKSArIChkYXRlLmdldE1vbnRoKCkgKyAxKSArIGRhdGUuZ2V0RGF0ZSgpICsgZGF0ZS5nZXRNaWxsaXNlY29uZHMoKTtcbiAgICAgIHJlcG9ydC5faWQgPSBuZXdfcmVwb3J0X2lkO1xuICAgICAgcmV0dXJuIF9kYi5wdXQocmVwb3J0KTtcbiAgIH07XG5cbiAgIGZ1bmN0aW9uIHVwZGF0ZVJlcG9ydChyZXBvcnQpIHtcbiAgICAgcmV0dXJuIF9kYi5wdXQocmVwb3J0KTtcbiAgfTtcblxuICAgZnVuY3Rpb24gZ2V0Q2F0ZWdvcmllcygpIHtcbiAgICAgcmV0dXJuIF9kYi5nZXQoJ2NhdGVnb3JpZXMtbGlzdCcpO1xuICAgfTtcblxuICAgZnVuY3Rpb24gc2F2ZUNhdGVnb3JpZXMoY2F0ZWdvcmllcykge1xuICAgICBnZXRDYXRlZ29yaWVzKCkudGhlbihmdW5jdGlvbiAoZG9jKSB7XG4gICAgICAgY2F0ZWdvcmllcy5fcmV2ID0gZG9jLl9yZXY7XG4gICAgICAgcmV0dXJuIF9kYi5wdXQoY2F0ZWdvcmllcyk7XG4gICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICBjYXRlZ29yaWVzLl9pZCA9IFwiY2F0ZWdvcmllcy1saXN0XCI7XG4gICAgICAgcmV0dXJuIF9kYi5wdXQoY2F0ZWdvcmllcyk7XG4gICAgIH0pXG4gICB9O1xuXG4gIGZ1bmN0aW9uIGdldFJlcG9ydChyZXBvcnRJZCkge1xuICAgICByZXR1cm4gX2RiLmdldChyZXBvcnRJZCk7XG4gIH07XG5cbiAgIGZ1bmN0aW9uIGdldEFsbFJlcG9ydHMoKSB7XG4gICAgIHJldHVybiBfZGIuYWxsRG9jcyh7XG4gICAgICBpbmNsdWRlX2RvY3M6IHRydWUsXG4gICAgICBhdHRhY2htZW50czogZmFsc2UsXG4gICAgICBzdGFydGtleTogJ3JlcG9ydF8nLFxuICAgICAgZW5ka2V5OiAncmVwb3J0X1xcdWZmZmYnXG4gICAgIH0pOy8qLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgLy8gaGFuZGxlIHJlc3VsdFxuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7Ki9cbiAgfTtcblxuICBmdW5jdGlvbiBkZWxldGVSZXBvcnQocmVwb3J0X2lkKSB7XG4gICAgX2RiLmdldChyZXBvcnRfaWQpLnRoZW4oZnVuY3Rpb24oZG9jKSB7XG4gICAgICByZXR1cm4gX2RiLnJlbW92ZShkb2MpO1xuICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGRlbGV0ZUdpdmVuUmVwb3J0KHJlcG9ydCkge1xuICAgIHJldHVybiBfZGIucmVtb3ZlKHJlcG9ydCk7XG4gIH07XG5cbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdFcnJvclNlcnZpY2UnLCBbJyRodHRwJywnJGlvbmljUG9wdXAnLCAnVmFsaWRhdGlvblNlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCwkaW9uaWNQb3B1cCxWYWxpZGF0aW9uU2VydmljZSkge1xuXG4gIHJldHVybiB7XG4gICAgaHR0cF9yZXNwb25zZV9pc19zdWNjZXNzZnVsOiBmdW5jdGlvbiAoanNvblJlc3VsdCwgZXJyb3JDb250YWluZXJJZCkge1xuICAgICAgdmFyIGVycm9yRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZXJyb3JDb250YWluZXJJZCk7XG4gICAgICBpZihqc29uUmVzdWx0LmRhdGEgJiYganNvblJlc3VsdC5kYXRhLlN0YXR1cz09XCJzdWNjZXNzXCIgfHwganNvblJlc3VsdC5TdGF0dXM9PVwic3VjY2Vzc1wiKXtcbiAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1lbHNle1xuICAgICAgICBpZihqc29uUmVzdWx0LmRhdGEpe1xuICAgICAgICAgIGVycm9yRGl2LmlubmVySFRNTD1cIjxoMz5cIiArIGpzb25SZXN1bHQuZGF0YS5NZXNzYWdlICsgXCI8L2gzPlwiO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICBlcnJvckRpdi5pbm5lckhUTUw9XCI8aDM+XCIgKyBqc29uUmVzdWx0Lk1lc3NhZ2UgKyBcIjwvaDM+XCI7XG4gICAgICAgIH1cbiAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBodHRwX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWxfYWpheDogZnVuY3Rpb24gKGpzb25SZXN1bHQpIHtcbiAgICAgIGlmKGpzb25SZXN1bHQuZGF0YS5yZXN1bHQ9PTApe1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bF9wb3B1cDogZnVuY3Rpb24gKGpzb25SZXN1bHQpIHtcbiAgICAgIGlmKGpzb25SZXN1bHQuZGF0YS5yZXN1bHQ9PTApe1xuICAgICAgICB2YXIgYWxlcnRQb3B1cCA9ICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgIHRpdGxlOiBcIkVycm9yXCIsXG4gICAgICAgICB0ZW1wbGF0ZToganNvblJlc3VsdC5kYXRhLm1lc3NhZ2VcbiAgICAgICAgfSk7XG4gICAgICAgIGFsZXJ0UG9wdXAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGh0dHBfZGF0YV9yZXNwb25zZV9pc19zdWNjZXNzZnVsOiBmdW5jdGlvbiAoZGF0YSwgZXJyb3JDb250YWluZXJJZCkge1xuICAgICAgdmFyIGVycm9yRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZXJyb3JDb250YWluZXJJZCk7XG4gICAgICBpZihkYXRhLlN0YXR1cyE9J3N1Y2Nlc3MnKXtcbiAgICAgICAgZXJyb3JEaXYuaW5uZXJIVE1MPVwiPGgzPlwiICsgZGF0YS5NZXNzYWdlICsgXCI8L2gzPlwiO1xuICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaHR0cF9kYXRhX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWxfYWpheDogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIGlmKGRhdGEucmVzdWx0PT0wKXtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBzaG93X2Vycm9yX21lc3NhZ2U6IGZ1bmN0aW9uIChlcnJvckNvbnRhaW5lcklkLCBtZXNzYWdlKSB7XG4gICAgICAgIHZhciBlcnJvckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVycm9yQ29udGFpbmVySWQpO1xuICAgICAgICBlcnJvckRpdi5pbm5lckhUTUw9XCI8aDM+XCIgKyBtZXNzYWdlICsgXCI8L2gzPlwiO1xuICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIHNob3dfZXJyb3JfbWVzc2FnZV9wb3B1cDogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIGFsZXJ0UG9wdXAgPSAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICB0aXRsZTogXCJFcnJvclwiLFxuICAgICAgICAgdGVtcGxhdGU6IG1lc3NhZ2VcbiAgICAgICAgfSk7XG4gICAgICAgIGFsZXJ0UG9wdXAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIGNoZWNrX2ZpZWxkczogZnVuY3Rpb24gKGZpZWxkcywgZXJyb3JDb250YWluZXJJZCkge1xuICAgICAgdmFyIGVycm9ycyA9IFwiXCI7XG4gICAgICBmaWVsZHMuZm9yRWFjaChmdW5jdGlvbihmaWVsZCkge1xuICAgICAgICBpZihmaWVsZC50eXBlPT1cIm5vdE51bGxcIil7XG4gICAgICAgICAgaWYoIVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlX25vdF9lbXB0eShmaWVsZC52YWx1ZSkpe1xuICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzICsgJzxoMz4tIEVsIGNhbXBvIFwiJyArIGZpZWxkLm5hbWUgKyAnXCIgbm8gcHVlZGUgZXN0YXIgdmFjw61vLjwvaDM+JztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYoZmllbGQudHlwZT09XCJlbWFpbFwiKXtcbiAgICAgICAgICBpZighVmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVfZW1haWwoZmllbGQudmFsdWUpKXtcbiAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBFbCBjYW1wbyBcIicgKyBmaWVsZC5uYW1lICsgJ1wiIG5vIGVzIHVuYSBkaXJlY2Npw7NuIGRlIGNvcnJlbyB2w6FsaWRhLjwvaDM+JztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYoZmllbGQudHlwZT09XCJpZGRvY191eVwiKXtcbiAgICAgICAgICBpZighVmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVfaWRkb2NfdXkoZmllbGQudmFsdWUpKXtcbiAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBFbCBjYW1wbyBcIicgKyBmaWVsZC5uYW1lICsgJ1wiIG5vIGVzIHVuYSBjw6lkdWxhIHVydWd1YXlhIHbDoWxpZGEuPC9oMz4nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZihmaWVsZC50eXBlPT1cInR3b193b3Jkc1wiKXtcbiAgICAgICAgICBpZighVmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVfdHdvX3dvcmRzKGZpZWxkLnZhbHVlKSl7XG4gICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMgKyAnPGgzPi0gRWwgY2FtcG8gXCInICsgZmllbGQubmFtZSArICdcIiBkZWJlIGNvbnRlbmVyIGFsIG1lbm9zIGRvcyBwYWxhYnJhcy48L2gzPic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKGZpZWxkLnR5cGU9PVwiZXF1YWxzVG9cIil7XG4gICAgICAgICAgaWYoIVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlX2VxdWFsc1RvKGZpZWxkLnZhbHVlLCBmaWVsZC5zZWNvbmRWYWx1ZSkpe1xuICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzICsgJzxoMz4tIExvcyBjYW1wb3MgXCInICsgZmllbGQubmFtZSArICdcIiBubyBjb2luY2lkZW4uPC9oMz4nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZihlcnJvcnMgPT1cIlwiKXtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgdmFyIGVycm9yRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZXJyb3JDb250YWluZXJJZCk7XG4gICAgICAgIGVycm9yRGl2LmlubmVySFRNTD0gZXJyb3JzO1xuICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgfTtcbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdMb2FkZXInLCBbJyRpb25pY0xvYWRpbmcnLCAnJHRpbWVvdXQnLCckaW9uaWNQb3B1cCcsZnVuY3Rpb24oJGlvbmljTG9hZGluZywkdGltZW91dCwkaW9uaWNQb3B1cCkge1xuXG4gIHZhciBMT0FERVJBUEkgPSB7XG5cbiAgICBzaG93TG9hZGluZzogZnVuY3Rpb24odGV4dCkge1xuICAgICAgdGV4dCA9IHRleHQgfHwgJ0xvYWRpbmcuLi4nO1xuICAgICAgJGlvbmljTG9hZGluZy5zaG93KHtcbiAgICAgICAgdGVtcGxhdGU6IHRleHRcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBoaWRlTG9hZGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICB9LFxuXG4gICAgdG9nZ2xlTG9hZGluZ1dpdGhNZXNzYWdlOiBmdW5jdGlvbih0ZXh0LCB0aW1lb3V0KSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIHNlbGYuc2hvd0xvYWRpbmcodGV4dCk7XG5cbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBzZWxmLmhpZGVMb2FkaW5nKCk7XG4gICAgICB9LCB0aW1lb3V0IHx8IDMwMDApO1xuICAgIH0sXG5cbiAgICBjb25maXJtUG9wdXA6ZnVuY3Rpb24odGl0bGUsdGV4dCl7XG4gICAgICB2YXIgY29uZmlybVBvcHVwID0gJGlvbmljUG9wdXAuY29uZmlybSh7XG4gICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgdGVtcGxhdGU6IHRleHRcbiAgIH0pO1xuICAgcmV0dXJuIGNvbmZpcm1Qb3B1cDtcbiB9LFxuXG5cbiAgICBzaG93QWxlcnQ6ZnVuY3Rpb24oX3RpdGxlLF90ZW1wbGF0ZSkge1xuICAgICAgdmFyIGFsZXJ0UG9wdXAgPSAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgIHRpdGxlOiBfdGl0bGUsXG4gICAgICAgIHRlbXBsYXRlOiBfdGVtcGxhdGVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGFsZXJ0UG9wdXA7XG4gfVxuXG4gIH07XG4gIHJldHVybiBMT0FERVJBUEk7XG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnTG9jYXRpb25zU2VydmljZScsIFsgZnVuY3Rpb24oKSB7XG5cbiAgdmFyIGxvY2F0aW9uc09iaiA9IHt9O1xuICBsb2NhdGlvbnNPYmouaW5pdGlhbF9sYXQgPSBcIlwiO1xuICBsb2NhdGlvbnNPYmouaW5pdGlhbF9sbmcgPSBcIlwiO1xuICBsb2NhdGlvbnNPYmoubGFzdF91c2VyX2xhdCA9IFwiXCI7XG4gIGxvY2F0aW9uc09iai5sYXN0X3VzZXJfbG5nID0gXCJcIjtcbiAgbG9jYXRpb25zT2JqLmNvdW5jaWxfbW9kYWwgPSBudWxsO1xuICBsb2NhdGlvbnNPYmouc2VsZWN0ZWRfY291bmNpbCA9IG51bGw7XG5cbiAgbG9jYXRpb25zT2JqLnNlbGVjdENvdW5jaWwgPSBmdW5jdGlvbihjb3VuY2lsTmFtZSkge1xuICAgIGxvY2F0aW9uc09iai5zZWxlY3RlZF9jb3VuY2lsID0gIGNvdW5jaWxOYW1lO1xuICB9XG5cbiAgbG9jYXRpb25zT2JqLnNhdmVfaW5pdGlhbF9wb3NpdGlvbiA9IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XG4gICAgbG9jYXRpb25zT2JqLmluaXRpYWxfbGF0ID0gIHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZTtcbiAgICBsb2NhdGlvbnNPYmouaW5pdGlhbF9sbmcgPSAgcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZTtcbiAgfVxuXG4gIGxvY2F0aW9uc09iai5zYXZlX2xhc3RfdXNlcl9wb3NpdGlvbiA9IGZ1bmN0aW9uKGxhdCxsbmcpe1xuICAgIGxvY2F0aW9uc09iai5sYXN0X3VzZXJfbGF0ID0gbGF0O1xuICAgIGxvY2F0aW9uc09iai5sYXN0X3VzZXJfbG5nID0gbG5nO1xuICB9XG5cbiAgbG9jYXRpb25zT2JqLnNhdmVkTG9jYXRpb25zID0gW107XG5cbiAgcmV0dXJuIGxvY2F0aW9uc09iajtcblxufV0pO1xuIiwiIC8vcG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ01hcFNlcnZpY2UnLCBbIGZ1bmN0aW9uKCkge1xuIHBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdNYXBTZXJ2aWNlJywgWydsZWFmbGV0RGF0YScsICckY29tcGlsZScsIGZ1bmN0aW9uKGxlYWZsZXREYXRhLCAkY29tcGlsZSkge1xuXG4gICAvL0RlZmluaWNpb24gZGUgbGEgcHJveWVjY2Npb24gVVRNIDIxIHNcbiAgIHByb2o0LmRlZnMoJ0VQU0c6MzI3MjEnLCAnK3Byb2o9dXRtICt6b25lPTIxICtzb3V0aCArZWxscHM9V0dTODQgK2RhdHVtPVdHUzg0ICt1bml0cz1tICtub19kZWZzJyk7XG5cblxuICAgdmFyIG1hcFNlcnZpY2UgPSB7fTtcblxuICAgbWFwU2VydmljZS5nb1RvUGxhY2UgPSBmdW5jdGlvbihuYW1lLGxhdCxsb24sc2NvcGUpIHtcbiAgICB2YXIgX2dlb0pzb24gPSB7XG4gICAgICAgICAgICAgIFwidHlwZVwiOiBcIkZlYXR1cmVDb2xsZWN0aW9uXCIsXG4gICAgICAgICAgICAgIFwiY3JzXCI6IHsgXCJ0eXBlXCI6IFwibmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwicHJvcGVydGllc1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogJ3VybjpvZ2M6ZGVmOmNyczpFUFNHOjozMjcyMSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXCJmZWF0dXJlc1wiOiBbXG4gICAgICAgICAgICAgICAgeyBcInR5cGVcIjogXCJGZWF0dXJlXCIsXG4gICAgICAgICAgICAgICAgXCJnZW9tZXRyeVwiOntcbiAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6XCJQb2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICBcImNvb3JkaW5hdGVzXCI6W2xhdCxsb25dXG4gICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcInByb3BlcnRpZXNcIjp7XG4gICAgICAgICAgICAgICAgICAgICAgXCJub21icmVcIjogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9O1xuICAgICBsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGZ1bmN0aW9uKG1hcCkge1xuICAgICAgdmFyIF9sYXRsbmc7XG4gICAgICAgdmFyIGxheWVyID0gTC5Qcm9qLmdlb0pzb24oX2dlb0pzb24sIHtcbiAgICAgICAgICdwb2ludFRvTGF5ZXInOiBmdW5jdGlvbihmZWF0dXJlLCBsYXRsbmcpIHtcbiAgICAgICAgICAgX2xhdGxuZyA9IGxhdGxuZztcbiAgICAgICAgICAgdmFyIGh0bWxQb3BVcCA9IFwiPHAgYWxpZ249J2NlbnRlcic+XCIrZmVhdHVyZS5wcm9wZXJ0aWVzLm5vbWJyZStcIiA8YnIvPiA8YSBuZy1jbGljaz0nbmV3X3JlcG9ydF9mcm9tX2xhdGxvbihcIitfbGF0bG5nLmxhdCtcIixcIitfbGF0bG5nLmxuZytcIik7Jz5JbmljaWFyIHJlcG9ydGUgYXF1w608L2E+PC9wPlwiO1xuICAgICAgICAgICB2YXIgY29tcGlsZWQgPSAkY29tcGlsZShodG1sUG9wVXApKHNjb3BlKTtcbiAgICAgICAgICAgcmV0dXJuIEwubWFya2VyKGxhdGxuZykuYmluZFBvcHVwKGNvbXBpbGVkWzBdKTtcbiAgICAgICAgIH1cbiAgICAgICB9KTtcblxuICAgICAgIGxheWVyLmFkZFRvKG1hcCk7XG4gICAgICAgbWFwLnNldFZpZXcoX2xhdGxuZywgMTgpO1xuICAgICAgIGxheWVyLm9wZW5Qb3B1cCgpO1xuICAgICB9KTtcbiAgIH07XG5cbiAgbWFwU2VydmljZS5jZW50ZXJNYXBPbkNvb3JkcyA9IGZ1bmN0aW9uKGxhdCxsbmcsem9vbSkge1xuICAgICBsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGZ1bmN0aW9uKG1hcCkge1xuICAgICAgICBtYXAuc2V0VmlldyhuZXcgTC5MYXRMbmcobGF0LCBsbmcpLHpvb20pO1xuICAgICAgIH0pO1xuICAgICB9XG5cbiAgIHJldHVybiBtYXBTZXJ2aWNlO1xuXG4gfV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ01vZGFsU2VydmljZScsIFsgZnVuY3Rpb24oKSB7XG5cbiAgdmFyIG1vZGFsT0JKID0ge307XG4gIG1vZGFsT0JKLmFjdGl2ZU1vZGFsID0gbnVsbDtcblxuICBtb2RhbE9CSi5jaGVja05vTW9kYWxJc09wZW4gPSBmdW5jdGlvbigpIHtcbiAgICBpZihtb2RhbE9CSi5hY3RpdmVNb2RhbCl7XG4gICAgICBtb2RhbE9CSi5hY3RpdmVNb2RhbC5oaWRlKCk7XG4gICAgICBtb2RhbE9CSi5hY3RpdmVNb2RhbC5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbW9kYWxPQko7XG5cbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdQaW5TZXJ2aWNlJywgWyckaHR0cCcsICdsZWFmbGV0RGF0YScsJ0NvbmZpZ1NlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCwgbGVhZmxldERhdGEsIENvbmZpZ1NlcnZpY2UpIHtcblxuICB2YXIgcGluc1VSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTCArIFwiL29mZXJ0YS5nZW9qc29uLy0zNC44Mjg1MTgsLTU1Ljk1MTM3Ni9NQVRVVElOT1wiO1xuICB2YXIgYXBpVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMICsgXCIvYXBpL1wiXG4vKipcbiAgICogQ29uc3RydWN0b3IsIHdpdGggY2xhc3MgbmFtZVxuICAgKi9cbiAgZnVuY3Rpb24gUGluKF9kYXRhKSB7XG4gICAgYW5ndWxhci5leHRlbmQodGhpcywgX2RhdGEpO1xuICB9XG5cblxuICBQaW4uZ2V0QWxsID0gZnVuY3Rpb24oKXtcbiAgICByZXR1cm4gJGh0dHAuZ2V0KHBpbnNVUkwsIHtjYWNoZTogZmFsc2UsIHBhcmFtczoge2hhc2hfaWQ6TWF0aC5yYW5kb20oKX19KTtcbiAgfVxuXG4gIFBpbi5zZW5kVXNlckxvY2F0aW9uID0gZnVuY3Rpb24obGF0aXR1ZGUsbG9uZ2l0dWRlLHVzZXJuYW1lLHBhc3N3b3JkLHVpZCl7XG4gICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXJuYW1lKycmcGFzc3dvcmQ9JytwYXNzd29yZCsnJmxhdD0nK2xhdGl0dWRlKycmbG9uPScrbG9uZ2l0dWRlK1wiJnVpZD1cIit1aWQ7XG4gICAgcmV0dXJuICRodHRwLnBvc3QoYXBpVVJMICsgJ3NlbmRfdXNlcl9wb3NpdGlvbicsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcblxuICB9XG5cblxuICAgIFBpbi5fYWxsID0gW107XG4gICAgUGluLmN1cnJlbnQgPSB7fTtcbiAgICBQaW4ubGFzdFBpbnNSZXNwb25zZSA9IG51bGw7XG5cblxuXG5cbiAgICAvKipcbiAgICAgKiBTdGF0aWMgbWV0aG9kLCBhc3NpZ25lZCB0byBjbGFzc1xuICAgICAqIEluc3RhbmNlICgndGhpcycpIGlzIG5vdCBhdmFpbGFibGUgaW4gc3RhdGljIGNvbnRleHRcbiAgICAgKi9cbiAgICBQaW4uYnVpbGQgPSBmdW5jdGlvbihfZGF0YSkge1xuXG4gICAgICByZXR1cm4gbmV3IFBpbihcbiAgICAgICAgX2RhdGFcbiAgICAgICk7XG4gICAgfTtcblxuICAgIFBpbi5wcm90b3R5cGUuc2V0TGF0TG5nID0gZnVuY3Rpb24gKGxhdGxuZykge1xuXG4gICAgICB0aGlzLmxhdCA9IGxhdGxuZy5sYXQ7XG4gICAgICB0aGlzLmxvbiA9IGxhdGxuZy5sbmc7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY29uc3RydWN0b3IgZnVuY3Rpb25cbiAgICAgKi9cbiAgICByZXR1cm4gUGluO1xuXG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnUG9wVXBTZXJ2aWNlJywgWyckaW9uaWNQb3B1cCcsJ1ZhbGlkYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24oJGlvbmljUG9wdXAsVmFsaWRhdGlvblNlcnZpY2UpIHtcblxuICByZXR1cm4ge1xuICAgIHNob3dfYWxlcnQ6IGZ1bmN0aW9uIChhbGVydF90aXRsZSxhbGVydF9tZXNzYWdlKSB7XG4gICAgICAgIHZhciBhbGVydFBvcHVwID0gJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgdGl0bGU6IGFsZXJ0X3RpdGxlLFxuICAgICAgICAgdGVtcGxhdGU6IGFsZXJ0X21lc3NhZ2VcbiAgICAgICAgfSk7XG4gICAgICAgIGFsZXJ0UG9wdXAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgIGNvbmZpcm1Qb3B1cDogZnVuY3Rpb24odGl0bGUsdGV4dCl7XG4gICAgIHZhciBjb25maXJtUG9wdXAgPSAkaW9uaWNQb3B1cC5jb25maXJtKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgIHJldHVybiBjb25maXJtUG9wdXA7XG4gICB9LFxuXG4gICBhc2tGb3JPbmVWYWx1ZVBvcFVwOiBmdW5jdGlvbihzY29wZSx0aXRsZSx0ZXh0LGZpZWxkX25hbWUsdmFsaWRhdGlvblR5cGUpe1xuICAgICAgJHNjb3BlID0gc2NvcGU7XG4gICAgICB2YXIgbXlQb3B1cCA9ICRpb25pY1BvcHVwLnNob3coe1xuICAgICAgdGVtcGxhdGU6IGZpZWxkX25hbWUgKyAnOiA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cIm9uZV92YWx1ZV9wb3B1cFwiPjxkaXYgaWQ9XCJlcnJvcl9jb250YWluZXJfaW5zaWRlXCI+PC9kaXY+JyxcbiAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgIHN1YlRpdGxlOiB0ZXh0LFxuICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgIGJ1dHRvbnM6IFtcbiAgICAgICAgeyB0ZXh0OiAnQ2FuY2VsYXInIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0ZXh0OiAnPGI+RW52aWFyPC9iPicsXG4gICAgICAgICAgdHlwZTogJ2J1dHRvbi1wb3NpdGl2ZScsXG4gICAgICAgICAgb25UYXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciBlcnJvcnMgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvbmVfdmFsdWVfcG9wdXBcIikudmFsdWU7XG4gICAgICAgICAgICBpZih2YWxpZGF0aW9uVHlwZT09XCJub3ROdWxsXCIpe1xuICAgICAgICAgICAgICBpZighVmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVfbm90X2VtcHR5KHZhbHVlKSl7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzICsgJzxoMz4tIEVsIGNhbXBvIFwiJyArIGZpZWxkX25hbWUgKyAnXCIgbm8gcHVlZGUgZXN0YXIgdmFjw61vLjwvaDM+JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodmFsaWRhdGlvblR5cGU9PVwiZW1haWxcIil7XG4gICAgICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV9lbWFpbCh2YWx1ZSkpe1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBFbCBjYW1wbyBcIicgKyBmaWVsZF9uYW1lICsgJ1wiIG5vIGVzIHVuYSBkaXJlY2Npw7NuIGRlIGNvcnJlbyB2w6FsaWRhLjwvaDM+JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodmFsaWRhdGlvblR5cGU9PVwiaWRkb2NfdXlcIil7XG4gICAgICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV9pZGRvY191eSh2YWx1ZSkpe1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBFbCBjYW1wbyBcIicgKyBmaWVsZF9uYW1lICsgJ1wiIG5vIGVzIHVuYSBjw6lkdWxhIHVydWd1YXlhIHbDoWxpZGEuPC9oMz4nO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih2YWxpZGF0aW9uVHlwZT09XCJ0d29fd29yZHNcIil7XG4gICAgICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV90d29fd29yZHModmFsdWUpKXtcbiAgICAgICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMgKyAnPGgzPi0gRWwgY2FtcG8gXCInICsgZmllbGRfbmFtZSArICdcIiBkZWJlIGNvbnRlbmVyIGFsIG1lbm9zIGRvcyBwYWxhYnJhcy48L2gzPic7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGVycm9ycyE9XCJcIil7XG4gICAgICAgICAgICAgIHZhciBlcnJvckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXJyb3JfY29udGFpbmVyX2luc2lkZVwiKTtcbiAgICAgICAgICAgICAgZXJyb3JEaXYuaW5uZXJIVE1MPSBlcnJvcnM7XG4gICAgICAgICAgICAgIGVycm9yRGl2LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgIC8vZG9uJ3QgYWxsb3cgdGhlIHVzZXIgdG8gY2xvc2UgdW5sZXNzIGhlIGVudGVycyB3aWZpIHBhc3N3b3JkXG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KTtcbiAgICByZXR1cm4gbXlQb3B1cDtcbiAgIH1cblxuXG4gIH07XG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnU2VtYXBob3JlU2VydmljZScsIFtmdW5jdGlvbigpIHtcblxuICB2YXIgc2VtYXBob3JlT2JqID0ge307XG4gIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzID0gbmV3IEFycmF5KCk7XG4gIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzWydvcGVuLW1vZGFsJ10gPSBcImF2YWlsYWJsZVwiO1xuICBzZW1hcGhvcmVPYmouc2VtYXBob3Jlc1snc3VibWl0LWZvcm0nXSA9IFwiYXZhaWxhYmxlXCI7XG4gIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzWydzdWJtaXQtbG9jYXRpb24nXSA9IFwiYXZhaWxhYmxlXCI7XG4gIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzWydjYW5fdGFsayddID0gXCJhdmFpbGFibGVcIjtcblxuXG5cblxuICBzZW1hcGhvcmVPYmoudGFrZUlmQXZhaWxhYmxlID0gZnVuY3Rpb24oc2VtYXBob3JlSWQpIHtcbiAgICAvL2NvbnNvbGUubG9nKHNlbWFwaG9yZUlkICsgXCI6XCIgKyBzZW1hcGhvcmVPYmouc2VtYXBob3Jlc1tzZW1hcGhvcmVJZF0pO1xuICAgIGlmKHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzW3NlbWFwaG9yZUlkXT09XCJhdmFpbGFibGVcIil7XG4gICAgICAgIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzW3NlbWFwaG9yZUlkXSA9IFwib2NjdXBpZWRcIjtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfWVsc2V7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgc2VtYXBob3JlT2JqLm1ha2VBdmFpbGFibGVBZ2FpbiA9IGZ1bmN0aW9uKHNlbWFwaG9yZUlkKSB7XG4gICAgaWYoc2VtYXBob3JlT2JqLnNlbWFwaG9yZXNbc2VtYXBob3JlSWRdPT1cIm9jY3VwaWVkXCIpe1xuICAgICAgICBzZW1hcGhvcmVPYmouc2VtYXBob3Jlc1tzZW1hcGhvcmVJZF0gPSBcImF2YWlsYWJsZVwiO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9ZWxzZXtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc2VtYXBob3JlT2JqO1xuXG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnbG9jYXRpb25BUEknLCBbJyRodHRwJywgJyRxJywgJ0FwaUltRW5kcG9pbnQnLCAnQXBpRGF0YUVuZHBvaW50JywgJ0NvbmZpZ1NlcnZpY2UnLCAnTG9jYXRpb25zU2VydmljZScsIGZ1bmN0aW9uKCRodHRwLCAkcSwgQXBpSW1FbmRwb2ludCwgQXBpRGF0YUVuZHBvaW50LCBDb25maWdTZXJ2aWNlLCBMb2NhdGlvbnNTZXJ2aWNlKSB7XG5cbiAgdmFyIHJlc3RQcmVmZml4ID0gXCJ1YmljYWNpb25lc1Jlc3RQcm9kXCI7XG5cblxuICB2YXIgbG9jYXRpb25BUEkgPSB7fTtcblxuICBsb2NhdGlvbkFQSS5zZWFyY2hMb2NhdGlvbkJ5U3RyID0gZnVuY3Rpb24oX2xvY2F0aW9uKSB7XG4gICAgLypyZXR1cm4gJGh0dHAuZ2V0KEFwaUltRW5kcG9pbnQudXJsICsgJy8nICsgcmVzdFByZWZmaXggKyAnL2NhbGxlcycsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgbm9tYnJlOiBfbG9jYXRpb25cbiAgICAgIH1cbiAgICB9KTsqL1xuICAgIHZhciBiYXNlVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMICsgXCIvYWpheC9nZW9jb2RlP3Rlcm09XCIgKyBMb2NhdGlvbnNTZXJ2aWNlLnNlbGVjdGVkX2NvdW5jaWwgKyBcIixcIiArIF9sb2NhdGlvbjtcbiAgICByZXR1cm4gJGh0dHAuZ2V0KGJhc2VVUkwsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBwYXJhbXM6IHt9XG4gICAgfSk7XG4gIH07XG5cblxuICBsb2NhdGlvbkFQSS5zZWFyY2hFc3F1aW5hQnlTdHIgPSBmdW5jdGlvbihfbG9jYXRpb24pIHtcbiAgICAvL2NvbnNvbGUubG9nKFwic2VhcmNoRXNxdWluYUJ5U3RyID0gXCIgKyBKU09OLnN0cmluZ2lmeShfbG9jYXRpb24pKTtcbiAgICAvL3JldHVybiAkaHR0cC5nZXQoQXBpSW1FbmRwb2ludC51cmwgKyAnLycgKyByZXN0UHJlZmZpeCArICcvZXNxdWluYS8nICsgX2xvY2F0aW9uLmNhbGxlICsgJy8nICsgX2xvY2F0aW9uLmVzcXVpbmEsIHtcbiAgICAgIC8qcmV0dXJuICRodHRwLmdldChBcGlJbUVuZHBvaW50LnVybCArICcvJyArIHJlc3RQcmVmZml4ICsgJy9jcnVjZXMvJyArIF9sb2NhdGlvbi5jYWxsZSArICcvJyxcbiAgICAgIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgbm9tYnJlOiBfbG9jYXRpb24uZXNxdWluYVxuICAgICAgICB9XG4gICAgICB9KTsqL1xuXG4gICAgICB2YXIgYmFzZVVSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTCArIFwiL2FqYXgvZ2VvY29kZT90ZXJtPVwiICsgTG9jYXRpb25zU2VydmljZS5zZWxlY3RlZF9jb3VuY2lsICsgXCIsXCJcbiAgICAgICAgICAgICAgICAgICAgKyBfbG9jYXRpb24uY2FsbGUgKyBcIixcIiArIF9sb2NhdGlvbi5lc3F1aW5hO1xuICAgICAgcmV0dXJuICRodHRwLmdldChiYXNlVVJMLCB7XG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgIHBhcmFtczoge31cbiAgICAgIH0pO1xuICB9O1xuXG4gIGxvY2F0aW9uQVBJLmdldExvY2F0aW9uR2VvbSA9IGZ1bmN0aW9uKF9sb2NhdGlvbikge1xuICAgIHZhciB1cmwgPSBBcGlJbUVuZHBvaW50LnVybCArICcvJyArIHJlc3RQcmVmZml4ICsgbG9jYXRpb25BUEkuZ2V0UGFyYW1QYXRoQnlUaXBvKF9sb2NhdGlvbi50aXBvKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9sb2NhdGlvbi5wYXRoUGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB1cmwgKz0gJy8nICsgX2xvY2F0aW9uLnBhdGhQYXJhbXNbaV07XG4gICAgfVxuICAgIHJldHVybiAkaHR0cC5nZXQoYmFzZVVSTCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICB9KTtcbiAgfTtcblxuICBsb2NhdGlvbkFQSS5nZXRMb2NhdGlvbkdlb21QTUIgPSBmdW5jdGlvbihjYWxsZSxlc3F1aW5hX251bWVybyx0aXBvKSB7XG4gICAgdmFyIGJhc2VVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9hamF4L2dlb2NvZGU/dGVybT1cIiArIExvY2F0aW9uc1NlcnZpY2Uuc2VsZWN0ZWRfY291bmNpbCArIFwiLFwiXG4gICAgICAgICAgICAgICsgY2FsbGUgKyBcIixcIiArIGVzcXVpbmFfbnVtZXJvICsgXCIsXCIgKyB0aXBvO1xuXG4gICAgcmV0dXJuICRodHRwLmdldChiYXNlVVJMKTtcblxuICB9O1xuXG4gIGxvY2F0aW9uQVBJLmdldFBhcmFtUGF0aEJ5VGlwbyA9IGZ1bmN0aW9uKF90aXBvKSB7XG5cbiAgICB2YXIgcmVzdEdlb0RhdGFTZXJ2aWNlUGF0aCA9IHtcbiAgICAgICdFU1FVSU5BJzpcIi9lc3F1aW5hXCIsXG4gICAgICAnRElSRUNDSU9OJzpcIi9kaXJlY2Npb25cIlxuICAgIH07XG5cbiAgICByZXR1cm4gcmVzdEdlb0RhdGFTZXJ2aWNlUGF0aFtfdGlwb107XG5cblxuICB9O1xuXG4gIHJldHVybiBsb2NhdGlvbkFQSTtcblxufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ18nLCBbZnVuY3Rpb24oKSB7XG4gIHJldHVybiB3aW5kb3cuXzsgLy9VbmRlcnNjb3JlIG11c3QgYWxyZWFkeSBiZSBsb2FkZWQgb24gdGhlIHBhZ2Vcbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdVc2VyU2VydmljZScsIFsnJGh0dHAnLCBmdW5jdGlvbigkaHR0cCkge1xuXG4gIC8vdmFyIGJhc2VVUkwgPSBcImh0dHA6Ly9wbWJ1eS5kZXZlbG9wbWVudC5kYXRhdXkub3JnL2F1dGgvYWpheC9cIjtcbiAgdmFyIFVzZXJPYmogPSB7fTtcbiAgVXNlck9iai51aWQgPSBudWxsO1xuICBVc2VyT2JqLm5hbWUgPSBudWxsO1xuICBVc2VyT2JqLmVtYWlsID0gbnVsbDtcbiAgVXNlck9iai5wYXNzd29yZCA9IG51bGw7XG4gIFVzZXJPYmoucGljdHVyZV91cmwgPSBcInVybCguL2ltZy9pY29uLXVzZXItYW5vbnltb3VzLnBuZylcIjtcbiAgVXNlck9iai5zaG93X2xvY2F0aW9uID0gbnVsbDtcblxuXG4gIFVzZXJPYmouc2F2ZV91c2VyX2RhdGEgPSBmdW5jdGlvbiAodXNlcl9uYW1lLCB1c2VyX3Bhc3N3b3JkLCB1c2VyX3BpY3R1cmVfdXJsLCBzaG93X2xvY2F0aW9uLCB1aWQsIHN0YXR1cywgZ2VuZGVyLCBpbnRlcmVzdGVkKSB7XG4gICAgICBVc2VyT2JqLnVpZCA9IHVpZDtcbiAgICAgIFVzZXJPYmoubmFtZSA9IHVzZXJfbmFtZTtcbiAgICAgIFVzZXJPYmoucGFzc3dvcmQgPSB1c2VyX3Bhc3N3b3JkO1xuICAgICAgVXNlck9iai5waWN0dXJlX3VybCA9IHVzZXJfcGljdHVyZV91cmw7XG4gICAgICBVc2VyT2JqLnNob3dfbG9jYXRpb24gPSBzaG93X2xvY2F0aW9uO1xuICAgICAgVXNlck9iai5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICBVc2VyT2JqLmdlbmRlciA9IGdlbmRlcjtcbiAgICAgIFVzZXJPYmouaW50ZXJlc3RlZCA9IGludGVyZXN0ZWQ7XG5cbiAgICAgIC8vU0FWRSBJTiBQT1VDSERCXG4gIH1cblxuICBVc2VyT2JqLmVyYXNlX3VzZXJfZGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICBVc2VyT2JqLm5hbWUgPSBudWxsO1xuICAgIFVzZXJPYmouZW1haWwgPSBudWxsO1xuICAgIFVzZXJPYmoucGFzc3dvcmQgPSBudWxsO1xuICAgIFVzZXJPYmouaWRlbnRpdHlfZG9jdW1lbnQgPSBudWxsO1xuICAgIFVzZXJPYmoucGhvbmUgPSBudWxsO1xuICAgIFVzZXJPYmoucGljdHVyZV91cmwgPSBudWxsO1xuICAgIC8vREVMRVRFIElOIFBPVUNIREJcbiAgfVxuXG4gIFVzZXJPYmouZ2V0X3VzZXJfZGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvL0xFVkFOVEEgREUgUE9VQ0hEQiBMT1MgREFUT1MgREVMIFVTVUFSSU8uIFNJIEhBWSBMT1MgUE9ORSBFTiBMQVMgVkFSSUFCTEVTIERFTCBTRVJWSUNJTy4gU0kgTk8gSEFZIFBPTkUgVE9ETyBOVUxMXG4gIH1cblxuICBVc2VyT2JqLmFkZF9waG90byA9IGZ1bmN0aW9uICh1c2VyX3BpY3R1cmVfdXJsKSB7XG4gICAgVXNlck9iai5waWN0dXJlX3VybCA9IHVzZXJfcGljdHVyZV91cmw7XG4gIH1cblxuICBVc2VyT2JqLmlzTG9nZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgIGlmKFVzZXJPYmoubmFtZSE9bnVsbCAmJiBVc2VyT2JqLm5hbWUhPVwiXCIpe1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfWVsc2V7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cblxuICByZXR1cm4gVXNlck9iajtcblxufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ1ZhbGlkYXRpb25TZXJ2aWNlJywgWyckaHR0cCcsJyRpb25pY1BvcHVwJywgZnVuY3Rpb24oJGh0dHAsJGlvbmljUG9wdXApIHtcblxuICByZXR1cm4ge1xuICAgIGlzTW9iaWxlRGV2aWNlOiBmdW5jdGlvbigpe1xuICAgICAgaWYod2luZG93LmNvcmRvdmEpe1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgIH0sXG5cbiAgICB2YWxpZGF0ZV9ub3RfZW1wdHk6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZih2YWx1ZSE9bnVsbCAmJiB2YWx1ZSE9XCJ1bmRlZmluZWRcIiAmJiB2YWx1ZSE9XCJcIil7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB2YWxpZGF0ZV90d29fd29yZHM6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZih2YWx1ZSE9bnVsbCAmJiB2YWx1ZSE9XCJ1bmRlZmluZWRcIiAmJiB2YWx1ZSE9XCJcIil7XG4gICAgICAgICAgdmFyIHZhbHVlcyA9IHZhbHVlLnNwbGl0KCcgJykuZmlsdGVyKGZ1bmN0aW9uKHYpe3JldHVybiB2IT09Jyd9KTtcbiAgICAgICAgICBpZiAodmFsdWVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgLy90d28gb3IgbW9yZSB3b3Jkc1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvL25vdCBlbm91Z2ggd29yZHNcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHZhbGlkYXRlX2VxdWFsc1RvOiBmdW5jdGlvbiAodmFsdWUsc2Vjb25kVmFsdWUpIHtcbiAgICAgIGlmKHZhbHVlPT1zZWNvbmRWYWx1ZSl7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgdmFsaWRhdGVfZW1haWw6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZih2YWx1ZSE9bnVsbCAmJiB2YWx1ZSE9XCJ1bmRlZmluZWRcIiAmJiB2YWx1ZSE9XCJcIil7XG4gICAgICAgICAgdmFyIHJlID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XG4gICAgICAgICAgcmV0dXJuIHJlLnRlc3QodmFsdWUpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgdmFsaWRhdGVfaWRkb2NfdXk6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYodmFsdWUhPW51bGwgJiYgdmFsdWUhPVwidW5kZWZpbmVkXCIgJiYgdmFsdWUhPVwiXCIpe1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFxEL2csICcnKTtcbiAgICAgICAgICB2YXIgZGlnID0gdmFsdWVbdmFsdWUubGVuZ3RoIC0gMV07XG4gICAgICAgICAgdmFyIGEgPSAwOyB2YXIgaSA9IDA7XG4gICAgICAgICAgaWYodmFsdWUubGVuZ3RoIDw9IDYpe1xuICAgICAgICAgICAgZm9yKGkgPSB2YWx1ZS5sZW5ndGg7IGkgPCA3OyBpKyspe1xuICAgICAgICAgICAgICB2YWx1ZSA9ICcwJyArIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IoaSA9IDA7IGkgPCA3OyBpKyspe1xuICAgICAgICAgICAgYSArPSAocGFyc2VJbnQoXCIyOTg3NjM0XCJbaV0pICogcGFyc2VJbnQodmFsdWVbaV0pKSAlIDEwO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgIGlmKGElMTAgPT09IDApe1xuICAgICAgICAgICAgcmVzdWx0ID0gMDtcbiAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHJlc3VsdCA9IDEwIC0gYSAlIDEwO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZihkaWcgPT0gcmVzdWx0KXtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgIH1lbHNle1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9O1xufV0pO1xuIl19
